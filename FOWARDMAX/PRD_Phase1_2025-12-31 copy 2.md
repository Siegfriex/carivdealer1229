# ForwardMax 딜러 플랫폼 Phase 1 PRD

**문서명**: ForwardMax 딜러 플랫폼 Phase 1 PRD (기능 설계 문서)  
**버전**: v1.0 (Frozen)  
**마일스톤**: 2025-12-31  
**작성일**: 2025-12-23  
**최종 업데이트**: 2025-12-23  
**작성자**: ForwardMax 기획팀  
**검증 상태**: 완료(Phase 1 기준)  
**문서 목적**: 내부 이해관계자(기획·디자인·개발) 간 인식 정렬, 와이어프레임과 기능명세 100% 매핑

---

## **목차**

1. [**사업 기획(요약)**](#1-사업-기획요약)
2. [**핵심 요약 및 결정사항(12/23) + Phase 1 마일스톤**](#2-핵심-요약-및-결정사항1223--phase-1-마일스톤)
3. [**플로우차트 작성 규칙(표준)**](#3-플로우차트-작성-규칙표준)
4. [**기능 명세 규칙(FRD 작성 규칙)**](#4-기능-명세-규칙frd-작성-규칙)
5. [**역할 및 구성요소(Actor/Component)**](#5-역할-및-구성요소actorcomponent)
6. [**인덱스/ID 규칙 + ID 레지스트리**](#6-인덱스id-규칙--id-레지스트리)
7. [**기능 엔터티–화면 엔터티–메타데이터 체계**](#7-기능-엔터티화면-엔터티메타데이터-체계)
8. [**정보구조(IA) 및 사이트맵**](#8-정보구조ia-및-사이트맵)
9. [**사이트맵 기반 유저플로우**](#9-사이트맵-기반-유저플로우)
10. [**FRD: 세부 기능 명세**](#10-frd-세부-기능-명세)
11. [**NFR: 비기능 요구사항**](#11-nfr-비기능-요구사항)
12. [**TSD: 기술 설계**](#12-tsd-기술-설계)
13. [**SRD: 서비스 요구**](#13-srd-서비스-요구)
14. [**부록**](#14-부록)

---

## **1. 사업 기획(요약)**

### **1.1 프로젝트 개요**

ForwardMax 딜러 플랫폼은 국내 영세 중고차 딜러를 대상으로 하는 B2B SaaS 기반의 수출 통합 관제 시스템이다. 기존의 파편화된 수출 프로세스를 디지털화하고, 딜러의 업무를 "실행"에서 "확인"으로 전환하는 것을 핵심 목표로 한다.

### **1.2 핵심 가치 제안**

- **딜러 관점**: 부가세 환급 9.09% + 복잡한 서류/정산/물류 부담 제거
- **플랫폼 관점**: 검차 기반 신뢰 구조 + 블랙박스 전략(바이어 정보/최종가 마스킹)

### **1.3 시장 기회**

- 연간 60만 대 이상, 6조원 규모의 중고차 수출 시장
- 디지털 전환율 극히 낮음 → 플랫폼 기회

[^1]

---

## **2. 핵심 요약 및 결정사항(12/23) + Phase 1 마일스톤**

### **2.1 Phase 1 마일스톤 정의**

- **마일스톤 날짜**: 2025-12-31
- **산출물 목적**: 디자인 결과물이 아니라 **기능 설계 문서(내부 이해관계자 정렬용)**
- **성공 조건**:
  - 전체 유저 플로우·태스크 플로우가 화면 단위로 모두 연결
  - 화면 간 이동 관계 명확
  - 주요 인터랙션(버튼 클릭 시 이동/모달/상태 변화)은 텍스트 주석으로 설명
  - 기능명세와 화면은 원칙적으로 **100% 일치**
  - 개발자가 와이어프레임(+주석)만 보고도 구현 착수 가능한 수준

### **2.2 와이어프레임 작업 원칙(12/23 결정)**

#### **2.2.1 목적·성격 재정의**

- **산출물 성격**: 디자인 결과물이 아니라 **기능 설계 문서**
- **사용자**: 외부 사용자 테스트·마케팅용이 아니라 **내부 이해관계자(기획·디자인·개발)**
- **목적**: 인식 정렬, 기획 플로우차트·기능명세가 실제 화면 단위로 구현 가능한지 검증

#### **2.2.2 Figma 작업 원칙**

- 하나의 공용 디자인용 Figma 파일에서만 작업, 개인 파일 분리 금지
- 회의마다 날짜 기반 페이지를 새로 만들어, 해당 회의에서 논의할 프레임만 옮겨 정리
- 프레임 네이밍은 기능명 기반, 동일 기능은 항상 동일한 구조·네이밍 유지

#### **2.2.3 플로우별 담당자(12/23 확정)**

| 플로우 | 담당자 | 범위 |
|---|---|---|
| 1단계: 진입–회원가입 | 엄태영 | 회원가입/인증 플로우 |
| 2단계: 검차(검사) | 엄태영 | 검차 신청/배정/수행 플로우 |
| 3단계: 업로드 및 판매(경매·즉시구매 포함) | 황설휘 | 차량 등록/판매 방식 선택/경매/일반 판매 |
| 4단계: 탁송 | 황설휘 | 탁송 예약/배차/인계 플로우 |

### **2.3 Phase 1 핵심 결정사항(12/23)**

#### **결정 D-P1-001: 일반 판매 → 경매 전환 가능**

- **결정 내용**: 기존 일반 판매(제안형)로 올라간 차량도, 필요시 경매 방식으로 변경 가능
- **조건**: 변경 가능 시점/상태, 변경 시 상태 변화/재검사 필요 여부는 Phase 1 내 결정 필요
- **영향 범위**: `SCR-0300`(차량 상세/판매 방식 선택 화면), `FUNC-15`(판매 방식 변경), 상태 전이 로직
- **근거**: 12/23 회의 결정사항
- **오너**: 기획팀
- **결정일**: 2025-12-23

#### **결정 D-P1-002: 차량 기본정보 입력 방식 변경 - 등록원부 OCR 기반 자동 채움**

- **결정 내용**: 검차 전 차량 기본 정보 직접 입력 플로우를 제거하고, 자동차 등록원부 OCR로 자동 업로드하는 방식으로 변경
- **플로우**: 차량번호 입력 → 등록원부 OCR/추출 → 차량 기본정보 자동 채움(차대번호/VIN, 제조사, 모델, 연식, 주행거리 등)
- **영향 범위**: `SCR-0200`(차량 등록 화면), `FUNC-05`(차량 등록), `SRD-001`(등록원부 OCR 연동)
- **근거**: 12/23 회의 결정사항, 국내 중고차 플랫폼 사례(차량번호만으로 등록원부·사고이력·저당권 자동 조회)
- **오너**: 기획팀
- **결정일**: 2025-12-23

#### **결정 D-P1-003: 경매 UX 개선 - 최고가 공개 + 즉시구매 포함**

- **결정 내용**: 경매 진행 시 최고 입찰가를 바이어에게 보이는 방식으로 변경, 경매 안에 즉시구매 기능 포함
- **정책 후보**: 최고가 공개 시점(실시간 vs 특정 시점), 즉시구매 가격 설정 규칙(최소 시작가 대비 비율)은 Phase 1 내 결정 필요
- **영향 범위**: `SCR-0400`(경매 상세 화면), `SCR-0500`(바이어 경매 조회 화면), `FUNC-18`(경매 입찰), `FUNC-19`(즉시구매)
- **근거**: 12/23 회의 결정사항, 경쟁사 동향(현대글로비스 오토벨·차옥션 등)
- **오너**: 기획팀
- **결정일**: 2025-12-23

### **2.4 Phase 1 결정로그 요약표**

| 결정 ID | 결정 내용 | 영향 범위(기능/화면/상태) | 근거 | 오너 | 결정일 | 상태 |
|---|---|---|---|---|---|---|
| D-P1-001 | 일반 판매 → 경매 전환 가능 | `SCR-0300`, `FUNC-15`, 상태 전이 | 12/23 회의 | 기획팀 | 2025-12-23 | 확정 |
| D-P1-002 | 등록원부 OCR 기반 차량정보 자동 채움 | `SCR-0200`, `FUNC-05`, `SRD-001` | 12/23 회의, 시장 사례 | 기획팀 | 2025-12-23 | 확정 |
| D-P1-003 | 경매 최고가 공개 + 즉시구매 포함 | `SCR-0400`, `SCR-0500`, `FUNC-18`, `FUNC-19` | 12/23 회의, 경쟁사 동향 | 기획팀 | 2025-12-23 | 확정(정책 세부는 오픈) |

[^2]

---

## 3. 플로우차트 작성 규칙(표준)

본 PRD의 플로우차트는 `통합설계명세서_1.md` Section 9.1의 규칙을 표준으로 채택한다.

### 3.1 플로우차트 태그 체계

| 태그 | 도형 | 색상 | 텍스트 표기 | 용도 |
|---|---|---|---|---|
| `[시작]` | 붉은색 타원형 | RGB(255, 0, 0) | `[시작]` | 플로우 시작점 |
| `[끝]` | 붉은색 타원형 | RGB(255, 0, 0) | `[끝]` | 플로우 종료점 |
| `[프로세스]` | 주황색 직사각형 | RGB(255, 165, 0) | `[프로세스]: [내용]` | 처리 단계 |
| `[판단]` | 노란색 마름모 | RGB(255, 255, 0) | `[판단]: [조건] (Y/N)` | 분기점/조건 판단 |
| `[입력]` | 연두색 평행사변형 | RGB(144, 238, 144) | `[입력]: [내용]` | 사용자 입력/데이터 입력 |
| `[출력]` | 파란색 물결 하단 사각형 | RGB(0, 0, 255) | `[출력]: [내용]` | 결과/문서/상태 출력 |

### 3.2 플로우차트 작성 규칙

- 각 도형은 실선 화살표로 연결
- 분기점(Y/N)은 두 개의 화살표로 표시, 화살표 위에 조건(Y/N) 표기
- 각 프로세스/판단/입출력에는 관련 ID 레퍼런스 포함 가능(예: `[프로세스]: 검차 신청 → `FUNC-05`)
- DOCX 변환 시 Microsoft Word SmartArt 또는 도형 사용 권장

> 참조: `통합설계명세서_1.md` Section 9.1

---

## 4. 기능 명세 규칙(FRD 작성 규칙)

### 4.1 기능 명세(FRD) 표준 템플릿

각 기능은 다음 표 형식으로 명세한다:

| 필드명 | 설명 | 필수 여부 |
|---|---|---|
| FUNC-ID | 기능 고유 식별자(예: `FUNC-05`) | 필수 |
| 기능명 | 기능의 한국어 이름 | 필수 |
| 정의 | 기능이 무엇을 하는지 한 문장 정의 | 필수 |
| 목표 | 기능의 목적/해결하는 문제 | 필수 |
| 트리거 | 기능이 실행되는 조건/이벤트 | 필수 |
| 선행조건 | 기능 실행 전 만족해야 할 조건 | 필수 |
| 주요 플로우 | 단계별 처리 흐름(텍스트 또는 플로우차트 참조) | 필수 |
| 예외/오류 | 예외 상황 및 오류 처리 | 선택 |
| 출력 | 기능 실행 결과/생성 데이터 | 필수 |
| 달성기준(AC) | 기능이 성공적으로 완료된 것으로 판단하는 기준 | 필수 |
| 관련 화면 | `SCR-####` 형식의 화면 ID 목록 | 필수 |
| 관련 API | `API-####` 형식의 API ID 목록 | 선택 |
| 관련 NFR | `NFR-####` 형식의 비기능 요구사항 ID | 선택 |
| 소스(근거 문서) | 기능 정의의 근거가 된 문서/섹션 | 필수 |

### 4.2 DOCX 표 변환 친화 규칙

- 셀 내 줄바꿈 최소화(필요 시 별도 섹션으로 분리)
- 열 수 과다 방지(필요 시 표 분할 또는 부록 참조)
- 표 헤더는 간결하게(상세 설명은 본문 또는 주석)

---

## 5. 역할 및 구성요소(Actor/Component)

### 5.1 역할(Actor) 정의

| 역할 | 설명 | 주요 책임 |
|---|---|---|
| 딜러(Dealer) | 중고차 매매업을 하는 판매자 | 최소 입력, 검차 신청, 판매 방식 선택, 제안 수락, 인계 확인 |
| 바이어(Buyer) | 해외 중고차 구매자 | 차량 검색/조회, 입찰/제안, 즉시구매, 결제 |
| 플랫폼(Platform/System) | 시스템 자동 처리 | 딜러 인증, 평가사 배정, 마켓 노출/매칭, 계약/서류 생성, 잔금/송금/환전 확인, 탁송 조건 제어 |
| 평가사(Evaluator) | 검차 수행자 | 검차 수행(사진/영상/성능 점검), 결과 업로드 |
| 탁송 기사(Logistics) | 물류 담당 | 배차/탁송 수행, 인계(차키/서류) 확인 |
| 관리자(Admin) | 플랫폼 운영자 | 딜러/바이어 관리, 평가사 배정, 정산 승인, 시스템 모니터링 |

> 참조: `SSOT_딜러플랫폼_니즈.md` Section 5

### 5.2 구성요소(Component) 정의

| 컴포넌트 | 설명 | 범위 |
|---|---|---|
| 공통 컴포넌트 | 버튼, 입력창, 리스트, 모달/팝업, 상태값 표시(배지, 토스트 등) | 전체 화면 공통 |
| 딜러 전용 컴포넌트 | 차량 등록 폼, 검차 신청 폼, 판매 방식 선택 UI, 정산 내역 카드 | 딜러 화면 전용 |
| 바이어 전용 컴포넌트 | 경매 입찰 UI, 즉시구매 버튼, 최고가 표시 위젯 | 바이어 화면 전용 |

---

## 6. 인덱스/ID 규칙 + ID 레지스트리

### 6.1 ID 네이밍 규칙

| ID 타입 | 형식 | 예시 | 설명 |
|---|---|---|---|
| Flow | `FLOW-##` | `FLOW-01`, `FLOW-02` | 플로우 단계 식별자 |
| Screen | `SCR-####` | `SCR-0100`, `SCR-0200` | 화면 식별자(공통: 0000~0999, 딜러: 1000~2999, 바이어: 3000~4999) |
| Function | `FUNC-##` | `FUNC-05`, `FUNC-15` | 기능 식별자 |
| Entity | `ENT-##` | `ENT-01`, `ENT-02` | 데이터 엔터티 식별자 |
| API | `API-####` | `API-0100`, `API-0200` | API 엔드포인트 식별자 |
| Event | `EVT-####` | `EVT-0100` | 이벤트/상태 전이 식별자 |
| Decision | `D-###` 또는 `D-P1-###` | `D-001`, `D-P1-001` | 결정사항 식별자(Phase 1은 `D-P1-###`) |
| NFR | `NFR-####` | `NFR-0100` | 비기능 요구사항 식별자 |

### 6.2 ID 레지스트리(Phase 1 초안)

#### Flow Registry

| Flow ID | 플로우명 | 설명 | 담당자 | 상태 |
|---|---|---|---|---|
| FLOW-01 | 진입–회원가입 | 회원가입/인증 플로우 | 엄태영 | 확정 |
| FLOW-02 | 검차(검사) | 검차 신청/배정/수행 플로우 | 엄태영 | 확정 |
| FLOW-03 | 업로드 및 판매 | 차량 등록/판매 방식 선택/경매/일반 판매 | 황설휘 | 확정 |
| FLOW-04 | 탁송 | 탁송 예약/배차/인계 플로우 | 황설휘 | 확정 |
| FLOW-00 | 공통 | 로그인/로그아웃/마이페이지 등 공통 플로우 | - | 확정 |

#### Screen Registry(Phase 1 초안 - 일부만 예시)

| Screen ID | 화면명 | 역할 | Flow | 상태 |
|---|---|---|---|---|
| SCR-0001 | 로그인 | 공통 | FLOW-00 | 확정 |
| SCR-0002 | 회원가입(딜러) | 딜러 | FLOW-01 | 확정 |
| SCR-0100 | 딜러 대시보드 | 딜러 | FLOW-00 | 확정 |
| SCR-0200 | 차량 등록(등록원부 OCR) | 딜러 | FLOW-03 | 확정 |
| SCR-0300 | 차량 상세/판매 방식 선택 | 딜러 | FLOW-03 | 확정 |
| SCR-0400 | 경매 상세(최고가 공개/즉시구매) | 딜러 | FLOW-03 | 확정 |
| SCR-0500 | 바이어 경매 조회/입찰 | 바이어 | FLOW-03 | 확정 |
| SCR-0600 | 탁송 예약/배차 | 딜러 | FLOW-04 | 확정 |

> 주석: Screen Registry는 Phase 1 진행 중 계속 확장됨. 전체 목록은 부록에 별도 표로 관리.

#### Function Registry(Phase 1 초안 - 일부만 예시)

| Function ID | 기능명 | 설명 | 관련 화면 | 상태 |
|---|---|---|---|---|
| FUNC-01 | 딜러 회원가입 | 딜러 계정 생성 및 기본 정보 입력 | `SCR-0002` | 확정 |
| FUNC-02 | 사업자 인증 | 사업자등록증 OCR 및 진위 확인 | `SCR-0002` | 확정 |
| FUNC-05 | 차량 등록(등록원부 OCR) | 차량번호 입력 → 등록원부 OCR → 기본정보 자동 채움 | `SCR-0200` | 확정(D-P1-002) |
| FUNC-15 | 판매 방식 변경 | 일반 판매 → 경매 전환 | `SCR-0300` | 확정(D-P1-001) |
| FUNC-18 | 경매 입찰 | 바이어 입찰 및 최고가 업데이트 | `SCR-0500` | 확정(D-P1-003) |
| FUNC-19 | 즉시구매 | 경매 내 즉시구매 실행 | `SCR-0400`, `SCR-0500` | 확정(D-P1-003) |

> 주석: Function Registry는 Phase 1 진행 중 계속 확장됨. 전체 목록은 부록에 별도 표로 관리.

---

## 7. 기능 엔터티–화면 엔터티–메타데이터 체계

### 7.1 관계 규칙

- **FLOW → Screen**: 각 플로우는 여러 화면을 순서대로 포함
- **Screen → Function**: 각 화면은 여러 기능을 제공
- **Function → Entity/API/NFR**: 각 기능은 데이터 엔터티, API, 비기능 요구사항에 종속

### 7.2 매핑 테이블(Phase 1 초안 예시)

#### FLOW → Screen 매핑

| Flow ID | Screen ID | 순서 | 설명 |
|---|---|---|---|
| FLOW-01 | SCR-0002 | 1 | 회원가입 화면 |
| FLOW-01 | SCR-0003 | 2 | 사업자 인증 화면 |
| FLOW-03 | SCR-0200 | 1 | 차량 등록 화면 |
| FLOW-03 | SCR-0300 | 2 | 판매 방식 선택 화면 |
| FLOW-03 | SCR-0400 | 3 | 경매 상세 화면(딜러) |

#### Screen → Function 매핑

| Screen ID | Function ID | 설명 |
|---|---|---|
| SCR-0200 | FUNC-05 | 차량 등록(등록원부 OCR) |
| SCR-0300 | FUNC-15 | 판매 방식 변경 |
| SCR-0400 | FUNC-18 | 경매 입찰(최고가 공개) |
| SCR-0400 | FUNC-19 | 즉시구매 |

#### Function → Entity/API/NFR 매핑

| Function ID | Entity ID | API ID | NFR ID | 설명 |
|---|---|---|---|---|
| FUNC-05 | ENT-01(Vehicle) | API-0100(등록원부 OCR) | NFR-0100(OCR 성능) | 차량 등록 시 등록원부 OCR 연동 |
| FUNC-18 | ENT-02(Auction) | API-0200(입찰) | NFR-0200(동시성) | 경매 입찰 시 동시성 제어 필요 |

> 주석: 전체 매핑 테이블은 부록에 별도 표로 관리.

---

## 8. 정보구조(IA) 및 사이트맵

### 8.1 공통 영역 구조

- **헤더**: 로고 + GNB(메인 네비게이션) + 유저 메뉴(로그인/마이페이지)
- **GNB 구조(초안)**: 메인, 마이페이지, 알림, 설정
- **마이페이지 메뉴(초안)**: 프로필, 차량 관리, 거래 내역, 정산 내역, 탁송 관리

### 8.2 딜러 사이트맵

```
딜러 대시보드 (SCR-0100)
├── 차량 관리
│   ├── 차량 등록 (SCR-0200) [FLOW-03]
│   ├── 차량 목록 (SCR-0101)
│   └── 차량 상세/판매 방식 선택 (SCR-0300) [FLOW-03]
├── 판매 관리
│   ├── 경매 상세 (SCR-0400) [FLOW-03]
│   ├── 일반 판매 제안 목록 (SCR-0102)
│   └── 판매 내역 (SCR-0103)
├── 검차 관리
│   ├── 검차 신청 (SCR-0201) [FLOW-02]
│   └── 검차 결과 조회 (SCR-0202) [FLOW-02]
├── 탁송 관리
│   ├── 탁송 예약 (SCR-0600) [FLOW-04]
│   └── 탁송 내역 (SCR-0601) [FLOW-04]
└── 정산 관리
    ├── 정산 내역 (SCR-0104)
    └── 정산 상세 (SCR-0105)
```

### 8.3 바이어 사이트맵

```
바이어 대시보드 (SCR-3000)
├── 차량 검색/조회
│   ├── 경매 목록 (SCR-0500) [FLOW-03]
│   ├── 경매 상세/입찰 (SCR-0501) [FLOW-03]
│   └── 즉시구매 (SCR-0502) [FLOW-03]
├── 내 입찰/구매
│   ├── 입찰 내역 (SCR-3001)
│   └── 구매 내역 (SCR-3002)
└── 계약/결제
    ├── 계약서 확인 (SCR-3003)
    └── 결제 내역 (SCR-3004)
```

> 주석: 사이트맵은 Phase 1 진행 중 계속 확장됨. 전체 목록은 부록에 별도 표로 관리.

---

## 9. 사이트맵 기반 유저플로우

### 9.1 FLOW-01: 진입–회원가입

#### 태스크 플로우

```
[시작]
↓
[프로세스]: 로그인 화면 진입 (SCR-0001)
↓
[판단]: 계정 존재 여부 (Y/N)
├─ Y → [프로세스]: 로그인 처리 → [출력]: 딜러 대시보드 (SCR-0100)
└─ N → [프로세스]: 회원가입 화면 이동 (SCR-0002)
    ↓
    [입력]: 기본 정보(이름, 휴대폰, 이메일, 비밀번호)
    ↓
    [프로세스]: 사업자 인증 화면 이동 (SCR-0003)
    ↓
    [입력]: 사업자등록증 이미지 업로드
    ↓
    [프로세스]: OCR 처리 및 진위 확인 (FUNC-02)
    ↓
    [판단]: 인증 성공 여부 (Y/N)
    ├─ Y → [출력]: DEALER 등급 부여 → 딜러 대시보드 (SCR-0100)
    └─ N → [프로세스]: 재인증 요청 알림
↓
[끝]
```

#### 화면 전환 맵

| From Screen | To Screen | 트리거 | 조건 |
|---|---|---|---|
| SCR-0001 | SCR-0002 | "회원가입" 버튼 클릭 | 계정 없음 |
| SCR-0002 | SCR-0003 | "다음" 버튼 클릭 | 기본 정보 입력 완료 |
| SCR-0003 | SCR-0100 | 인증 성공 | FUNC-02 성공 |

### 9.2 FLOW-02: 검차(검사)

#### 태스크 플로우

```
[시작]
↓
[프로세스]: 검차 신청 화면 진입 (SCR-0201)
↓
[입력]: 검차 희망 일정(날짜/시간대) 선택
↓
[프로세스]: 검차 신청 처리 (FUNC-06)
↓
[출력]: Draft 상태 생성 또는 유지
↓
[프로세스]: 평가사 배정 (시스템 자동, FUNC-07)
↓
[출력]: Inspecting 상태로 전이
↓
[프로세스]: 평가사 검차 수행 (평가사 액션)
- 사진 촬영
- 영상 촬영
- 성능 점검
- 옵션 체크
↓
[프로세스]: 검차 결과 업로드 (평가사, FUNC-08)
↓
[판단]: 검차 통과 여부 (Y/N)
├─ Y → [출력]: 검차 완료, Active 상태로 전이 → 판매 가능 상태 전환
└─ N → [프로세스]: 재검차 신청 안내 또는 수정 요청
↓
[끝]
```

#### 화면 전환 맵

| From Screen | To Screen | 트리거 | 조건 |
|---|---|---|---|
| SCR-0200 | SCR-0201 | "검차 신청" 버튼 클릭 | 차량 기본정보 입력 완료 |
| SCR-0201 | SCR-0202 | 검차 완료 | FUNC-08 성공, 검차 통과 |
| SCR-0202 | SCR-0300 | "판매 방식 선택" 버튼 클릭 | 검차 완료, Active 상태 |

#### 상태 전이

| 이전 상태 | 다음 상태 | 트리거 이벤트 | 주체 |
|---|---|---|---|
| Draft | Inspecting | 검차 신청 완료 | 딜러 |
| Inspecting | Active | 검차 완료(통과) | 평가사 |
| Inspecting | Draft | 검차 실패/재검차 필요 | 평가사 |

> 주석: 검차 결과는 딜러가 수정할 수 없음(SSOT Section 3.2 금지 규칙). 검차 비용은 딜러 부담.

### 9.3 FLOW-03: 업로드 및 판매 (등록원부 OCR + 경매/즉시구매)

#### 태스크 플로우

```
[시작]
↓
[프로세스]: 차량 등록 화면 진입 (SCR-0200)
↓
[입력]: 차량번호 입력
↓
[프로세스]: 등록원부 OCR 호출 (FUNC-05, API-0100)
↓
[출력]: 차량 기본정보 자동 채움(VIN, 제조사, 모델, 연식, 주행거리 등)
↓
[입력]: 검차 희망 일정 선택 (FLOW-02로 이어짐)
↓
[프로세스]: 검차 완료 후 판매 방식 선택 화면 (SCR-0300)
↓
[판단]: 판매 방식 선택 (일반/경매)
├─ 일반 → [프로세스]: 일반 판매 제안 대기 (SCR-0102)
│   ↓
│   [프로세스]: 바이어 제안 수락 (딜러, FUNC-16)
│   ↓
│   [프로세스]: 바이어 최종 구매 의사 재확인 (바이어, FUNC-17)
│   ↓
│   [출력]: 계약 생성 → Locked 상태로 전이
└─ 경매 → [프로세스]: 경매 생성 (SCR-0400)
    ↓
    [입력]: 경매 시작가, 즉시구매가 설정
    ↓
    [출력]: 경매 상세 화면(최고가 공개, 즉시구매 버튼 포함)
    ↓
    [프로세스]: 바이어 경매 조회/입찰 (SCR-0500)
    ↓
    [판단]: 입찰 또는 즉시구매 (입찰/즉시구매)
    ├─ 입찰 → [프로세스]: 경매 입찰 처리 (FUNC-18, API-0200)
    │   ↓
    │   [출력]: 최고가 업데이트 및 공개 (실시간)
    └─ 즉시구매 → [프로세스]: 즉시구매 처리 (FUNC-19, API-0201)
        ↓
        [출력]: 경매 종료, 계약 생성 → Locked 상태로 전이
    ↓
    [판단]: 일반 판매로 전환 여부 (Y/N) [D-P1-001]
    ├─ Y → [프로세스]: 판매 방식 변경 (FUNC-15) → 일반 판매로 전환
    └─ N → [프로세스]: 경매 진행 대기 또는 종료
↓
[끝]
```

#### 화면 전환 맵

| From Screen | To Screen | 트리거 | 조건 |
|---|---|---|---|
| SCR-0100 | SCR-0200 | "차량 등록" 버튼 클릭 | 딜러 인증 완료 |
| SCR-0200 | SCR-0201 | "검차 신청" 버튼 클릭 | 등록원부 OCR 완료, FUNC-05 성공 |
| SCR-0202 | SCR-0300 | "판매 방식 선택" 버튼 클릭 | 검차 완료, Active 상태 |
| SCR-0300 | SCR-0400 | "경매 방식" 선택 | 판매 방식 = 경매 |
| SCR-0300 | SCR-0102 | "일반 판매" 선택 | 판매 방식 = 일반 |
| SCR-0400 | SCR-0500 | 경매 생성 완료 | 바이어 경매 조회 가능 |
| SCR-0400 | SCR-0300 | "일반 판매로 전환" 버튼 클릭 | FUNC-15 실행 |
| SCR-0500 | SCR-0500 | "입찰" 버튼 클릭 | FUNC-18 실행, 최고가 업데이트(같은 화면 갱신) |
| SCR-0500 | SCR-3003 | "즉시구매" 버튼 클릭 | FUNC-19 실행, 계약 생성 |

#### 상태 전이

| 이전 상태 | 다음 상태 | 트리거 이벤트 | 주체 |
|---|---|---|---|
| Active | Bidding | 판매 방식 선택 완료, 마켓 노출 | 딜러/시스템 |
| Bidding | Locked | 제안 수락(일반) 또는 낙찰/즉시구매(경매) | 딜러/바이어 |

> 주석: 등록원부 OCR은 결정 D-P1-002에 따라 차량번호만 입력하면 자동 처리. 경매 최고가 공개 및 즉시구매는 결정 D-P1-003에 따라 구현.

### 9.4 FLOW-04: 탁송

#### 태스크 플로우

```
[시작]
↓
[판단]: 금전 절차 완료 여부 (Y/N)
├─ N → [프로세스]: 금전 절차 완료 대기 알림 → Settlement 상태 확인
└─ Y → [프로세스]: 탁송 신청 화면 진입 (SCR-0600)
    ↓
    [입력]: 탁송 희망 날짜/시간 선택 (시간 슬롯 선택)
    ↓
    [프로세스]: 탁송 일정 조율 (FUNC-20)
    ↓
    [프로세스]: 배차 조율 및 확정 (시스템/물류, FUNC-21)
    ↓
    [출력]: 배차 확정 알림 (리마인드 포함)
    ↓
    [프로세스]: 탁송/인계 수행 (탁송 기사)
    - 차량 상태 동일 확인서 제출
    - 차키 인계
    - 서류 인계
    ↓
    [입력]: 인계 승인 (딜러, 6자리 PIN 입력, FUNC-22)
    ↓
    [출력]: 인계 완료 확인, 책임 이관 타임스탬프 기록
    ↓
    [프로세스]: 정산 완료 알림 (FUNC-23)
    ↓
    [출력]: Sold 상태로 전이, 거래 종료
↓
[끝]
```

#### 화면 전환 맵

| From Screen | To Screen | 트리거 | 조건 |
|---|---|---|---|
| SCR-0105 | SCR-0600 | "탁송 신청" 버튼 클릭 | Settlement 상태(금전 절차 완료) |
| SCR-0600 | SCR-0601 | 배차 확정 | FUNC-21 성공 |
| SCR-0601 | SCR-0105 | 인계 승인 완료 | FUNC-22 성공, PIN 입력 |

#### 상태 전이

| 이전 상태 | 다음 상태 | 트리거 이벤트 | 주체 |
|---|---|---|---|
| Settlement | Sold | 인계 승인 완료 | 딜러 |

#### 예외 처리

| 예외 상황 | 대응 정책 | 화면/알림 |
|---|---|---|
| 약속 시간 차량 준비 불가 | 재방문 일정 조율 또는 위약금 부과 | SCR-0600 알림 |
| 키/서류 미준비 | 재방문 일정 조율 또는 위약금 부과 | SCR-0600 알림 |
| 연락 두절 | 재연락 시도 또는 일정 취소 | SCR-0600 알림 |
| 주소 오류 | 주소 수정 후 재배차 | SCR-0600 알림 |

> 주석: 탁송 신청은 모든 금전 절차 완료 후에만 가능(SSOT Section 7.5). 인계 확인서/차키/서류 인계로 책임 종료.

### 9.5 FLOW-00: 공통 플로우

#### 로그인/로그아웃

```
[시작]
↓
[프로세스]: 로그인 화면 진입 (SCR-0001)
↓
[입력]: 이메일/휴대폰, 비밀번호 입력
↓
[프로세스]: 로그인 처리 (FUNC-00)
↓
[판단]: 로그인 성공 여부 (Y/N)
├─ Y → [출력]: 역할별 대시보드 이동 (딜러: SCR-0100, 바이어: SCR-3000)
└─ N → [프로세스]: 오류 메시지 표시
↓
[끝]
```

#### 마이페이지

```
[시작]
↓
[프로세스]: 마이페이지 진입 (GNB 클릭)
↓
[판단]: 역할 (딜러/바이어)
├─ 딜러 → [출력]: 딜러 마이페이지 (프로필, 차량 관리, 거래 내역, 정산 내역, 탁송 관리)
└─ 바이어 → [출력]: 바이어 마이페이지 (프로필, 입찰 내역, 구매 내역, 계약/결제)
↓
[끝]
```

> 주석: 공통 플로우는 모든 역할에 공통 적용. 전체 유저플로우는 부록에 별도 표로 관리.

---

## 10. FRD: 세부 기능 명세

### 10.1 FUNC-05: 차량 등록(등록원부 OCR 기반 자동 채움)

| 필드명 | 내용 |
|---|---|
| FUNC-ID | FUNC-05 |
| 기능명 | 차량 등록(등록원부 OCR 기반 자동 채움) |
| 정의 | 차량번호만 입력하면 등록원부 OCR을 통해 차량 기본정보를 자동으로 채우는 기능 |
| 목표 | 딜러 입력 부담 최소화, 정보 정확도 향상, 허위 매물 차단 |
| 트리거 | 딜러가 차량 등록 화면(SCR-0200)에서 차량번호 입력 후 "등록원부 조회" 버튼 클릭 |
| 선행조건 | 딜러 인증 완료(DEALER 등급), 차량번호 유효성 검증 통과 |
| 주요 플로우 | 1. 차량번호 입력 → 2. 등록원부 OCR API 호출(API-0100) → 3. OCR 결과 파싱 → 4. 차량 기본정보 자동 채움(VIN, 제조사, 모델, 연식, 주행거리 등) → 5. 딜러 확인/수정 가능 → 6. 검차 희망 일정 선택 → 7. 검차 신청 |
| 예외/오류 | OCR 실패 시 수동 입력 옵션 제공, 등록원부 미조회 시 알림 및 재시도 버튼 |
| 출력 | 차량 기본정보 자동 채움 완료, 검차 신청 가능 상태 |
| 달성기준(AC) | 차량번호 입력 후 3초 이내 등록원부 OCR 완료, 자동 채움 정확도 95% 이상 |
| 관련 화면 | SCR-0200 |
| 관련 API | API-0100(등록원부 OCR) |
| 관련 NFR | NFR-0100(OCR 성능), NFR-0201(외부 API 장애 대응) |
| 소스(근거 문서) | 결정 D-P1-002, `SSOT_딜러플랫폼_니즈.md` Section 7.2 |

### 10.2 FUNC-15: 판매 방식 변경(일반 → 경매)

| 필드명 | 내용 |
|---|---|
| FUNC-ID | FUNC-15 |
| 기능명 | 판매 방식 변경(일반 → 경매) |
| 정의 | 일반 판매로 등록된 차량을 경매 방식으로 변경하는 기능 |
| 목표 | 딜러 판매 전략 유연성 제공, 빠른 회전 유도 |
| 트리거 | 딜러가 차량 상세 화면(SCR-0300)에서 "경매로 전환" 버튼 클릭 |
| 선행조건 | 차량 상태 = Active(판매 가능), 일반 판매 상태, 아직 계약 없음 |
| 주요 플로우 | 1. 판매 방식 변경 요청 → 2. 변경 확인 모달 표시 → 3. 경매 설정(시작가, 즉시구매가) 입력 → 4. 변경 확정 → 5. 상태 전이(일반 → 경매) → 6. 경매 상세 화면(SCR-0400)으로 이동 |
| 예외/오류 | 이미 계약 진행 중이면 변경 불가 알림, 경매 설정 미입력 시 검증 오류 |
| 출력 | 판매 방식 변경 완료, 경매 상세 화면 표시 |
| 달성기준(AC) | 변경 요청 후 5초 이내 경매 상세 화면 표시, 상태 전이 정확도 100% |
| 관련 화면 | SCR-0300, SCR-0400 |
| 관련 API | API-0300(판매 방식 변경) |
| 관련 NFR | NFR-0200(동시성) |
| 소스(근거 문서) | 결정 D-P1-001, `SSOT_딜러플랫폼_니즈.md` Section 7.4 |

### 10.3 FUNC-18: 경매 입찰(최고가 공개)

| 필드명 | 내용 |
|---|---|
| FUNC-ID | FUNC-18 |
| 기능명 | 경매 입찰(최고가 공개) |
| 정의 | 바이어가 경매에 입찰하고, 최고 입찰가를 실시간으로 공개하는 기능 |
| 목표 | 가격 투명성 확보, 입찰 참여 의지 향상 |
| 트리거 | 바이어가 경매 상세 화면(SCR-0500)에서 입찰가 입력 후 "입찰" 버튼 클릭 |
| 선행조건 | 바이어 인증 완료, 경매 진행 중, 입찰가 > 현재 최고가 |
| 주요 플로우 | 1. 입찰가 입력 → 2. 입찰 확인 모달 → 3. 입찰 처리(API-0200) → 4. 최고가 업데이트 → 5. 최고가 공개(모든 사용자에게 표시) → 6. 입찰 성공 알림 |
| 예외/오류 | 입찰가 <= 현재 최고가 시 오류, 동시 입찰 시 낙관적 락 처리 |
| 출력 | 입찰 성공, 최고가 업데이트, 경매 상세 화면 갱신 |
| 달성기준(AC) | 입찰 처리 시간 1초 이내, 최고가 공개 지연 500ms 이내, 동시 입찰 정확도 100% |
| 관련 화면 | SCR-0500 |
| 관련 API | API-0200(입찰) |
| 관련 NFR | NFR-0200(동시성), NFR-0101(실시간 업데이트 성능) |
| 소스(근거 문서) | 결정 D-P1-003, `SSOT_딜러플랫폼_니즈.md` Section 7.4 |

### 10.4 FUNC-19: 즉시구매

| 필드명 | 내용 |
|---|---|
| FUNC-ID | FUNC-19 |
| 기능명 | 즉시구매 |
| 정의 | 경매 내에서 즉시구매가로 바로 구매하는 기능 |
| 목표 | 빠른 거래 성사, 유찰 리스크 감소 |
| 트리거 | 바이어가 경매 상세 화면(SCR-0500)에서 "즉시구매" 버튼 클릭 |
| 선행조건 | 바이어 인증 완료, 경매 진행 중, 즉시구매가 설정됨 |
| 주요 플로우 | 1. 즉시구매 확인 모달 → 2. 즉시구매 처리(API-0201) → 3. 경매 종료 처리 → 4. 계약 생성 → 5. 결제 화면으로 이동 |
| 예외/오류 | 동시 즉시구매 시 첫 번째 요청만 성공(원자성 보장), 즉시구매가 미설정 시 버튼 비활성화 |
| 출력 | 즉시구매 성공, 경매 종료, 계약 생성 완료 |
| 달성기준(AC) | 즉시구매 처리 시간 2초 이내, 동시 요청 처리 정확도 100% |
| 관련 화면 | SCR-0500 |
| 관련 API | API-0201(즉시구매) |
| 관련 NFR | NFR-0200(동시성), NFR-0202(원자성) |
| 소스(근거 문서) | 결정 D-P1-003, `SSOT_딜러플랫폼_니즈.md` Section 7.4 |

> 주석: Phase 1 필수 기능만 우선 명세. 전체 기능 목록은 부록에 별도 표로 관리.

---

## 11. NFR: 비기능 요구사항

### 11.1 NFR-0100: OCR 성능

| 필드명 | 내용 |
|---|---|
| NFR-ID | NFR-0100 |
| 요구사항명 | OCR 성능 |
| 정의 | 등록원부 OCR 처리 시간 및 정확도 요구사항 |
| 목표 | 딜러 대기 시간 최소화, 정보 정확도 보장 |
| 조건 | 등록원부 OCR API 호출 시 |
| 달성기준 | OCR 처리 시간 3초 이내, 텍스트 추출 정확도 95% 이상 |
| 관련 기능 | FUNC-05 |
| 관련 화면 | SCR-0200 |
| 소스(근거 문서) | 결정 D-P1-002, `통합설계명세서_1.md` Section 9.2 |

### 11.2 NFR-0200: 동시성 제어

| 필드명 | 내용 |
|---|---|
| NFR-ID | NFR-0200 |
| 요구사항명 | 동시성 제어 |
| 정의 | 경매 입찰 및 즉시구매 시 동시 요청 처리 정확도 |
| 목표 | 중복 낙찰 방지, 데이터 무결성 보장 |
| 조건 | 경매 입찰(FUNC-18), 즉시구매(FUNC-19) 실행 시 |
| 달성기준 | 동시 입찰/즉시구매 처리 정확도 100%, 낙관적 락 또는 원자적 트랜잭션 적용 |
| 관련 기능 | FUNC-18, FUNC-19 |
| 관련 화면 | SCR-0500 |
| 소스(근거 문서) | 결정 D-P1-003, `통합설계명세서_1.md` Section 9.2 |

### 11.3 NFR-0101: 실시간 업데이트 성능

| 필드명 | 내용 |
|---|---|
| NFR-ID | NFR-0101 |
| 요구사항명 | 실시간 업데이트 성능 |
| 정의 | 경매 최고가 공개 시 실시간 업데이트 지연 시간 |
| 목표 | 가격 투명성 실시간 반영 |
| 조건 | 경매 입찰 시 최고가 업데이트 |
| 달성기준 | 최고가 공개 지연 500ms 이내, WebSocket 또는 Server-Sent Events 사용 |
| 관련 기능 | FUNC-18 |
| 관련 화면 | SCR-0500 |
| 소스(근거 문서) | 결정 D-P1-003 |

### 11.4 NFR-0201: 외부 API 장애 대응

| 필드명 | 내용 |
|---|---|
| NFR-ID | NFR-0201 |
| 요구사항명 | 외부 API 장애 대응 |
| 정의 | 등록원부 OCR 등 외부 API 장애 시 대체 경로 및 사용자 안내 |
| 목표 | 서비스 중단 최소화, 사용자 경험 유지 |
| 조건 | 외부 API 호출 실패 시 |
| 달성기준 | 장애 발생 시 수동 입력 옵션 제공, 재시도 버튼 제공, 사용자 알림 3초 이내 |
| 관련 기능 | FUNC-05 |
| 관련 화면 | SCR-0200 |
| 소스(근거 문서) | 결정 D-P1-002, `통합설계명세서_1.md` Section 16.2(D-010) |

### 11.5 NFR-0202: 원자성 보장

| 필드명 | 내용 |
|---|---|
| NFR-ID | NFR-0202 |
| 요구사항명 | 원자성 보장 |
| 정의 | 즉시구매 시 동시 요청 중 첫 번째 요청만 성공하도록 보장 |
| 목표 | 중복 구매 방지, 데이터 무결성 보장 |
| 조건 | 즉시구매(FUNC-19) 실행 시 |
| 달성기준 | 동시 즉시구매 요청 처리 시 첫 번째 요청만 성공, 나머지는 "이미 구매됨" 오류 반환 |
| 관련 기능 | FUNC-19 |
| 관련 화면 | SCR-0500 |
| 소스(근거 문서) | 결정 D-P1-003 |

> 주석: Phase 1 필수 NFR만 우선 명세. 전체 NFR 목록은 부록에 별도 표로 관리.

---

## 12. TSD: 기술 설계

### 12.1 아키텍처 개요

#### 모듈 구조(Phase 1 수준)

| 모듈 | 설명 | 주요 책임 |
|---|---|---|
| Auth Module | 인증/인가 | 딜러/바이어 인증, RBAC 권한 관리 |
| Vehicle Module | 차량 관리 | 차량 등록, 상태 관리, 등록원부 OCR 연동 |
| Auction Module | 경매 시스템 | 경매 생성/입찰/즉시구매, 최고가 관리 |
| Trade Module | 거래 관리 | 계약 생성, 정산, 탁송 연동 |
| Notification Module | 알림 | 실시간 알림(경매 최고가 업데이트 등) |

### 12.2 데이터 스키마 개요(Phase 1 핵심 엔터티만)

#### ENT-01: Vehicle(차량)

| 필드명 | 타입 | 제약조건 | 설명 |
|---|---|---|---|
| id | BIGINT | PK, AUTO_INCREMENT | 차량 고유 ID |
| owner_id | BIGINT | FK → Member.id, NOT NULL | 딜러 ID |
| vin | VARCHAR(20) | UNIQUE, NOT NULL | 차대번호(VIN) |
| car_no | VARCHAR(20) | NOT NULL | 차량번호 |
| status | ENUM | NOT NULL, DEFAULT 'Draft' | 차량 상태(Onboarded/Draft/Inspecting/Active/Bidding/Locked/Settlement/Sold) |
| created_at | TIMESTAMP | NOT NULL, DEFAULT CURRENT_TIMESTAMP | 생성 시간 |

> 참조: `통합설계명세서_1.md` Section 14 (상세 스키마)

#### ENT-02: Auction(경매)

| 필드명 | 타입 | 제약조건 | 설명 |
|---|---|---|---|
| id | BIGINT | PK, AUTO_INCREMENT | 경매 고유 ID |
| vehicle_id | BIGINT | FK → Vehicle.id, NOT NULL, UNIQUE | 차량 ID |
| start_price | DECIMAL(15,2) | NOT NULL | 시작가 |
| buy_now_price | DECIMAL(15,2) | NULL | 즉시구매가 |
| current_highest_bid | DECIMAL(15,2) | NULL | 현재 최고 입찰가 |
| status | ENUM | NOT NULL, DEFAULT 'Active' | 경매 상태(Active/Ended/Sold) |
| created_at | TIMESTAMP | NOT NULL, DEFAULT CURRENT_TIMESTAMP | 생성 시간 |

### 12.3 인덱스 설계(Phase 1 핵심만)

| 엔터티 | 인덱스명 | 컬럼 | 타입 | 설명 |
|---|---|---|---|---|
| Vehicle | idx_vehicle_owner_id | owner_id | INDEX | 딜러별 차량 조회 |
| Vehicle | idx_vehicle_status | status | INDEX | 상태별 차량 조회 |
| Vehicle | idx_vehicle_vin | vin | UNIQUE | VIN 중복 방지 |
| Auction | idx_auction_vehicle_id | vehicle_id | UNIQUE | 차량별 경매 조회 |
| Auction | idx_auction_status | status | INDEX | 상태별 경매 조회 |

### 12.4 API 개요(Phase 1 핵심만)

#### API-0100: 등록원부 OCR

| 항목 | 내용 |
|---|---|
| API-ID | API-0100 |
| 엔드포인트 | `POST /api/v1/vehicle/ocr-registration` |
| 설명 | 차량번호를 입력받아 등록원부 OCR을 수행하고 차량 기본정보를 반환 |
| 요청 파라미터 | `car_no` (차량번호, 필수) |
| 응답 데이터 | `vin`, `manufacturer`, `model`, `year`, `mileage` 등 |
| 관련 기능 | FUNC-05 |
| 관련 NFR | NFR-0100, NFR-0201 |

#### API-0200: 경매 입찰

| 항목 | 내용 |
|---|---|
| API-ID | API-0200 |
| 엔드포인트 | `POST /api/v1/auction/{auction_id}/bid` |
| 설명 | 경매에 입찰하고 최고가를 업데이트 |
| 요청 파라미터 | `auction_id` (경매 ID, Path), `bid_amount` (입찰가, 필수) |
| 응답 데이터 | `success`, `current_highest_bid`, `message` |
| 관련 기능 | FUNC-18 |
| 관련 NFR | NFR-0200, NFR-0101 |

#### API-0201: 즉시구매

| 항목 | 내용 |
|---|---|
| API-ID | API-0201 |
| 엔드포인트 | `POST /api/v1/auction/{auction_id}/buy-now` |
| 설명 | 경매 내 즉시구매 실행 |
| 요청 파라미터 | `auction_id` (경매 ID, Path) |
| 응답 데이터 | `success`, `contract_id`, `message` |
| 관련 기능 | FUNC-19 |
| 관련 NFR | NFR-0200, NFR-0202 |

> 주석: Phase 1 필수 API만 우선 명세. 전체 API 목록은 부록에 별도 표로 관리.

---

## 13. SRD: 서비스 요구

### 13.1 외부 연동 목록

| 연동 ID | 서비스명 | 용도 | 벤더/스펙 | 상태 | 리스크 |
|---|---|---|---|---|---|
| SRD-001 | 등록원부 OCR | 차량번호 → 등록원부 정보 추출 | 미정(자동차민원 API 또는 상용 OCR 서비스) | 결정 필요 | 서비스 장애, 정책 변경 |
| SRD-002 | 사고이력 조회 | 차량 사고 이력 조회 | 미정 | 결정 필요 | API 의존도 |
| SRD-003 | 저당/압류 조회 | 차량 저당권/압류 여부 조회 | 미정 | 결정 필요 | API 의존도 |
| SRD-004 | 환율 API | 환율 정보 조회 | 미정(Google Exchange API 등) | 결정 필요 | 실시간성 |
| SRD-005 | 알림 서비스 | SMS/알림톡 발송 | 미정(Aligo 등) | 결정 필요 | 발송 실패 |
| SRD-006 | 결제(PG) | 바이어 결제 처리 | 미정(Toss/Nice 등) | 결정 필요 | 결제 실패, 환불 처리 |

### 13.2 재시도/백오프/폴백 정책(표준)

| 정책 ID | 서비스 | 재시도 횟수 | 재시도 간격 | 백오프 전략 | 폴백 경로 |
|---|---|---|---|---|---|
| SRD-POL-001 | 등록원부 OCR | 3회 | 1초, 2초, 5초 | Exponential Backoff | 수동 입력 옵션 제공 |
| SRD-POL-002 | 경매 입찰 | 1회 | 즉시 | - | 오류 메시지 표시 |
| SRD-POL-003 | 즉시구매 | 1회 | 즉시 | - | 오류 메시지 표시 |
| SRD-POL-004 | 알림 발송 | 3회 | 1분, 5분, 30분 | Exponential Backoff | 알림 실패 로그 기록 |

### 13.3 장애 대응 정책

| 장애 유형 | 대응 정책 | 사용자 안내 | 모니터링 |
|---|---|---|---|
| 외부 API 장애 | 재시도 → 폴백 경로 제공 | 3초 이내 오류 메시지 표시 | API 응답 시간/에러율 모니터링 |
| 동시성 충돌 | 낙관적 락 또는 원자적 트랜잭션 | "다른 사용자가 먼저 처리했습니다" 메시지 | 충돌 발생률 모니터링 |
| 데이터베이스 장애 | 읽기 전용 모드 전환 또는 서비스 제한 | "일시적 장애" 메시지 | DB 연결 상태 모니터링 |

> 참조: `통합설계명세서_1.md` Section 16.2(D-010)

---

## 14. 부록

### 14.1 용어집

| 용어 | 설명 |
|---|---|
| 검차 | 차량 상태를 '증거'로 만들기 위한 평가사 수행 점검. '검사'는 동의어로만 취급 |
| 등록원부 OCR | 자동차 등록원부 이미지를 OCR로 처리하여 차량 기본정보를 자동 추출하는 기능 |
| 최고가 공개 | 경매 진행 중 현재 최고 입찰가를 모든 사용자에게 실시간으로 공개하는 정책 |
| 즉시구매 | 경매 내에서 즉시구매가로 바로 구매하는 기능 |
| 판매 방식 변경 | 일반 판매로 등록된 차량을 경매 방식으로 변경하는 기능 |

> 참조: `SSOT_딜러플랫폼_니즈.md` 부록 B

### 14.2 기능↔화면 100% 매핑 리스트(Phase 1)

| Function ID | 기능명 | Screen ID | 화면명 | Figma FrameName 규칙 | 상태 | 비고 |
|---|---|---|---|---|---|---|
| FUNC-00 | 로그인 | SCR-0001 | 로그인 | `Common_Login` | 확정 | 공통 |
| FUNC-01 | 딜러 회원가입 | SCR-0002 | 회원가입(딜러) | `Dealer_Signup` | 확정 | FLOW-01 |
| FUNC-02 | 사업자 인증 | SCR-0003 | 사업자 인증 | `Dealer_Business_Verification` | 확정 | FLOW-01 |
| FUNC-05 | 차량 등록(등록원부 OCR) | SCR-0200 | 차량 등록 화면 | `Dealer_Vehicle_Register_OCR` | 확정 | FLOW-03, D-P1-002 |
| FUNC-06 | 검차 신청 | SCR-0201 | 검차 신청 | `Dealer_Inspection_Request` | 확정 | FLOW-02 |
| FUNC-07 | 평가사 배정 | - | 시스템 자동 | - | 확정 | FLOW-02, 백엔드 |
| FUNC-08 | 검차 결과 업로드 | SCR-0202 | 검차 결과 조회 | `Dealer_Inspection_Result` | 확정 | FLOW-02, 평가사 액션 |
| FUNC-15 | 판매 방식 변경 | SCR-0300 | 차량 상세/판매 방식 선택 | `Dealer_Vehicle_Detail_SaleMethod` | 확정 | FLOW-03, D-P1-001 |
| FUNC-16 | 일반 판매 제안 수락 | SCR-0102 | 일반 판매 제안 목록 | `Dealer_NormalSale_OfferList` | 확정 | FLOW-03 |
| FUNC-17 | 바이어 최종 구매 의사 재확인 | SCR-3003 | 계약서 확인 | `Buyer_Contract_Confirm` | 확정 | FLOW-03, 바이어 액션 |
| FUNC-18 | 경매 입찰(최고가 공개) | SCR-0500 | 바이어 경매 조회/입찰 | `Buyer_Auction_Detail_Bid` | 확정 | FLOW-03, D-P1-003 |
| FUNC-19 | 즉시구매 | SCR-0400, SCR-0500 | 경매 상세(딜러/바이어) | `Dealer_Auction_Detail`, `Buyer_Auction_Detail` | 확정 | FLOW-03, D-P1-003 |
| FUNC-20 | 탁송 일정 조율 | SCR-0600 | 탁송 예약/배차 | `Dealer_Logistics_Schedule` | 확정 | FLOW-04 |
| FUNC-21 | 배차 조율 및 확정 | SCR-0600, SCR-0601 | 탁송 예약/배차, 탁송 내역 | `Dealer_Logistics_Schedule`, `Dealer_Logistics_History` | 확정 | FLOW-04, 시스템/물류 |
| FUNC-22 | 인계 승인 | SCR-0601 | 탁송 내역 | `Dealer_Logistics_Handover` | 확정 | FLOW-04 |
| FUNC-23 | 정산 완료 알림 | SCR-0105 | 정산 상세 | `Dealer_Settlement_Detail` | 확정 | FLOW-04, 시스템 자동 |

> 주석: Phase 1 진행 중 계속 확장됨. 전체 매핑 리스트는 별도 파일로 관리 권장. Figma FrameName 규칙은 기능명 기반으로 통일.

### 14.2.1 누락 기능(다음 단계 처리 예정)

| Function ID | 기능명 | 설명 | Phase | 비고 |
|---|---|---|---|---|
| FUNC-XX | 바이어 회원가입 | 바이어 계정 생성 및 인증 | Phase 2 | 바이어 플로우 확장 |
| FUNC-XX | 알림 설정 | 알림 수신 설정 및 관리 | Phase 2 | 공통 기능 |
| FUNC-XX | 정산 상세 조회 | 정산 내역 상세 조회 및 다운로드 | Phase 1 후반 | 우선순위 낮음 |
| FUNC-XX | 차량 상태 변경 | 차량 판매 중/판매 완료 상태 변경 | Phase 1 후반 | 우선순위 낮음 |

> 주석: Phase 1 범위 밖 기능은 "다음 단계" 리스트로 분리하여 관리.

### 14.3 결정로그(Phase 1)

| 결정 ID | 결정 내용 | 영향 범위 | 근거 | 오너 | 결정일 | 상태 |
|---|---|---|---|---|---|---|
| D-P1-001 | 일반 판매 → 경매 전환 가능 | SCR-0300, FUNC-15 | 12/23 회의 | 기획팀 | 2025-12-23 | 확정 |
| D-P1-002 | 등록원부 OCR 기반 차량정보 자동 채움 | SCR-0200, FUNC-05, SRD-001 | 12/23 회의, 시장 사례 | 기획팀 | 2025-12-23 | 확정 |
| D-P1-003 | 경매 최고가 공개 + 즉시구매 포함 | SCR-0400, SCR-0500, FUNC-18, FUNC-19 | 12/23 회의, 경쟁사 동향 | 기획팀 | 2025-12-23 | 확정(정책 세부는 오픈) |

### 14.4 갭 로그(Phase 1 오픈 이슈)

| 갭 ID | 항목 | 설명 | 우선순위 | 결정 필요일 |
|---|---|---|---|---|
| GAP-P1-001 | 등록원부 OCR 벤더 선택 | 자동차민원 API vs 상용 OCR 서비스 결정 필요 | High | 2025-12-25 |
| GAP-P1-002 | 최고가 공개 시점 | 실시간 vs 특정 시점 결정 필요 | Medium | 2025-12-27 |
| GAP-P1-003 | 즉시구매 가격 설정 규칙 | 최소 시작가 대비 비율 결정 필요 | Medium | 2025-12-27 |
| GAP-P1-004 | 판매 방식 변경 조건 | 변경 가능 시점/상태, 재검사 필요 여부 결정 필요 | Medium | 2025-12-27 |

---

## 15. 문서 메타데이터 및 검증 상태

### 15.1 문서 정보

| 항목 | 내용 |
|---|---|
| 문서 버전 | v1.0 (Frozen) |
| 최종 업데이트 | 2025-12-23 |
| 다음 검토일 | 2025-12-31 (Phase 1 마일스톤) |
| 검증 상태 | 완료(Phase 1 기준) |
| 검증 기준 | 기능명세-와이어프레임 100% 매핑 리스트 생성 완료, 누락 기능 "다음 단계" 분리 완료 |

### 15.2 Phase 1 완료 체크리스트

| 항목 | 상태 | 비고 |
|---|---|---|
| 결정로그(12/23) 반영 | 완료 | D-P1-001, D-P1-002, D-P1-003 확정 |
| 플로우차트 규칙 표준화 | 완료 | 통합설계명세서 표준 채택 |
| 기능 명세 규칙(FRD 템플릿) | 완료 | 표 형식 템플릿 확정 |
| ID 레지스트리 구축 | 완료 | Flow/Screen/Func/Entity/API/Event/Decision/NFR |
| 기능-화면-메타데이터 체계 | 완료 | 매핑 테이블 구성 완료 |
| IA 및 사이트맵 | 완료 | 딜러/바이어/공통 분리 완료 |
| 유저플로우(FLOW-00~04) | 완료 | 태스크 플로우/화면 전환 맵/상태 전이 명세 완료 |
| FRD 작성(Phase 1 필수) | 완료 | FUNC-05, FUNC-15, FUNC-18, FUNC-19 등 우선순위 기능 명세 완료 |
| NFR 작성 | 완료 | OCR 성능, 동시성, 실시간 업데이트, 외부 API 장애 대응, 원자성 보장 |
| TSD 작성(Phase 1 수준) | 완료 | 모듈 구조, 데이터 스키마 개요, 인덱스, API 개요 |
| SRD 작성 | 완료 | 외부 연동 목록, 재시도/백오프/폴백 정책, 장애 대응 정책 |
| 기능-화면 100% 매핑 리스트 | 완료 | Phase 1 필수 기능 매핑 완료, 누락 기능 "다음 단계" 분리 완료 |

### 15.3 Phase 1 오픈 이슈(결정 필요)

| 이슈 ID | 항목 | 설명 | 우선순위 | 결정 필요일 |
|---|---|---|---|---|
| GAP-P1-001 | 등록원부 OCR 벤더 선택 | 자동차민원 API vs 상용 OCR 서비스 결정 필요 | High | 2025-12-25 |
| GAP-P1-002 | 최고가 공개 시점 | 실시간 vs 특정 시점 결정 필요 | Medium | 2025-12-27 |
| GAP-P1-003 | 즉시구매 가격 설정 규칙 | 최소 시작가 대비 비율 결정 필요 | Medium | 2025-12-27 |
| GAP-P1-004 | 판매 방식 변경 조건 | 변경 가능 시점/상태, 재검사 필요 여부 결정 필요 | Medium | 2025-12-27 |

### 15.4 다음 단계(Phase 2 이후)

- 바이어 회원가입 플로우 확장
- 알림 설정 및 관리 기능
- 정산 상세 조회 기능 확장
- 차량 상태 변경 기능(판매 중/판매 완료)
- 추가 NFR(보안/RBAC 상세, 감사로그 상세 등)
- API 상세 명세 확장
- 데이터 스키마 상세 확장

---

**문서 버전**: v1.0 (Frozen)  
**최종 업데이트**: 2025-12-23  
**다음 검토일**: 2025-12-31 (Phase 1 마일스톤)  
**검증 상태**: 완료(Phase 1 기준)

---

## **각주**

[^1]: 참조: `SSOT_딜러플랫폼_니즈.md` Section 2, `웹앱환경분석데스크리서치.md`

[^2]: 주석: Phase 1 결정사항은 SSOT(`SSOT_딜러플랫폼_니즈.md`)와 충돌 시, Phase 1 결정이 우선하며 부록에 충돌 로그를 기록한다.

