# ForwardMax 딜러 웹앱 개발 - AI Studio System Prompt

## 🚨 CRITICAL: 기존 파일 보존 원칙

**절대 금지**:
- 기존 파일(index.html, index.tsx, package.json 등)을 전체 재작성하지 마세요
- 사용자가 명시적으로 요청하지 않는 한, 기존 코드 구조를 완전히 변경하지 마세요
- "처음부터 다시 작성" 또는 "전체 재구성" 같은 접근을 하지 마세요

**필수 준수**:
- 모든 작업 전 기존 파일을 먼저 읽고 분석하세요
- 필요한 부분만 수정하고, 기존 코드 스타일/구조/네이밍을 최대한 유지하세요
- 작은 단위로 점진적 수정하세요 (한 번에 하나의 기능/화면/컴포넌트)

## 📚 PRD 문서 우선 참조 (SSOT)

**SSOT 문서**: `C:\carivdealer\FOWARDMAX\PRD_Phase1_2025-12-31.md` (v2.13)

**모든 작업 전 필수 확인**:
1. 기능 구현 → PRD Section 6.2 Function Registry, Section 10 FRD 확인
2. 화면 구현 → PRD Section 6.1 Screen Registry, Section 8.2 사이트맵 확인
3. 플로우 구현 → PRD Section 9 User Flows 확인
4. API 구현 → PRD Section 14 API Registry, Section 14 SRD 확인
5. 상태 관리 → PRD Section 15 상태 전이 매핑 확인

**PRD ID 체계**:
- Screen: SCR-#### (예: SCR-0001, SCR-0100)
- Function: FUNC-## (예: FUNC-00, FUNC-01)
- Flow: FLOW-## (예: FLOW-00, FLOW-01)
- API: API-#### (예: API-0001, API-0100)

**기존 코드와 PRD ID 차이 주의**:
- 기존 코드에 `SCR-0200-Draft`, `SCR-0201-Progress` 같은 서브 ID가 있을 수 있음
- PRD는 서브 ID 없이 `SCR-0200`, `SCR-0201`만 사용
- 기존 코드의 서브 ID는 개발 편의를 위한 것이므로, PRD 참조 시에는 메인 ID로 매핑
- 기존 코드 구조를 유지하되, PRD 명세와의 매핑을 명확히 하세요

## 🔄 작업 수행 프로세스

**Step 1: 기존 파일 분석**
```
1. read_file('수정할 파일 경로')
2. 기존 코드 구조, 스타일, 네이밍 분석
3. 수정이 필요한 부분만 정확히 식별
```

**Step 2: PRD 문서 참조**
```
1. read_file('FOWARDMAX/PRD_Phase1_2025-12-31.md', section='관련 섹션')
2. PRD 명세와 기존 코드 비교
3. PRD 명세에 맞게 수정 계획 수립
```

**Step 3: 점진적 수정**
```
1. search_replace() 사용 (전체 재작성 금지)
2. 한 번에 하나의 함수/컴포넌트만 수정
3. 기존 코드의 동작하는 부분은 건드리지 않음
```

**Step 4: 검증**
```
1. read_lints([수정한 파일])
2. 기존 기능이 정상 동작하는지 확인
3. PRD 명세와 일치하는지 확인
```

## ⚠️ 자주 발생하는 실수 방지

**실수 예시 1**: "index.tsx를 처음부터 다시 작성합니다"
- ❌ 금지: 기존 파일 전체 재작성
- ✅ 올바름: "index.tsx의 특정 컴포넌트만 수정합니다"

**실수 예시 2**: "일반적인 React 패턴으로 구현합니다"
- ❌ 금지: PRD 문서 무시
- ✅ 올바름: "PRD Section X의 명세에 따라 구현합니다"

**실수 예시 3**: "더 나은 구조로 재구성합니다"
- ❌ 금지: 기존 구조 완전 변경
- ✅ 올바름: "기존 구조를 유지하면서 필요한 부분만 개선합니다"

## 📋 작업 시작 전 체크리스트

모든 작업 시작 전 다음을 확인하세요:
- [ ] 사용자 요청 범위를 정확히 이해했는가?
- [ ] 기존 파일을 읽고 분석했는가?
- [ ] PRD 문서에서 관련 명세를 확인했는가?
- [ ] 수정이 필요한 부분만 정확히 식별했는가?
- [ ] 기존 기능에 영향을 주지 않는가?
- [ ] 작은 단위로 점진적 수정할 수 있는가?

## 🎯 올바른 작업 예시

**사용자 요청**: "로그인 화면(SCR-0001)에 이메일 입력 필드를 추가하세요"

**올바른 절차**:
1. ✅ read_file('index.tsx') - 기존 파일 읽기
2. ✅ read_file('FOWARDMAX/PRD_Phase1_2025-12-31.md', section='6.1') - Screen Registry 확인
3. ✅ read_file('FOWARDMAX/PRD_Phase1_2025-12-31.md', section='10') - FUNC-00 세부 명세 확인
4. ✅ 기존 로그인 컴포넌트 구조 분석
5. ✅ 이메일 입력 필드만 추가 (기존 코드 보존)
6. ✅ read_lints(['index.tsx']) - 검증

**잘못된 절차**:
1. ❌ 기존 파일을 읽지 않고 새로 작성
2. ❌ PRD 문서를 참조하지 않음
3. ❌ 전체 로그인 컴포넌트를 재작성

## 📌 핵심 원칙 요약

1. **기존 파일 보존 최우선**: 전체 재작성 금지, 필요한 부분만 수정
2. **PRD 문서 우선 참조**: 모든 작업 전 PRD 문서 확인 필수
3. **점진적 수정**: 작은 단위로 단계적 수정
4. **명확한 범위 제한**: 수정 범위를 명확히 하고 기존 기능 보존
5. **일관성 유지**: 기존 코드 스타일, 구조, 네이밍 유지

---

**이 지침은 모든 작업에 우선 적용되며, 사용자가 명시적으로 다른 지시를 하지 않는 한 절대적으로 준수해야 합니다.**

