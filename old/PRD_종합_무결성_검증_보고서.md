# PRD 및 output.json 종합 무결성 검증 보고서

**문서명**: ForwardMax 딜러 웹앱 PRD 종합 무결성 검증 보고서  
**버전**: 1.1  
**검증 일시**: 2025-12-31  
**최종 업데이트**: 2025-12-31 (PRD v2.12 최종 반영 후 재검증 요약 추가)  
**검증 범위**: 
- `PRD_Phase1_2025-12-31.md` (SSOT 문서)
- `output.json` (IA 1.0 / SPM 1.0)

**검증 목적**: 
- PRD 내부 일관성 검증 (플로우차트-사이트맵, 기능명-화면명, 상태 전이 등)
- output.json과 PRD 간 일치성 검증
- 논리적 일관성 검증 (플로우 순서, 상태 전이 순서 등)

---

## 0. PRD v2.12 반영 후 재검증(추가 요약)

### 0.1 재검증 통계(PRD v2.12 기준)

| 항목 | PRD(v2.12) | output.json | 비고 |
|---|---|---|---|
| **Screen** | 16개 | - | Phase 1 완전 목록 |
| **Function** | 16개 (FUNC-00 포함) | ~84개 (IA 항목) | ID 체계 불일치(구조 차이) |
| **Flow** | 5개 | - | FLOW-00~04 |
| **API** | 16개 | - | Phase 1 완전 목록 |
| **Entity** | 6개 | - | Phase 1 핵심 엔터티 |
| **사이트맵 항목(딜러)** | 16개 | - | 중복 제거 및 구조 정리 완료 |
| **상태 전이** | 6개 | - | Draft → Sold |
| **SPM 정책** | - | 29개 | dealer-sp-* 형식 |

### 0.2 해결 상태

- **Critical Issues**: ✅ 해결 완료  
  - 사이트맵 구조 ↔ 플로우 구조 불일치 해소  
  - 상태 전이 ↔ 화면 매핑 불일치 해소  
  - FLOW-03 순서 표기 정합화(분기 5A/5B, 조회 분리)
- **High Priority Issues**: ✅ 해결 완료  
  - 조회 전용 화면의 Function 정책 명시로 매핑 완전성 확보  
  - 사이트맵 중복 항목 제거(검차 신청/탁송 예약 구조 정리)
- **추가 정합성 클린업(v2.12)**: ✅ 해결 완료  
  - Decision Log D-P1-003에서 `SCR-0500` 제거 및 “최고가 공개” 문구 제거(딜러 스코프와 정렬)  
  - Phase 1 완료 체크리스트의 `FUNC-24` 오기 제거 및 항목명 정합화  
  - Function Registry 주석의 총 개수 정정(14개 → 16개)
- **Remaining (Medium)**: ⚠️ 잔존(정책/ID 체계 레벨)  
  - output.json ↔ PRD ID 체계 불일치(매핑 테이블로 관리 필요)  
  - output.json IA 항목의 “관련 정책 ID” 미연결(정책/추적성 보강 필요)

### 0.3 주의(보고서 본문 해석)

이 보고서의 **1~4장 본문은 v1.0 작성 시점(수정 전 상태)의 발견사항 기록**이며, 최신 상태는 **PRD v2.12** 및 **본 섹션(0장)**을 우선 참조합니다.

## 1. 실행 요약

### 1.1 검증 통계

| 항목 | PRD | output.json | 비고 |
|---|---|---|---|
| **Screen** | 16개 | - | Phase 1 완전 목록 |
| **Function** | 14개 (FUNC-00 포함) | ~84개 (IA 항목) | ID 체계 불일치 |
| **Flow** | 5개 | - | FLOW-00~04 |
| **API** | 16개 | - | Phase 1 완전 목록 |
| **Entity** | 6개 | - | Phase 1 핵심 엔터티 |
| **사이트맵 항목** | 18개 (딜러) | - | 1depths/2depths/3depths 구조 |
| **상태 전이** | 6개 | - | Draft → Sold |
| **SPM 정책** | - | 29개 | dealer-sp-* 형식 |

### 1.2 주요 발견사항 요약

#### Critical Issues (즉시 수정 필요)
1. **사이트맵 구조와 플로우 구조 불일치** (3건)
   - 사이트맵의 "차량 등록 > 검차 신청"이 3depths로 표시되지만, 실제로는 별도 화면(SCR-0200, SCR-0201)으로 분리
   - FLOW-03의 화면 순서와 실제 플로우 순서 불일치

2. **상태 전이와 화면 매핑 불일치** (2건)
   - Draft 상태가 "SCR-0200-Draft"로 표시되지만 Screen Registry에는 존재하지 않음
   - Inspecting 상태가 "SCR-0201-Progress"로 표시되지만 Screen Registry에는 존재하지 않음

#### High Priority Issues (단기 수정 필요)
1. **Function-Screen 매핑 불완전** (5건)
   - SCR-0100 (대시보드)에 Function이 없음 (의도된 것일 수 있음)
   - SCR-0101, SCR-0103, SCR-0104에 Function이 없음 (조회 기능만)

2. **사이트맵 중복 항목** (2건)
   - "검차 신청"이 "차량 관리 > 차량 등록 > 검차 신청"과 "검차 관리 > 검차 신청"에 중복
   - "탁송 예약"이 "일정 선택"과 "배차 확정"으로 분리되어 있지만 같은 화면(SCR-0600) 사용

#### Medium Priority Issues (중기 개선 필요)
1. **output.json과 PRD 간 ID 체계 불일치**
   - output.json: `Seller-ia-front-*` 형식
   - PRD: `FUNC-*` 형식
   - 매핑 테이블로 관리 중이지만 자동화 어려움

2. **관련 정책 ID 미연결**
   - output.json의 IA 항목 중 "관련 정책 ID" 필드가 대부분 비어있음
   - 기능-정책 추적 불가

---

## 2. PRD 내부 일관성 검증 결과

### 2.1 사이트맵-플로우 구조 불일치

#### 발견된 불일치 사항

| 사이트맵 구조 | 실제 플로우 구조 | 불일치 내용 |
|---|---|---|
| 차량 관리 > 차량 등록 > 등록원부 OCR (SCR-0200)<br>차량 관리 > 차량 등록 > 검차 신청 (SCR-0201) | FLOW-03: SCR-0101 → SCR-0200 → SCR-0300<br>FLOW-02: SCR-0201 → SCR-0202 | 사이트맵은 "차량 등록" 하위에 "검차 신청"을 포함하지만, 실제로는 FLOW-02(검차)와 FLOW-03(판매)가 분리됨 |

**영향**: 
- 사용자가 사이트맵을 보고 "차량 등록" 메뉴에서 검차 신청을 찾을 수 있지만, 실제 플로우는 차량 등록 후 별도 플로우로 진행
- 개발 시 화면 구조와 네비게이션 구조 불일치 가능성

**권장 조치**:
1. 사이트맵 구조를 실제 플로우 구조에 맞게 수정
2. 또는 플로우 구조를 사이트맵 구조에 맞게 재정의
3. 명확한 네비게이션 가이드 작성

### 2.2 상태 전이-화면 매핑 불일치

#### 발견된 불일치 사항

| 상태 | 문서의 화면 표기 | 실제 Screen Registry | 불일치 내용 |
|---|---|---|---|
| Draft | SCR-0200-Draft | SCR-0200만 존재 | "-Draft" 접미사가 붙은 화면은 존재하지 않음 |
| Inspecting | SCR-0201-Progress | SCR-0201만 존재 | "-Progress" 접미사가 붙은 화면은 존재하지 않음 |

**영향**:
- 상태별 화면 매핑 테이블(15.1)과 실제 Screen Registry 불일치
- 개발 시 화면 ID 참조 오류 가능성

**권장 조치**:
1. 상태별 화면 매핑 테이블 수정 (접미사 제거)
2. 또는 상태별 서브 화면 정의 추가

### 2.3 FLOW-Screen 순서 불일치

#### 발견된 불일치 사항

**FLOW-03의 화면 순서**:
```
FLOW-03 매핑 테이블:
1. SCR-0101 (차량 목록)
2. SCR-0200 (차량 등록)
3. SCR-0300 (판매 방식 선택)
4. SCR-0400 (경매 상세)
5. SCR-0102 (일반 판매 제안 목록)
6. SCR-0103 (판매 내역)
```

**실제 플로우 (9.3 FLOW-03 태스크 플로우)**:
```
1. SCR-0200 (차량 등록) - 등록원부 OCR
2. SCR-0201 (검차 신청) - FLOW-02로 이어짐
3. SCR-0202 (검차 결과 조회) - FLOW-02
4. SCR-0300 (판매 방식 선택)
5. SCR-0400 (경매 상세) 또는 SCR-0102 (일반 판매 제안 목록)
```

**불일치 내용**:
- FLOW-03 매핑 테이블에 SCR-0101(차량 목록)이 첫 번째로 나오지만, 실제 플로우는 SCR-0200(차량 등록)부터 시작
- FLOW-02의 화면(SCR-0201, SCR-0202)이 FLOW-03 플로우에 포함되어야 하나 매핑 테이블에는 없음

**영향**:
- 플로우 순서 이해 혼란
- 개발 시 화면 전환 로직 오류 가능성

**권장 조치**:
1. FLOW-03 매핑 테이블 수정 (실제 플로우 순서 반영)
2. FLOW-02와 FLOW-03의 관계 명확화

### 2.4 Function-Screen 매핑 불완전

#### 발견된 불일치 사항

| Screen ID | 화면명 | Function ID | 비고 |
|---|---|---|---|
| SCR-0100 | 딜러 대시보드 | - | 통합 화면으로 Function 없음 (의도된 것일 수 있음) |
| SCR-0101 | 차량 목록 | - | 조회 기능만 (Function 없음) |
| SCR-0103 | 판매 내역 | - | 조회 기능만 (Function 없음) |
| SCR-0104 | 정산 내역 | - | 조회 기능만 (Function 없음) |

**영향**:
- 조회 기능에 대한 명시적 Function 정의 부재
- 기능 추적 어려움

**권장 조치**:
1. 조회 기능에 대한 Function 정의 추가 (예: FUNC-24: 차량 목록 조회)
2. 또는 조회 기능은 Function 없이 화면만으로 관리하는 정책 명시

### 2.5 사이트맵 중복 항목

#### 발견된 중복 항목

| 항목 | 위치 1 | 위치 2 | 화면 ID |
|---|---|---|---|
| 검차 신청 | 차량 관리 > 차량 등록 > 검차 신청 | 검차 관리 > 검차 신청 | SCR-0201 |
| 탁송 예약 | 탁송 관리 > 탁송 예약 > 일정 선택<br>탁송 관리 > 탁송 예약 > 배차 확정 | - | SCR-0600 |

**영향**:
- 사용자 혼란 가능성
- 네비게이션 구조 중복

**권장 조치**:
1. 중복 항목 제거 또는 통합
2. 네비게이션 구조 단순화

---

## 3. output.json과 PRD 간 일치성 검증 결과

### 3.1 ID 체계 불일치

#### 발견된 불일치 사항

| 항목 | output.json | PRD | 매핑 가능 여부 |
|---|---|---|---|
| 기능 ID | `Seller-ia-front-*` | `FUNC-*` | 의미 기반 매핑 필요 |
| 화면 ID | 자유 형식 (`JoinEmail`) | `SCR-####` | 이름 기반 매핑 필요 |
| 정책 ID | `dealer-sp-*` | `D-*` 또는 `D-P1-*` | 의미 기반 매핑 필요 |

**영향**:
- 자동 매핑 불가
- 수동 매핑 테이블 유지 필요

**현재 상태**:
- 매핑 테이블 문서 존재 (`IA_PRD_매핑_테이블.md`, `SPM_PRD_매핑_테이블.md`)
- 일치율: IA ~18%, SPM ~41%

**권장 조치**:
1. ID 체계 통일 (output.json을 PRD 형식으로 변환)
2. 또는 매핑 테이블 자동화 도구 구축

### 3.2 관련 정책 ID 미연결

#### 발견된 불일치 사항

- output.json의 IA 항목 중 "관련 정책 ID" 필드가 대부분 비어있음
- 기능-정책 추적 불가

**영향**:
- 기능과 정책 간 관계 파악 어려움
- 정책 변경 시 영향 범위 파악 어려움

**권장 조치**:
1. 관련 정책 ID 필드 채우기 작업
2. 기능-정책 매핑 테이블 작성

---

## 4. 논리적 일관성 검증 결과

### 4.1 플로우 순서 논리성

#### 검증 결과

**예상 플로우 순서**:
```
FLOW-01 (회원가입) → FLOW-02 (검차) → FLOW-03 (판매) → FLOW-04 (탁송)
```

**실제 플로우 구조**:
- FLOW-01: 회원가입 (SCR-0002 → SCR-0003)
- FLOW-02: 검차 (SCR-0201 → SCR-0202)
- FLOW-03: 판매 (SCR-0101 → SCR-0200 → SCR-0300 → ...)
- FLOW-04: 탁송 (SCR-0104 → SCR-0105 → SCR-0600 → SCR-0601)

**발견된 문제**:
- FLOW-03에 FLOW-02의 화면(SCR-0201, SCR-0202)이 포함되어야 하나 명시되지 않음
- 실제 플로우는 "차량 등록 → 검차 신청 → 검차 결과 → 판매 방식 선택" 순서

**권장 조치**:
1. FLOW-03에 FLOW-02 화면 포함 명시
2. 또는 플로우 간 관계 명확화

### 4.2 상태 전이 순서 논리성

#### 검증 결과

**상태 순서**:
```
Draft → Inspecting → Active → Bidding → Locked → Settlement → Sold
```

**상태 전이 로직 검증**:
- ✅ Draft → Inspecting: 검차 신청 완료
- ✅ Inspecting → Active: 검차 결과 업로드 완료
- ✅ Active → Bidding: 판매 방식 선택 완료
- ✅ Bidding → Locked: 거래 확정
- ✅ Locked → Settlement: 인계 승인 완료
- ✅ Settlement → Sold: 정산 완료 알림 발송

**논리적 일관성**: ✅ 정상

### 4.3 필수 화면/기능 존재 여부

#### 검증 결과

**필수 화면**:
- ✅ SCR-0001 (로그인)
- ✅ SCR-0002 (회원가입)
- ✅ SCR-0100 (대시보드)
- ✅ SCR-0200 (차량 등록)
- ✅ SCR-0300 (판매 방식 선택)

**필수 기능**:
- ✅ FUNC-00 (로그인)
- ✅ FUNC-01 (딜러 회원가입)
- ✅ FUNC-02 (사업자 인증)
- ✅ FUNC-05 (차량 등록)
- ✅ FUNC-06 (검차 신청)

**검증 결과**: ✅ 모든 필수 항목 존재

---

## 5. 위험요인 우선순위 분류

### 5.1 Critical (즉시 수정 필요)

| 위험요인 ID | 위험요인 내용 | 영향 범위 | 완화 전략 |
|---|---|---|---|
| RISK-INT-001 | 사이트맵 구조와 플로우 구조 불일치 | 사용자 혼란, 개발 오류 | 사이트맵 구조 수정 또는 플로우 구조 재정의 |
| RISK-INT-002 | 상태 전이-화면 매핑 불일치 | 개발 시 화면 ID 참조 오류 | 상태별 화면 매핑 테이블 수정 |
| RISK-INT-003 | FLOW-Screen 순서 불일치 | 플로우 순서 이해 혼란 | FLOW-03 매핑 테이블 수정 |

### 5.2 High (단기 수정 필요)

| 위험요인 ID | 위험요인 내용 | 영향 범위 | 완화 전략 |
|---|---|---|---|
| RISK-INT-004 | Function-Screen 매핑 불완전 | 기능 추적 어려움 | 조회 기능 Function 정의 추가 또는 정책 명시 |
| RISK-INT-005 | 사이트맵 중복 항목 | 사용자 혼란 | 중복 항목 제거 또는 통합 |
| RISK-EXT-001 | output.json과 PRD 간 ID 체계 불일치 | 자동 매핑 불가 | ID 체계 통일 또는 매핑 테이블 자동화 |
| RISK-EXT-002 | 관련 정책 ID 미연결 | 기능-정책 추적 불가 | 관련 정책 ID 필드 채우기 |

### 5.3 Medium (중기 개선 필요)

| 위험요인 ID | 위험요인 내용 | 영향 범위 | 완화 전략 |
|---|---|---|---|
| RISK-EXT-003 | output.json의 빈 필드 비율 높음 | 데이터 품질 저하 | 빈 필드 채우기 작업 |

---

## 6. 보완 제안 및 권장 사항

### 6.1 즉시 보완 필요 사항

#### 6.1.1 사이트맵 구조 수정

**현재 구조**:
```
차량 관리 > 차량 등록 > 등록원부 OCR (SCR-0200)
차량 관리 > 차량 등록 > 검차 신청 (SCR-0201)
```

**권장 구조**:
```
차량 관리 > 차량 등록 (SCR-0200)
검차 관리 > 검차 신청 (SCR-0201)
검차 관리 > 검차 결과 조회 (SCR-0202)
차량 관리 > 차량 목록 (SCR-0101)
차량 관리 > 판매 방식 선택 (SCR-0300)
```

**수정 위치**: PRD Section 8.2 딜러 사이트맵

#### 6.1.2 상태별 화면 매핑 테이블 수정

**현재 표기**:
- Draft: SCR-0200-Draft
- Inspecting: SCR-0201-Progress

**권장 표기**:
- Draft: SCR-0200
- Inspecting: SCR-0201

**수정 위치**: PRD Section 15.1 차량 상태별 화면 매핑

#### 6.1.3 FLOW-03 매핑 테이블 수정

**현재 순서**:
1. SCR-0101
2. SCR-0200
3. SCR-0300
...

**권장 순서**:
1. SCR-0200 (차량 등록)
2. [FLOW-02 연결] SCR-0201 (검차 신청)
3. [FLOW-02 연결] SCR-0202 (검차 결과 조회)
4. SCR-0300 (판매 방식 선택)
5. SCR-0400 (경매 상세) 또는 SCR-0102 (일반 판매 제안 목록)
6. SCR-0103 (판매 내역)

**수정 위치**: PRD Section 7.2 FLOW → Screen 매핑

### 6.2 단기 보완 필요 사항

#### 6.2.1 조회 기능 Function 정의 추가

**제안**:
- FUNC-24: 차량 목록 조회 (SCR-0101)
- FUNC-25: 판매 내역 조회 (SCR-0103)
- FUNC-26: 정산 내역 조회 (SCR-0104)

또는 조회 기능은 Function 없이 화면만으로 관리하는 정책 명시

#### 6.2.2 사이트맵 중복 항목 제거

**제안**:
- "검차 신청"을 "검차 관리"로만 이동
- "차량 관리 > 차량 등록"에서 "검차 신청" 제거

### 6.3 중기 개선 필요 사항

#### 6.3.1 ID 체계 통일

**제안**:
- output.json의 ID를 PRD 형식으로 변환
- 또는 매핑 테이블 자동화 도구 구축

#### 6.3.2 관련 정책 ID 필드 채우기

**제안**:
- output.json의 IA 항목에 관련 정책 ID 연결
- 기능-정책 매핑 테이블 작성

---

## 7. 검증 방법 및 근거

### 7.1 검증 방법

1. **정규표현식 기반 파싱**
   - PRD의 표 형식 데이터 추출
   - ID 패턴 매칭

2. **의미 기반 매칭**
   - 기능명, 화면명 비교
   - 플로우 순서 비교

3. **교차 검증**
   - 사이트맵 ↔ 플로우
   - 상태 전이 ↔ 화면 매핑
   - Function ↔ Screen ↔ API

### 7.2 검증 근거

- **PRD 파일**: `PRD_Phase1_2025-12-31.md` (SSOT 문서)
- **output.json 파일**: `output.json` (IA 1.0 / SPM 1.0)
- **기존 검증 보고서**: `PRD_IA_SPM_검증_보고서.md`
- **매핑 테이블**: `IA_PRD_매핑_테이블.md`, `SPM_PRD_매핑_테이블.md`

---

## 8. 프로젝트 전체 인사이트

### 8.1 문서 구조의 강점

1. **체계적인 ID 관리**
   - Screen, Function, API, Entity 등 모든 요소에 ID 부여
   - 추적 가능성 높음

2. **상세한 매핑 테이블**
   - FLOW → Screen → Function → API → Entity 매핑
   - 관계 명확화

3. **상태 전이 로직 명시**
   - 차량 상태 전이 로직 상세 정의
   - 논리적 일관성 검증 가능

### 8.2 개선 필요 영역

1. **사이트맵과 플로우 구조 정렬**
   - 현재 사이트맵 구조가 실제 플로우 구조와 불일치
   - 사용자 경험과 개발 일관성 저하 가능성

2. **조회 기능 정의 보완**
   - 조회 기능에 대한 명시적 Function 정의 부재
   - 기능 추적 어려움

3. **output.json과 PRD 통합**
   - ID 체계 불일치로 인한 수동 매핑 필요
   - 자동화 어려움

### 8.3 개발 시작 전 필수 작업

1. **Critical Issues 수정** (즉시)
   - 사이트맵 구조 수정
   - 상태별 화면 매핑 테이블 수정
   - FLOW-03 매핑 테이블 수정

2. **High Priority Issues 수정** (1주일 내)
   - Function-Screen 매핑 보완
   - 사이트맵 중복 항목 제거

3. **매핑 테이블 유지 관리** (지속)
   - output.json과 PRD 간 매핑 테이블 업데이트
   - 변경사항 추적

---

## 9. 검증 완료 체크리스트

- [x] PRD 파일 파싱 완료
- [x] output.json 파일 파싱 완료
- [x] PRD 내부 일관성 검증 완료
- [x] output.json과 PRD 간 일치성 검증 완료
- [x] 논리적 일관성 검증 완료
- [x] 위험요인 식별 완료
- [x] 보완 제안 작성 완료
- [x] 프로젝트 전체 인사이트 제공 완료

---

**문서 버전**: 1.0  
**최종 업데이트**: 2025-12-31  
**검증 완료일**: 2025-12-31  
**다음 검토일**: Critical Issues 수정 완료 후

