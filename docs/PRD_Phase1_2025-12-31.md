# ForwardMax 딜러 웹앱 통합 설계 PRD

**문서명**: ForwardMax 딜러 웹앱 통합 설계 PRD (기능 설계 문서)  
**버전**: v2.14 (추가 화면 및 기능 명세 반영 완료)  
**마일스톤**: 2025-12-31  
**작성일**: 2025-12-23  
**최종 업데이트**: 2025-01-XX (추가 화면 12개 및 관련 기능 명세 반영: Screen Registry 확장(16개→28개), Function Registry 보완(16개→19개), 화면 전환 맵 및 플로우차트 업데이트)  
**작성자**: ForwardMax 기획팀  
**검증 상태**: Final SSOT for IDE Agent Implementation (무결성 검증 완료)  
**문서 목적**: 딜러 웹앱 중심 통합 설계 문서. 내부 이해관계자(기획·디자인·개발) 간 인식 정렬, 와이어프레임과 기능명세 100% 매핑, 문서 스위트(FRD/TSD/SRD/Traceability/Decision/GAP/Glossary/FeatureCatalog/StateMachine/Governance) 내장. 본 문서는 딜러 웹앱의 기술 스택, 사이트맵(100%), 상태 전이 로직 및 MVP 검증을 위한 Mock 전략을 통합한 최종 개발 지침서입니다.

---

## 목차

1. [사업 기획(요약)](#1-사업-기획요약)
2. [핵심 요약 및 결정사항(12/23) + Phase 1 마일스톤](#2-핵심-요약-및-결정사항1223--phase-1-마일스톤)
3. [플로우차트 작성 규칙(표준)](#3-플로우차트-작성-규칙표준)
4. [기능 명세 규칙(FRD 작성 규칙)](#4-기능-명세-규칙frd-작성-규칙)
5. [역할 및 구성요소(Actor/Component)](#5-역할-및-구성요소actorcomponent)
6. [인덱스/ID 규칙 + ID 레지스트리](#6-인덱스id-규칙--id-레지스트리)
7. [기능 엔터티–화면 엔터티–메타데이터 체계](#7-기능-엔터티화면-엔터티메타데이터-체계)
8. [정보구조(IA) 및 사이트맵](#8-정보구조ia-및-사이트맵)
9. [사이트맵 기반 유저플로우](#9-사이트맵-기반-유저플로우)
10. [FRD: 세부 기능 명세](#10-frd-세부-기능-명세)
11. [기능-매핑-관계규칙 상세 정의(개발자 수준)](#11-기능-매핑-관계규칙-상세-정의개발자-수준)
12. [NFR: 비기능 요구사항](#12-nfr-비기능-요구사항)
13. [TSD: 기술 설계](#13-tsd-기술-설계)
14. [SRD: 서비스 요구](#14-srd-서비스-요구)
15. [상태 전이 매핑 (State Transition Mapping)](#15-상태-전이-매핑-state-transition-mapping)
16. [MVP Mock 데이터 스키마](#16-mvp-mock-데이터-스키마)
17. [MVP 로직 디렉티브 (Implementation Directives)](#17-mvp-로직-디렉티브-implementation-directives)
18. [Traceability Matrix(추적 매트릭스)](#18-traceability-matrix추적-매트릭스)
19. [Decision Log(결정 로그)](#19-decision-log결정-로그)
20. [GAP Log(갭 로그)](#20-gap-log갭-로그)
21. [Risk & Opportunity Register(리스크 및 기회 레지스트리)](#21-risk--opportunity-register리스크-및-기회-레지스트리)
22. [문서 거버넌스](#22-문서-거버넌스)
23. [부록](#23-부록)
    - [23.1 용어집](#231-용어집)
    - [23.2 기능↔화면 100% 매핑 리스트(Phase 1)](#232-기능화면-100-매핑-리스트phase-1)
    - [23.3 결정로그(Phase 1)](#233-결정로그phase-1)
    - [23.4 갭 로그(Phase 1 오픈 이슈)](#234-갭-로그phase-1-오픈-이슈)
    - [23.5 output.json IA 1.0 상세 항목 (참조)](#235-outputjson-ia-10-상세-항목-참조)
    - [23.6 output.json SPM 1.0 정책 항목 (참조)](#236-outputjson-spm-10-정책-항목-참조)

---

## 1. 사업 기획(요약)

### 1.1 프로젝트 개요

ForwardMax 딜러 플랫폼은 국내 영세 중고차 딜러를 대상으로 하는 B2B SaaS 기반의 수출 통합 관제 시스템이다. 기존의 파편화된 수출 프로세스를 디지털화하고, 딜러의 업무를 "실행"에서 "확인"으로 전환하는 것을 핵심 목표로 한다.

### 1.2 핵심 가치 제안

- **딜러 관점**: 부가세 환급 9.09% + 복잡한 서류/정산/물류 부담 제거
- **플랫폼 관점**: 검차 기반 신뢰 구조 + 블랙박스 전략(바이어 정보/최종가 마스킹)

### 1.3 시장 기회

- 연간 60만 대 이상, 6조원 규모의 중고차 수출 시장
- 디지털 전환율 극히 낮음 → 플랫폼 기회 [^ref1]

[^ref1]: 참조: SSOT_딜러플랫폼_니즈.md Section 2, 웹앱환경분석데스크리서치.md

---

## 2. 핵심 요약 및 결정사항(12/23) + Phase 1 마일스톤

### 2.1 Phase 1 마일스톤 정의

- **마일스톤 날짜**: 2025-12-31
- **산출물 목적**: 디자인 결과물이 아니라 **기능 설계 문서(내부 이해관계자 정렬용)**
- **성공 조건**:
  - 전체 유저 플로우·태스크 플로우가 화면 단위로 모두 연결
  - 화면 간 이동 관계 명확
  - 주요 인터랙션(버튼 클릭 시 이동/모달/상태 변화)은 텍스트 주석으로 설명
  - 기능명세와 화면은 원칙적으로 **100% 일치**
  - 개발자가 와이어프레임(+주석)만 보고도 구현 착수 가능한 수준

### 2.2 와이어프레임 작업 원칙(12/23 결정)

#### 2.2.1 목적·성격 재정의

- **산출물 성격**: 디자인 결과물이 아니라 **기능 설계 문서**
- **사용자**: 외부 사용자 테스트·마케팅용이 아니라 **내부 이해관계자(기획·디자인·개발)**
- **목적**: 인식 정렬, 기획 플로우차트·기능명세가 실제 화면 단위로 구현 가능한지 검증

#### 2.2.2 Figma 작업 원칙

- 하나의 공용 디자인용 Figma 파일에서만 작업, 개인 파일 분리 금지
- 회의마다 날짜 기반 페이지를 새로 만들어, 해당 회의에서 논의할 프레임만 옮겨 정리
- 프레임 네이밍은 기능명 기반, 동일 기능은 항상 동일한 구조·네이밍 유지

#### 2.2.3 플로우별 담당자(12/23 확정)

| 플로우 | 담당자 | 범위 |
|---|---|---|
| 1단계: 진입–회원가입 | 엄태영 | 회원가입/인증 플로우 |
| 2단계: 검차(검사) | 엄태영 | 검차 신청/배정/수행 플로우 |
| 3단계: 업로드 및 판매(경매·즉시구매 포함) | 황설휘 | 차량 등록/판매 방식 선택/경매/일반 판매 |
| 4단계: 탁송 | 황설휘 | 탁송 예약/배차/인계 플로우 |

### 2.3 Phase 1 핵심 결정사항(12/23)

#### 결정 D-P1-001: 일반 판매 → 경매 전환 가능

- **결정 내용**: 기존 일반 판매(제안형)로 올라간 차량도, 필요시 경매 방식으로 변경 가능
- **조건**: 변경 가능 시점/상태, 변경 시 상태 변화/재검사 필요 여부는 Phase 1 내 결정 필요
- **영향 범위**: `SCR-0300`(차량 상세/판매 방식 선택 화면), `FUNC-15`(판매 방식 변경), 상태 전이 로직
- **근거**: 12/23 회의 결정사항
- **오너**: 기획팀
- **결정일**: 2025-12-23

#### 결정 D-P1-002: 차량 기본정보 입력 방식 변경 - 등록원부 OCR 기반 자동 채움

- **결정 내용**: 검차 전 차량 기본 정보 직접 입력 플로우를 제거하고, 자동차 등록원부 OCR로 자동 업로드하는 방식으로 변경
- **플로우**: 차량번호 입력 → 등록원부 OCR/추출 → 차량 기본정보 자동 채움(차대번호/VIN, 제조사, 모델, 연식, 주행거리 등)
- **영향 범위**: `SCR-0200`(차량 등록 화면), `FUNC-05`(차량 등록), `SRD-001`(등록원부 OCR 연동)
- **근거**: 12/23 회의 결정사항, 국내 중고차 플랫폼 사례(차량번호만으로 등록원부·사고이력·저당권 자동 조회)
- **오너**: 기획팀
- **결정일**: 2025-12-23

#### 결정 D-P1-003: 경매 즉시구매 포함

- **결정 내용**: 경매 안에 즉시구매 기능을 포함하여 일반 판매보다 높은 가격 형성을 유도
- **정책 후보**: 즉시구매 가격 설정 규칙(최소 시작가 대비 비율)은 Phase 1 내 결정 필요
- **영향 범위**: `SCR-0400`(경매 상세 화면), `FUNC-19`(즉시구매)
- **근거**: 12/23 회의 결정사항, 경쟁사 동향(현대글로비스 오토벨·차옥션 등)
- **오너**: 기획팀
- **결정일**: 2025-12-23
- **상태**: 확정(정책 세부는 오픈)

### 2.4 Phase 1 핵심 결정사항(12/24)

#### 결정 D-P1-004: 정보 공개 원칙(비공개 = 상호 공개)

- **결정 내용**: "공개"는 플랫폼 외부 공개가 아니라, **딜러↔바이어(당사자) 상호 공개**만 의미
- **경매 진행 중**: 최고가/현재가/입찰가 **비노출**(모든 사용자에게 비공개)
- **경매 낙찰 후**: 낙찰가(최종가)는 **딜러+낙찰 바이어(기업)에게만 노출**(당사자 공개)
- **동률 처리**: 최고가가 동일하게 2명 이상일 경우 **최초로 해당 금액에 도달한 입찰자(타임 우선)**가 낙찰
- **영향 범위**: FUNC-18, FUNC-19, 유저플로우, NFR, TSD, 마스킹 규칙 전반
- **근거**: 12/24 내부 회의 결정
- **오너**: 기획팀
- **결정일**: 2025-12-24
- **상태**: 확정

#### 결정 D-P1-005: 일반 거래(제안형) 프로세스 명시

- **결정 내용**: 일반 거래는 판매 방식 선택 → 기준가격 설정(딜러 입력+플랫폼 시세 개입) → 매물 오픈 → 바이어(기업) 제안 → 딜러는 수락/거절만 수행 → 제안 유효기간은 플랫폼 제공
- **조건**: 제안 유효기간 기본 TTL/연장/자동만료/알림 정책은 Phase 1 내 결정 필요
- **영향 범위**: FUNC-16, 일반 판매 제안 관련 기능, 알림 이벤트 레지스트리
- **근거**: 12/24 내부 회의 결정
- **오너**: 기획팀
- **결정일**: 2025-12-24
- **상태**: 확정(정책 세부는 오픈)

#### 결정 D-P1-006: 바이어 스코프 축소(딜러 웹앱 중심)

- **결정 내용**: 본 PRD는 딜러 웹앱 중심으로 작성. 바이어는 **Actor(행위자)로만 정의**하며, 바이어 UI/플로우/사이트맵/회원가입은 문서에서 제거. 모든 바이어는 기업(Corporate Buyer)으로 정의
- **조건**: 바이어는 이미 계정을 보유한 것으로 전제(로그인만 유지)
- **영향 범위**: 전체 문서(바이어 사이트맵/플로우/FRD 제거)
- **근거**: 12/24 내부 회의 결정
- **오너**: 기획팀
- **결정일**: 2025-12-24
- **상태**: 확정

### 2.5 Phase 1 결정로그 요약표

| 결정 ID | 결정 내용 | 영향 범위(기능/화면/상태) | 근거 | 오너 | 결정일 | 상태 |
|---|---|---|---|---|---|---|
| D-P1-001 | 일반 판매 → 경매 전환 가능 | `SCR-0300`, `FUNC-15`, 상태 전이 | 12/23 회의 | 기획팀 | 2025-12-23 | 확정 |
| D-P1-002 | 등록원부 OCR 기반 차량정보 자동 채움 | `SCR-0200`, `FUNC-05`, `SRD-001` | 12/23 회의, 시장 사례 | 기획팀 | 2025-12-23 | 확정 |
| D-P1-003 | 경매 즉시구매 포함 | `SCR-0400`, `FUNC-19` | 12/23 회의, 경쟁사 동향 | 기획팀 | 2025-12-23 | 확정(정책 세부는 오픈) |
| D-P1-004 | 정보 공개 원칙(비공개=상호 공개) | FUNC-18, FUNC-19, 유저플로우, NFR, TSD, 마스킹 규칙 전반 | 12/24 내부 회의 | 기획팀 | 2025-12-24 | 확정 |
| D-P1-005 | 일반 거래(제안형) 프로세스 명시 | FUNC-16, 일반 판매 제안 관련 기능, 알림 이벤트 레지스트리 | 12/24 내부 회의 | 기획팀 | 2025-12-24 | 확정(정책 세부는 오픈) |
| D-P1-006 | 바이어 스코프 축소(딜러 웹앱 중심) | 전체 문서(바이어 사이트맵/플로우/FRD 제거) | 12/24 내부 회의 | 기획팀 | 2025-12-24 | 확정 |

> 주석: Phase 1 결정사항은 SSOT(`SSOT_딜러플랫폼_니즈.md`)와 충돌 시, Phase 1 결정이 우선하며 부록에 충돌 로그를 기록한다.

---

## 3. 플로우차트 작성 규칙(표준)

본 PRD의 플로우차트는 `통합설계명세서_1.md` Section 9.1의 규칙을 표준으로 채택한다.

### 3.1 플로우차트 태그 체계

| 태그 | 도형 | 색상 | 텍스트 표기 | 용도 |
|---|---|---|---|---|
| `[시작]` | 붉은색 타원형 | RGB(255, 0, 0) | `[시작]` | 플로우 시작점 |
| `[끝]` | 붉은색 타원형 | RGB(255, 0, 0) | `[끝]` | 플로우 종료점 |
| `[프로세스]` | 주황색 직사각형 | RGB(255, 165, 0) | `[프로세스]: [내용]` | 처리 단계 |
| `[판단]` | 노란색 마름모 | RGB(255, 255, 0) | `[판단]: [조건] (Y/N)` | 분기점/조건 판단 |
| `[입력]` | 연두색 평행사변형 | RGB(144, 238, 144) | `[입력]: [내용]` | 사용자 입력/데이터 입력 |
| `[출력]` | 파란색 물결 하단 사각형 | RGB(0, 0, 255) | `[출력]: [내용]` | 결과/문서/상태 출력 |

### 3.2 플로우차트 작성 규칙

- 각 도형은 실선 화살표로 연결
- 분기점(Y/N)은 두 개의 화살표로 표시, 화살표 위에 조건(Y/N) 표기
- 각 프로세스/판단/입출력에는 관련 ID 레퍼런스 포함 가능(예: `[프로세스]: 검차 신청 → `FUNC-05`)
- DOCX 변환 시 Microsoft Word SmartArt 또는 도형 사용 권장

> 참조: `통합설계명세서_1.md` Section 9.1

---

## 4. 기능 명세 규칙(FRD 작성 규칙)

### 4.1 기능 명세(FRD) 표준 템플릿

각 기능은 다음 표 형식으로 명세한다:

| 필드명 | 설명 | 필수 여부 |
|---|---|---|
| FUNC-ID | 기능 고유 식별자(예: `FUNC-05`) | 필수 |
| 기능명 | 기능의 한국어 이름 | 필수 |
| 정의 | 기능이 무엇을 하는지 한 문장 정의 | 필수 |
| 목표 | 기능의 목적/해결하는 문제 | 필수 |
| 트리거 | 기능이 실행되는 조건/이벤트 | 필수 |
| 선행조건 | 기능 실행 전 만족해야 할 조건 | 필수 |
| 주요 플로우 | 단계별 처리 흐름(텍스트 또는 플로우차트 참조) | 필수 |
| 예외/오류 | 예외 상황 및 오류 처리 | 선택 |
| 출력 | 기능 실행 결과/생성 데이터 | 필수 |
| 달성기준(AC) | 기능이 성공적으로 완료된 것으로 판단하는 기준 | 필수 |
| 관련 화면 | `SCR-####` 형식의 화면 ID 목록 | 필수 |
| 관련 API | `API-####` 형식의 API ID 목록 | 선택 |
| 관련 NFR | `NFR-####` 형식의 비기능 요구사항 ID | 선택 |
| 소스(근거 문서) | 기능 정의의 근거가 된 문서/섹션 | 필수 |

### 4.2 DOCX 표 변환 친화 규칙

- 셀 내 줄바꿈 최소화(필요 시 별도 섹션으로 분리)
- 열 수 과다 방지(필요 시 표 분할 또는 부록 참조)
- 표 헤더는 간결하게(상세 설명은 본문 또는 주석)

---

## 5. 역할 및 구성요소(Actor/Component)

### 5.1 역할(Actor) 정의

| 역할 | 설명 | 주요 책임 | 비고 |
|---|---|---|---|
| 딜러(Dealer) | 중고차 매매업을 하는 판매자 | 최소 입력, 검차 신청, 판매 방식 선택, 제안 수락, 인계 확인 | 본 웹앱의 주요 사용자 |
| 바이어(Buyer, Corporate) | 해외 중고차 구매 기업 | 차량 제안, 경매 입찰, 즉시구매, 보증금/잔금 입금, 계약 확인 | 외부 행위자(기업만). 본 웹앱 UI/플로우는 제공하지 않음. 딜러 플로우의 이벤트 트리거 주체로만 작용 |
| 플랫폼(Platform/System) | 시스템 자동 처리 | 딜러 인증, 평가사 배정, 마켓 노출/매칭, 계약/서류 생성, 잔금/송금/환전 확인, 탁송 조건 제어 | - |
| 평가사(Evaluator) | 검차 수행자 | 검차 수행(사진/영상/성능 점검), 결과 업로드 | - |
| 탁송 기사(Logistics) | 물류 담당 | 배차/탁송 수행, 인계(차키/서류) 확인 | - |
| 관리자(Admin) | 플랫폼 운영자 | 딜러/바이어 관리, 평가사 배정, 정산 승인, 시스템 모니터링 | - |

> 참조: `SSOT_딜러플랫폼_니즈.md` Section 5

### 5.1.1 정보 공개 원칙(INFO_DISCLOSURE_POLICY)

본 PRD에서 "공개"는 플랫폼 외부 공개가 아니라, **딜러↔바이어(당사자) 상호 공개**만 의미한다.

#### 공개 범위 정의

| 정보 유형 | 경매 진행 중 | 경매 낙찰 후 | 일반 거래 | 비고 |
|---|---|---|---|---|
| 최고가/현재가/입찰가 | **비노출**(모든 사용자 비공개) | 낙찰가(최종가)는 **딜러+낙찰 바이어(기업)만 노출**(당사자 공개) | - | DecisionRef: D-P1-004 |
| 바이어 연락처 | 마스킹 | 낙찰 바이어 연락처는 딜러에게만 노출 | 제안 바이어 연락처는 딜러에게만 노출 | DecisionRef: D-006 |
| 딜러 연락처 | 마스킹 | 낙찰 바이어에게만 노출 | 제안 바이어에게만 노출 | DecisionRef: D-006 |
| 최종 수출가(낙찰가) | - | 딜러+낙찰 바이어만 노출 | 딜러+제안 수락 바이어만 노출 | DecisionRef: D-P1-004 |

#### 동률 처리 규칙

- 경매에서 최고가가 동일하게 2명 이상일 경우: **최초로 해당 금액에 도달한 입찰자(타임 우선)**가 낙찰
- 타임스탬프 기준: 입찰 요청이 서버에 도착한 시점(서버 타임스탬프)

> 참조: 결정 D-P1-004

### 5.2 구성요소(Component) 정의

| 컴포넌트 | 설명 | 범위 |
|---|---|---|
| 공통 컴포넌트 | 버튼, 입력창, 리스트, 모달/팝업, 상태값 표시(배지, 토스트 등) | 전체 화면 공통 |
| 딜러 전용 컴포넌트 | 차량 등록 폼, 검차 신청 폼, 판매 방식 선택 UI, 정산 내역 카드 | 딜러 화면 전용 |
| 바이어 전용 컴포넌트 | 경매 입찰 UI, 즉시구매 버튼 | 바이어 화면 전용(본 웹앱에서는 미제공) |

---

## 6. 인덱스/ID 규칙 + ID 레지스트리

### 6.1 ID 네이밍 규칙

| ID 타입 | 형식 | 예시 | 설명 |
|---|---|---|---|
| Flow | `FLOW-##` | `FLOW-01`, `FLOW-02` | 플로우 단계 식별자 |
| Screen | `SCR-####` | `SCR-0100`, `SCR-0200` | 화면 식별자(공통: 0000~0999, 딜러: 1000~2999, 바이어: 3000~4999) |
| Function | `FUNC-##` | `FUNC-05`, `FUNC-15` | 기능 식별자 |
| Entity | `ENT-##` | `ENT-01`, `ENT-02` | 데이터 엔터티 식별자 |
| API | `API-####` | `API-0100`, `API-0200` | API 엔드포인트 식별자 |
| Event | `EVT-####` | `EVT-0100` | 이벤트/상태 전이 식별자 |
| Decision | `D-###` 또는 `D-P1-###` | `D-001`, `D-P1-001` | 결정사항 식별자(Phase 1은 `D-P1-###`) |
| NFR | `NFR-####` | `NFR-0100` | 비기능 요구사항 식별자 |

### 6.2 ID 레지스트리(Phase 1 초안)

#### Flow Registry

| Flow ID | 플로우명 | 설명 | 담당자 | 상태 |
|---|---|---|---|---|
| FLOW-01 | 진입–회원가입 | 회원가입/인증 플로우 | 엄태영 | 확정 |
| FLOW-02 | 검차(검사) | 검차 신청/배정/수행 플로우 | 엄태영 | 확정 |
| FLOW-03 | 업로드 및 판매 | 차량 등록/판매 방식 선택/경매/일반 판매 | 황설휘 | 확정 |
| FLOW-04 | 탁송 | 탁송 예약/배차/인계 플로우 | 황설휘 | 확정 |
| FLOW-00 | 공통 | 로그인/로그아웃/마이페이지 등 공통 플로우 | - | 확정 |

#### Screen Registry(Phase 1 완전 목록)

| Screen ID | 화면명 | 역할 | Flow | 상태 |
|---|---|---|---|---|
| SCR-0000 | 랜딩 페이지 | 공통 | FLOW-00 | 확정 |
| SCR-0001 | 로그인 | 공통 | FLOW-00 | 확정 |
| SCR-0002 | 회원가입(딜러) | 딜러 | FLOW-01 | 확정 |
| SCR-0002-1 | 회원가입 약관 동의 | 딜러 | FLOW-01 | 확정 |
| SCR-0002-2 | 회원가입 정보 입력 | 딜러 | FLOW-01 | 확정 |
| SCR-0003 | 사업자 인증 | 딜러 | FLOW-01 | 확정 |
| SCR-0003-1 | 승인 대기 | 딜러 | FLOW-01 | 확정 |
| SCR-0003-2 | 승인 완료 | 딜러 | FLOW-01 | 확정 |
| SCR-0100 | 딜러 대시보드 | 딜러 | FLOW-00 | 확정 |
| SCR-0101 | 차량 목록 | 딜러 | FLOW-03 | 확정 |
| SCR-0102 | 일반 판매 제안 목록 | 딜러 | FLOW-03 | 확정 |
| SCR-0103 | 판매 내역 | 딜러 | FLOW-03 | 확정 |
| SCR-0104 | 정산 내역 | 딜러 | FLOW-04 | 확정 |
| SCR-0105 | 정산 상세 | 딜러 | FLOW-04 | 확정 |
| SCR-0200 | 차량 등록(등록원부 OCR) | 딜러 | FLOW-03 | 확정 |
| SCR-0200-Draft | 임시 저장 목록 | 딜러 | FLOW-03 | 확정 |
| SCR-0201 | 검차 신청 | 딜러 | FLOW-02 | 확정 |
| SCR-0201-Progress | 검차 진행 상태 | 딜러 | FLOW-02 | 확정 |
| SCR-0202 | 검차 결과 조회 | 딜러 | FLOW-02 | 확정 |
| SCR-0300 | 차량 상세/판매 방식 선택 | 딜러 | FLOW-03 | 확정 |
| SCR-0301-N | 일반 판매 - 분석 중 | 딜러 | FLOW-03 | 확정 |
| SCR-0302-N | 일반 판매 - 가격 설정 | 딜러 | FLOW-03 | 확정 |
| SCR-0303-N | 일반 판매 - 완료 | 딜러 | FLOW-03 | 확정 |
| SCR-0400 | 경매 상세(즉시구매 포함) | 딜러 | FLOW-03 | 확정 |
| SCR-0401-A | 경매 - 시작가 설정 | 딜러 | FLOW-03 | 확정 |
| SCR-0402-A | 경매 - 기간 설정 | 딜러 | FLOW-03 | 확정 |
| SCR-0403-A | 경매 - 완료 | 딜러 | FLOW-03 | 확정 |
| SCR-0600 | 탁송 예약/배차 | 딜러 | FLOW-04 | 확정 |
| SCR-0601 | 탁송 내역 | 딜러 | FLOW-04 | 확정 |

> 주석: Screen Registry는 Phase 1 완전 목록으로 관리. 총 28개 화면 (기본 16개 + 추가 12개). 추가 화면은 사용자 경험 개선을 위해 구현된 세분화 화면 및 플로우 화면입니다.

#### Function Registry(Phase 1 완전 목록)

| Function ID | 기능명 | 설명 | 관련 화면 | 상태 |
|---|---|---|---|---|
| FUNC-00 | 로그인 | 딜러/바이어 로그인 처리 | `SCR-0001` | 확정 (공통 기능) |
| FUNC-01 | 딜러 회원가입 | 딜러 계정 생성 및 기본 정보 입력 | `SCR-0002`, `SCR-0002-1`, `SCR-0002-2` | 확정 |
| FUNC-02 | 사업자 인증 | 사업자등록증 OCR 및 진위 확인 | `SCR-0003`, `SCR-0003-1`, `SCR-0003-2` | 확정 |
| FUNC-04 | 차량 임시 저장 | 차량 등록 중 임시 저장 | `SCR-0200-Draft` | 확정 |
| FUNC-05 | 차량 등록(등록원부 OCR) | 차량번호 입력 → 등록원부 OCR → 기본정보 자동 채움 | `SCR-0200` | 확정(D-P1-002) |
| FUNC-06 | 검차 신청 | 검차 희망 일정 선택 및 검차 신청 처리 | `SCR-0201`, `SCR-0201-Progress` | 확정 |
| FUNC-07 | 평가사 배정 | 시스템이 평가사를 자동 배정 | - | 확정(시스템 자동) |
| FUNC-08 | 검차 결과 업로드 | 평가사가 검차 결과 업로드 | `SCR-0202` | 확정(평가사 액션) |
| FUNC-11 | 판매 방식 선택(일반/경매) | 초기 판매 방식 선택 | `SCR-0300` | 확정 |
| FUNC-12 | 경매 생성/설정 | 경매 시작가/즉시구매가 설정 | `SCR-0401-A`, `SCR-0402-A`, `SCR-0403-A` | 확정 |
| FUNC-15 | 판매 방식 변경 | 일반 판매 → 경매 전환 | `SCR-0300` | 확정(D-P1-001) |
| FUNC-16 | 일반 판매 제안 수락 | 바이어(기업) 제안 수락/거절 | `SCR-0102` | 확정 |
| FUNC-17 | 바이어 최종 구매 의사 재확인 | 바이어(기업) 최종 구매 의사 재확인 | - | 확정(바이어 외부 시스템) |
| FUNC-18 | 경매 입찰 | 바이어(기업) 입찰 처리(진행 중 가격 비노출, 낙찰 후 당사자 공개) | - | 확정(D-P1-004) |
| FUNC-19 | 즉시구매 | 경매 내 즉시구매 실행 | `SCR-0400` | 확정(D-P1-003) |
| FUNC-20 | 탁송 일정 조율 | 탁송 희망 일정 선택 및 물류 파트너 조율 | `SCR-0600` | 확정 |
| FUNC-21 | 배차 조율 및 확정 | 배차 요청 및 탁송 기사 배정, 확정 후 변경 제한 | `SCR-0600`, `SCR-0601` | 확정 |
| FUNC-22 | 인계 승인 | 차량 상태 동일 확인서, 차키/서류 인계 확인 후 PIN 입력으로 책임 이관 | `SCR-0601` | 확정 |
| FUNC-23 | 정산 완료 알림 | 인계 승인 완료 후 정산 완료 알림 자동 발송 | `SCR-0105` | 확정(시스템 자동) |

> 주석: Function Registry는 Phase 1 완전 목록으로 관리. 총 19개 (FUNC-00 포함, FUNC-04, FUNC-11, FUNC-12 추가). FRD 미작성 Function(FUNC-03, FUNC-09)은 23.2.1 섹션 참조. 추가 기능은 버전 업데이트 시 반영.

---

## 7. 기능 엔터티–화면 엔터티–메타데이터 체계

### 7.1 관계 규칙

- **FLOW → Screen**: 각 플로우는 여러 화면을 순서대로 포함
- **Screen → Function**: 각 화면은 여러 기능을 제공
- **Function → Entity/API/NFR**: 각 기능은 데이터 엔터티, API, 비기능 요구사항에 종속

### 7.2 매핑 테이블(Phase 1 초안 예시)

#### FLOW → Screen 매핑

| Flow ID | Screen ID | 순서 | 설명 |
|---|---|---|---|
| FLOW-00 | SCR-0001 | 1 | 로그인 화면 |
| FLOW-00 | SCR-0100 | 2 | 딜러 대시보드 |
| FLOW-01 | SCR-0000 | 0 | 랜딩 페이지 |
| FLOW-01 | SCR-0001 | 1 | 로그인 화면 |
| FLOW-01 | SCR-0002-1 | 2 | 회원가입 약관 동의 화면 |
| FLOW-01 | SCR-0002-2 | 3 | 회원가입 정보 입력 화면 |
| FLOW-01 | SCR-0003-1 | 4 | 승인 대기 화면 |
| FLOW-01 | SCR-0003 | 5 | 사업자 인증 화면 |
| FLOW-01 | SCR-0003-2 | 6 | 승인 완료 화면 |
| FLOW-02 | SCR-0201 | 1 | 검차 신청 화면 |
| FLOW-02 | SCR-0201-Progress | 2 | 검차 진행 상태 화면 |
| FLOW-02 | SCR-0202 | 3 | 검차 결과 조회 화면 |
| FLOW-03 | SCR-0200 | 1 | 차량 등록 화면 (등록원부 OCR) |
| FLOW-03 | SCR-0200-Draft | 1-1 | 임시 저장 목록 화면 |
| FLOW-03 | SCR-0201 | 2 | 검차 신청 화면 (FLOW-02 연결) |
| FLOW-03 | SCR-0201-Progress | 2-1 | 검차 진행 상태 화면 (FLOW-02 연결) |
| FLOW-03 | SCR-0202 | 3 | 검차 결과 조회 화면 (FLOW-02 연결) |
| FLOW-03 | SCR-0300 | 4 | 판매 방식 선택 화면 |
| FLOW-03 | SCR-0301-N | 5A-1 | 일반 판매 - 분석 중 화면 |
| FLOW-03 | SCR-0302-N | 5A-2 | 일반 판매 - 가격 설정 화면 |
| FLOW-03 | SCR-0303-N | 5A-3 | 일반 판매 - 완료 화면 |
| FLOW-03 | SCR-0102 | 5A | 일반 판매 제안 목록 화면 (판매 방식=일반) |
| FLOW-03 | SCR-0401-A | 5B-1 | 경매 - 시작가 설정 화면 |
| FLOW-03 | SCR-0402-A | 5B-2 | 경매 - 기간 설정 화면 |
| FLOW-03 | SCR-0403-A | 5B-3 | 경매 - 완료 화면 |
| FLOW-03 | SCR-0400 | 5B | 경매 상세 화면(딜러) (판매 방식=경매) |
| FLOW-03 | SCR-0103 | 6 | 판매 내역 화면 |
| FLOW-03 | SCR-0101 | 조회 | 차량 목록 화면 (조회용, 플로우 순서 외) |
| FLOW-04 | SCR-0104 | 1 | 정산 내역 화면 |
| FLOW-04 | SCR-0105 | 2 | 정산 상세 화면 |
| FLOW-04 | SCR-0600 | 3 | 탁송 예약/배차 화면 |
| FLOW-04 | SCR-0601 | 4 | 탁송 내역 화면 |

> 주석: FLOW-03은 실제 플로우 순서에 맞게 재정렬되었습니다. 차량 등록(SCR-0200) 후 검차 플로우(FLOW-02)를 거쳐 판매 방식 선택으로 이어집니다. 5A/5B는 경매/일반 판매 분기이며, SCR-0101(차량 목록)은 조회용으로 플로우 순서에 포함되지 않습니다.

#### Screen → Function 매핑

| Screen ID | Function ID | 설명 | 비고 |
|---|---|---|---|
| SCR-0001 | FUNC-00 | 로그인 | - |
| SCR-0000 | - | 랜딩 페이지 | - |
| SCR-0001 | FUNC-00 | 로그인 | - |
| SCR-0002-1 | FUNC-01 | 딜러 회원가입 (약관 동의) | - |
| SCR-0002-2 | FUNC-01 | 딜러 회원가입 (정보 입력) | - |
| SCR-0003-1 | FUNC-02 | 사업자 인증 (승인 대기) | - |
| SCR-0003 | FUNC-02 | 사업자 인증 | - |
| SCR-0003-2 | FUNC-02 | 사업자 인증 (승인 완료) | - |
| SCR-0200-Draft | FUNC-04 | 차량 임시 저장 | - |
| SCR-0201-Progress | FUNC-06 | 검차 신청 (진행 상태) | - |
| SCR-0301-N | FUNC-11 | 판매 방식 선택 (일반 판매 분석) | - |
| SCR-0302-N | FUNC-11 | 판매 방식 선택 (일반 판매 가격 설정) | - |
| SCR-0303-N | FUNC-11 | 판매 방식 선택 (일반 판매 완료) | - |
| SCR-0401-A | FUNC-12 | 경매 생성/설정 (시작가) | - |
| SCR-0402-A | FUNC-12 | 경매 생성/설정 (기간) | - |
| SCR-0403-A | FUNC-12 | 경매 생성/설정 (완료) | - |
| SCR-0100 | - | 딜러 대시보드(통합 화면) | 조회 전용 화면, Function 없음 |
| SCR-0101 | - | 차량 목록 조회 | 조회 전용 화면, Function 없음 (정책: 조회 기능은 Function 없이 화면만으로 관리) |
| SCR-0102 | FUNC-16 | 일반 판매 제안 수락/거절 | - |
| SCR-0103 | - | 판매 내역 조회 | 조회 전용 화면, Function 없음 (정책: 조회 기능은 Function 없이 화면만으로 관리) |
| SCR-0104 | - | 정산 내역 조회 | 조회 전용 화면, Function 없음 (정책: 조회 기능은 Function 없이 화면만으로 관리) |
| SCR-0105 | FUNC-23 | 정산 완료 알림(시스템 자동) | - |
| SCR-0200 | FUNC-05 | 차량 등록(등록원부 OCR) | - |
| SCR-0201 | FUNC-06 | 검차 신청 | - |
| SCR-0202 | FUNC-08 | 검차 결과 조회(평가사 업로드) | 조회 전용이지만 평가사 업로드 기능 포함 |
| SCR-0300 | FUNC-15 | 판매 방식 변경 | - |
| SCR-0400 | FUNC-19 | 즉시구매(바이어 외부 시스템) | - |
| SCR-0600 | FUNC-20, FUNC-21 | 탁송 일정 조율, 배차 조율 및 확정 | - |
| SCR-0601 | FUNC-21, FUNC-22 | 배차 정보 조회, 인계 승인 | 조회 및 승인 기능 포함 |

> 주석: 조회 전용 화면(SCR-0100, SCR-0101, SCR-0103, SCR-0104)은 Function 없이 화면만으로 관리합니다. 이는 Phase 1 설계 정책으로, 조회 기능은 별도의 Function ID를 부여하지 않고 화면 ID만으로 관리합니다. 향후 조회 기능에 대한 세부 요구사항이 생기면 Function을 추가할 수 있습니다.

#### Function → Entity/API/NFR 매핑

| Function ID | Entity ID | API ID | NFR ID | 설명 |
|---|---|---|---|---|
| FUNC-05 | ENT-01(Vehicle) | API-0100(등록원부 OCR) | NFR-0100(OCR 성능) | 차량 등록 시 등록원부 OCR 연동 |
| FUNC-15 | ENT-01, ENT-02 | API-0300(판매 방식 변경) | NFR-0200(동시성) | 판매 방식 변경 시 상태 전이 |
| FUNC-18 | ENT-02(Auction) | API-0200(입찰) | NFR-0200(동시성) | 경매 입찰 시 동시성 제어 필요 |
| FUNC-19 | ENT-02(Auction) | API-0201(즉시구매) | NFR-0200, NFR-0202(원자성) | 즉시구매 시 동시성 및 원자성 보장 |
| FUNC-20 | ENT-04(Logistics_Schedule) | API-0600(탁송 일정 조율) | NFR-0300(외부 API 장애 대응) | 탁송 일정 조율 시 외부 API 연동 |
| FUNC-21 | ENT-04, ENT-05 | API-0601, API-0602(배차 조율/확정) | NFR-0300, NFR-0302(알림 정확도) | 배차 조율 및 확정 시 외부 API 연동 |
| FUNC-22 | ENT-05(Logistics_History) | API-0603(인계 승인) | NFR-0303(데이터 무결성), NFR-0304(보안 로그) | 인계 승인 시 데이터 무결성 및 보안 로그 |
| FUNC-23 | ENT-06(Settlement) | API-0604(정산 완료 알림) | NFR-0302, NFR-0305(알림 재시도) | 정산 완료 알림 발송 시 알림 정확도 및 재시도 |

> 주석: 전체 매핑 테이블은 부록에 별도 표로 관리.

---

## 8. 정보구조(IA) 및 사이트맵

### 8.1 사이트맵 표 작성 규칙(표준)

본 PRD의 사이트맵은 제공 이미지 기준 표 형식으로 작성하며, 다음 규칙을 준수한다.

#### 표 컬럼 고정

| 컬럼명 | 설명 | 필수 여부 |
|---|---|---|
| 탭/영역 | 사이트맵의 최상위 영역(딜러/바이어/공통) | 필수 |
| 1depths | 최상위 메뉴/카테고리 | 필수 |
| 2depths | 1depths의 하위 메뉴/섹션 | 필수 |
| 3depths | 2depths의 세부 기능/화면 | 선택(없으면 `-`) |
| contents | 각 항목의 설명(사용자 행동/정보 제공/상태 변화) | 필수 |

#### 행(로우) 작성 규칙

- 한 행은 **하나의 IA 항목(메뉴/패널/화면/기능 단위)**을 의미
- 상위 뎁스가 동일하면 값을 반복 기입(마크다운은 병합 셀 불가이므로 **반복 기입을 표준**으로 함)
- `3depths`는 옵션(없으면 `-`)
- Screen ID가 필요할 경우 `contents` 말미에 `SCR-####`를 괄호로 삽입

#### contents 작성 규칙

- "무엇을 제공하는지(사용자 행동/정보 제공/상태 변화)"를 1~2문장으로 기술
- DOCX 변환을 고려하여 셀 내 줄바꿈 최소화

### 8.2 딜러 사이트맵(표 형식)

| 탭/영역 | 1depths | 2depths | 3depths | contents |
|---|---|---|---|---|
| 딜러 | 대시보드 | - | - | 딜러의 전체 현황(차량 상태, 거래 진행 상황, 정산 내역)을 한눈에 확인할 수 있는 메인 화면 (SCR-0100) |
| 딜러 | 차량 관리 | 차량 등록 | - | 차량번호 입력 후 등록원부 OCR을 통해 차량 기본정보를 자동으로 채우는 기능 (SCR-0200) |
| 딜러 | 차량 관리 | 차량 목록 | - | 등록된 차량 목록을 조회하고 상태별로 필터링할 수 있는 화면 (SCR-0101) |
| 딜러 | 차량 관리 | 판매 방식 선택 | - | 검차 완료 후 일반 판매 또는 경매 방식을 선택하는 화면 (SCR-0300) |
| 딜러 | 차량 관리 | 판매 방식 변경 | - | 일반 판매에서 경매로 전환하는 기능 (SCR-0300) |
| 딜러 | 판매 관리 | 경매 상세 | - | 경매 진행 상황, 즉시구매 버튼을 포함한 경매 상세 화면. 진행 중 가격은 비노출, 낙찰 후 낙찰가만 당사자에게 공개 (SCR-0400) |
| 딜러 | 판매 관리 | 일반 판매 제안 목록 | - | 바이어의 제안 목록을 확인하고 수락/거절할 수 있는 화면 (SCR-0102) |
| 딜러 | 판매 관리 | 판매 내역 | - | 판매 완료된 차량의 거래 내역을 조회하는 화면 (SCR-0103) |
| 딜러 | 검차 관리 | 검차 신청 | - | 검차 희망 일정을 입력하고 검차 신청을 처리하는 화면 (SCR-0201) |
| 딜러 | 검차 관리 | 검차 결과 조회 | - | 평가사가 업로드한 검차 결과를 조회하는 화면(수정 불가) (SCR-0202) |
| 딜러 | 탁송 관리 | 탁송 예약/배차 | - | 탁송 희망 날짜/시간 선택, 일정 조율, 배차 확정을 포함한 통합 화면 (SCR-0600) |
| 딜러 | 탁송 관리 | 탁송 내역 | - | 탁송 예약 및 배차 내역을 조회하는 화면 (SCR-0601) |
| 딜러 | 탁송 관리 | 인계 승인 | - | 6자리 PIN 입력을 통해 인계를 승인하고 책임 이관을 완료하는 기능 (SCR-0601) |
| 딜러 | 정산 관리 | 정산 내역 | - | 정산 완료된 거래의 정산 내역 목록을 조회하는 화면 (SCR-0104) |
| 딜러 | 정산 관리 | 정산 상세 | - | 정산 내역의 상세 정보(항목별 금액, 수수료, 환급액 등)를 확인하는 화면 (SCR-0105) |

### 8.3 공통 영역 사이트맵(표 형식)

| 탭/영역 | 1depths | 2depths | 3depths | contents |
|---|---|---|---|---|
| 공통 | 헤더 | 로고 | - | 플랫폼 로고 및 메인으로 이동하는 링크 |
| 공통 | 헤더 | GNB | 메인 | 메인 화면으로 이동 |
| 공통 | 헤더 | GNB | 마이페이지 | 마이페이지 메뉴로 이동 |
| 공통 | 헤더 | GNB | 알림 | 알림 목록을 확인하는 기능 |
| 공통 | 헤더 | 유저 메뉴 | 로그인 | 로그인 화면으로 이동 (SCR-0001) |
| 공통 | 헤더 | 유저 메뉴 | 로그아웃 | 로그아웃 처리 |
| 공통 | 설정 | 계정 | 이메일 | 이메일 정보를 확인/변경할 수 있는 기능 |
| 공통 | 설정 | 계정 | 전화번호 | 전화번호 정보를 확인/변경할 수 있는 기능 |
| 공통 | 설정 | 계정 | 구독 | 구독 정보를 확인/변경할 수 있는 기능 |
| 공통 | 설정 | 계정 | 구독 | 히스토리 알림 on/off 설정 기능 |
| 공통 | 설정 | 계정 | 보안 | 비밀번호 변경 기능 |
| 공통 | 설정 | 계정 | 보안 | 개인정보 관리(신뢰할 수 있는 장치, 이 기기에서 로그아웃, 모든 장치에서 로그아웃 등) |
| 공통 | 설정 | 정보 | 도움말 센터 | 서비스 사용 시 도움을 받을 수 있는 정보 링크 제공 |
| 공통 | 설정 | 정보 | 이용약관 | 서비스 약관, 사업자 약관 등을 확인할 수 있는 링크 제공 |
| 공통 | 설정 | 정보 | 개인정보 보호 정책 | 개인정보보호처리방침을 확인할 수 있는 링크 제공 |

> 주석: 사이트맵은 Phase 1 완전 목록으로 관리. 추가 화면은 버전 업데이트 시 반영.

---

## 9. 사이트맵 기반 유저플로우

### 9.1 FLOW-01: 진입–회원가입

#### 태스크 플로우

```
[시작]
↓
[프로세스]: 랜딩 페이지 진입 (SCR-0000)
↓
[판단]: 로그인 또는 회원가입 선택
├─ 로그인 → [프로세스]: 로그인 화면 진입 (SCR-0001)
│   ↓
│   [입력]: 이메일/비밀번호 입력
│   ↓
│   [프로세스]: 로그인 처리 (FUNC-00)
│   ↓
│   [출력]: 로그인 성공 → 딜러 대시보드 (SCR-0100)
└─ 회원가입 → [프로세스]: 회원가입 약관 동의 화면 진입 (SCR-0002-1)
    ↓
    [입력]: 약관 동의
    ↓
    [프로세스]: 회원가입 정보 입력 화면 진입 (SCR-0002-2)
    ↓
    [입력]: 기본 정보(이름, 휴대폰, 이메일, 비밀번호)
    ↓
    [프로세스]: 회원가입 처리 (FUNC-01)
    ↓
    [프로세스]: 승인 대기 화면 진입 (SCR-0003-1)
    ↓
    [프로세스]: 사업자 인증 화면 이동 (SCR-0003)
    ↓
    [입력]: 사업자등록증 이미지 업로드
    ↓
    [프로세스]: OCR 처리 및 진위 확인 (FUNC-02)
    ↓
    [판단]: 인증 성공 여부 (Y/N)
    ├─ Y → [프로세스]: 승인 완료 화면 (SCR-0003-2)
    │   ↓
    │   [출력]: DEALER 등급 부여 → 딜러 대시보드 (SCR-0100)
    └─ N → [프로세스]: 재인증 요청 알림
↓
[끝]
```

#### 화면 전환 맵

| From Screen | To Screen | 트리거 | 조건 |
|---|---|---|---|
| SCR-0000 | SCR-0001 | "로그인" 버튼 클릭 | - |
| SCR-0000 | SCR-0002-1 | "회원가입" 버튼 클릭 | - |
| SCR-0001 | SCR-0002-1 | "회원가입" 버튼 클릭 | 계정 없음 |
| SCR-0002-1 | SCR-0002-2 | "다음" 버튼 클릭 | 약관 동의 완료 |
| SCR-0002-2 | SCR-0003-1 | "회원가입 완료" 버튼 클릭 | 기본 정보 입력 완료, FUNC-01 실행 |
| SCR-0003-1 | SCR-0003-2 | 승인 완료 | FUNC-02 성공, 승인 완료 |
| SCR-0003-2 | SCR-0100 | "시작하기" 버튼 클릭 | 인증 성공 |

### 9.2 FLOW-02: 검차(검사)

#### 태스크 플로우

```
[시작]
↓
[프로세스]: 검차 신청 화면 진입 (SCR-0201)
↓
[입력]: 검차 희망 일정(날짜/시간대) 선택
↓
[프로세스]: 검차 신청 처리 (FUNC-06)
↓
[출력]: Draft 상태 생성 또는 유지
↓
[프로세스]: 검차 진행 상태 화면 (SCR-0201-Progress)
↓
[프로세스]: 평가사 배정 (시스템 자동, FUNC-07)
↓
[출력]: Inspecting 상태로 전이
↓
[프로세스]: 평가사 검차 수행 (평가사 액션)
- 사진 촬영
- 영상 촬영
- 성능 점검
- 옵션 체크
↓
[프로세스]: 검차 결과 업로드 (평가사, FUNC-08)
↓
[판단]: 검차 통과 여부 (Y/N)
├─ Y → [출력]: 검차 완료, Active 상태로 전이 → 판매 가능 상태 전환
└─ N → [프로세스]: 재검차 신청 안내 또는 수정 요청
↓
[끝]
```

#### 화면 전환 맵

| From Screen | To Screen | 트리거 | 조건 |
|---|---|---|---|
| SCR-0200 | SCR-0201 | "검차 신청" 버튼 클릭 | 차량 기본정보 입력 완료 |
| SCR-0201 | SCR-0201-Progress | "예약 확정" 버튼 클릭 | 검차 신청 완료, FUNC-06 실행 |
| SCR-0201-Progress | SCR-0202 | "결과 확인" 버튼 클릭 | 검차 진행률 100%, FUNC-08 성공, 검차 통과 |
| SCR-0202 | SCR-0300 | "판매 방식 선택" 버튼 클릭 | 검차 완료, Active 상태 |

#### 상태 전이

| 이전 상태 | 다음 상태 | 트리거 이벤트 | 주체 |
|---|---|---|---|
| Draft | Inspecting | 검차 신청 완료 | 딜러 |
| Inspecting | Active | 검차 완료(통과) | 평가사 |
| Inspecting | Draft | 검차 실패/재검차 필요 | 평가사 |

> 주석: 검차 결과는 딜러가 수정할 수 없음(SSOT Section 3.2 금지 규칙). 검차 비용은 딜러 부담.

### 9.3 FLOW-03: 업로드 및 판매 (등록원부 OCR + 경매/즉시구매)

#### 태스크 플로우

```
[시작]
↓
[프로세스]: 차량 등록 화면 진입 (SCR-0200)
↓
[입력]: 차량번호 입력
↓
[프로세스]: 등록원부 OCR 호출 (FUNC-05, API-0100)
↓
[출력]: 차량 기본정보 자동 채움(VIN, 제조사, 모델, 연식, 주행거리 등)
↓
[판단]: 임시 저장 여부 (Y/N)
├─ Y → [프로세스]: 임시 저장 처리 (FUNC-04) → SCR-0200-Draft로 이동
│   ↓
│   [프로세스]: 임시 저장 목록 화면 (SCR-0200-Draft)
│   ↓
│   [판단]: 차량 선택 또는 새로 등록
│   ├─ 차량 선택 → [프로세스]: SCR-0200으로 복귀 (선택한 차량 정보 로드)
│   └─ 새로 등록 → [프로세스]: SCR-0200으로 이동
└─ N → [입력]: 검차 희망 일정 선택 (FLOW-02로 이어짐)
    ↓
    [프로세스]: 검차 신청 화면 (SCR-0201)
    ↓
    [프로세스]: 검차 신청 완료 → 검차 진행 상태 화면 (SCR-0201-Progress)
    ↓
    [프로세스]: 검차 완료 후 판매 방식 선택 화면 (SCR-0300)
    ↓
    [판단]: 판매 방식 선택 (일반/경매) [FUNC-11]
    ├─ 일반 → [프로세스]: 일반 판매 분석 중 화면 (SCR-0301-N)
    │   ↓
    │   [프로세스]: 플랫폼 시세 분석 완료
    │   ↓
    │   [프로세스]: 일반 판매 가격 설정 화면 (SCR-0302-N)
    │   ↓
    │   [입력]: 기준가격 설정 (딜러 입력 + 플랫폼 시세 개입)
    │   ↓
    │   [프로세스]: 일반 판매 완료 화면 (SCR-0303-N)
    │   ↓
    │   [프로세스]: 판매 상태로 전환(매물 오픈) → Active 상태로 전이
    │   ↓
    │   [프로세스]: 바이어(기업) 제안 도착 (외부 시스템)
    │   ↓
    │   [프로세스]: 제안 유효기간 설정(플랫폼 제공, TTL)
    │   ↓
    │   [프로세스]: 제안 목록 확인 (SCR-0102)
    │   ↓
    │   [판단]: 제안 수락/거절 (수락/거절)
    │   ├─ 수락 → [프로세스]: 제안 수락 처리 (딜러, FUNC-16)
    │   │   ↓
    │   │   [프로세스]: 바이어(기업) 최종 구매 의사 재확인 (바이어 외부 시스템, FUNC-17)
    │   │   ↓
    │   │   [출력]: 계약 생성 → Locked 상태로 전이
    │   └─ 거절 → [프로세스]: 제안 거절 처리 → 제안 목록에서 제거
    │   ↓
    │   [프로세스]: 제안 유효기간 임박/만료 알림 (플랫폼 자동)
    │   ↓
    │   [프로세스]: 제안 자동 만료 처리 (플랫폼 자동)
    └─ 경매 → [프로세스]: 경매 시작가 설정 화면 (SCR-0401-A)
        ↓
        [입력]: 경매 시작가 설정
        ↓
        [프로세스]: 경매 기간 설정 화면 (SCR-0402-A)
        ↓
        [입력]: 경매 기간 설정
        ↓
        [프로세스]: 경매 완료 화면 (SCR-0403-A)
        ↓
        [프로세스]: 경매 생성 완료 (FUNC-12) → 경매 상세 화면 (SCR-0400)
        ↓
        [출력]: 경매 상세 화면(즉시구매 버튼 포함, 진행 중 가격 비노출)
        ↓
        [프로세스]: 바이어(기업) 경매 입찰(외부 시스템)
        ↓
        [판단]: 입찰 또는 즉시구매 (입찰/즉시구매)
        ├─ 입찰 → [프로세스]: 경매 입찰 처리 (FUNC-18, API-0200)
        │   ↓
        │   [프로세스]: 입찰 처리 완료(내부 저장, 화면 비노출)
        └─ 즉시구매 → [프로세스]: 즉시구매 처리 (FUNC-19, API-0201)
            ↓
            [출력]: 경매 종료, 계약 생성 → Locked 상태로 전이
        ↓
        [판단]: 일반 판매로 전환 여부 (Y/N) [D-P1-001]
        ├─ Y → [프로세스]: 판매 방식 변경 (FUNC-15) → 일반 판매로 전환
        └─ N → [프로세스]: 경매 진행 대기 또는 종료
↓
[끝]
```

#### 화면 전환 맵

| From Screen | To Screen | 트리거 | 조건 |
|---|---|---|---|
| SCR-0000 | SCR-0001 | "로그인" 버튼 클릭 | - |
| SCR-0000 | SCR-0002-1 | "회원가입" 버튼 클릭 | - |
| SCR-0001 | SCR-0100 | 로그인 성공 | 인증 완료 |
| SCR-0002-1 | SCR-0002-2 | "다음" 버튼 클릭 | 약관 동의 완료 |
| SCR-0002-2 | SCR-0003-1 | "회원가입 완료" 버튼 클릭 | 정보 입력 완료, FUNC-01 실행 |
| SCR-0003-1 | SCR-0003-2 | 승인 완료 | FUNC-02 실행, 승인 완료 |
| SCR-0003-2 | SCR-0100 | "시작하기" 버튼 클릭 | 승인 완료 |
| SCR-0100 | SCR-0200 | "차량 등록" 버튼 클릭 | 딜러 인증 완료 |
| SCR-0100 | SCR-0200-Draft | "임시 저장 목록" 버튼 클릭 | - |
| SCR-0200-Draft | SCR-0200 | 차량 선택 또는 "새로 등록" 버튼 클릭 | - |
| SCR-0200 | SCR-0200-Draft | "임시 저장" 버튼 클릭 | FUNC-04 실행 |
| SCR-0200 | SCR-0201 | "검차 신청" 버튼 클릭 | 등록원부 OCR 완료, FUNC-05 성공 |
| SCR-0201 | SCR-0201-Progress | "예약 확정" 버튼 클릭 | 검차 신청 완료, FUNC-06 실행 |
| SCR-0201-Progress | SCR-0202 | "결과 확인" 버튼 클릭 | 검차 진행률 100%, FUNC-08 완료 |
| SCR-0202 | SCR-0300 | "판매 방식 선택" 버튼 클릭 | 검차 완료, Active 상태 |
| SCR-0300 | SCR-0301-N | "일반 판매" 선택 | 판매 방식 = 일반, FUNC-11 실행 |
| SCR-0300 | SCR-0401-A | "경매" 선택 | 판매 방식 = 경매, FUNC-11 실행 |
| SCR-0301-N | SCR-0302-N | 분석 완료 | 플랫폼 시세 분석 완료 |
| SCR-0302-N | SCR-0303-N | "가격 설정 완료" 버튼 클릭 | 기준가격 설정 완료 |
| SCR-0303-N | SCR-0102 | "제안 목록 보기" 버튼 클릭 | 일반 판매 등록 완료 |
| SCR-0401-A | SCR-0402-A | "다음" 버튼 클릭 | 시작가 설정 완료 |
| SCR-0402-A | SCR-0403-A | "다음" 버튼 클릭 | 기간 설정 완료 |
| SCR-0403-A | SCR-0400 | "경매 생성 완료" 버튼 클릭 | 경매 설정 완료, FUNC-12 실행 |
| SCR-0300 | SCR-0400 | "경매 방식" 선택 (기존 경매) | 판매 방식 = 경매, 기존 경매 존재 |
| SCR-0300 | SCR-0102 | "일반 판매" 선택 + 기준가격 설정 완료 (직접) | 판매 방식 = 일반, 기준가격 설정 완료 |
| SCR-0102 | SCR-0102 | "수락" 또는 "거절" 버튼 클릭 | FUNC-16 실행 |
| SCR-0102 | SCR-0102 | 제안 유효기간 만료 | 플랫폼 자동 만료 처리 |
| SCR-0400 | SCR-0400 | 경매 생성 완료 | 바이어(기업) 경매 입찰 가능(외부 시스템) |
| SCR-0400 | SCR-0300 | "일반 판매로 전환" 버튼 클릭 | FUNC-15 실행 |
| SCR-0400 | SCR-0400 | "입찰" 버튼 클릭(바이어 외부 시스템) | FUNC-18 실행, 입찰 처리 완료(화면 비노출) |
| SCR-0400 | SCR-0400 | "즉시구매" 버튼 클릭(바이어 외부 시스템) | FUNC-19 실행, 계약 생성 |

#### 상태 전이

| 이전 상태 | 다음 상태 | 트리거 이벤트 | 주체 |
|---|---|---|---|
| Active | Bidding | 판매 방식 선택 완료, 마켓 노출 | 딜러/시스템 |
| Bidding | Locked | 제안 수락(일반) 또는 낙찰/즉시구매(경매) | 딜러/바이어 |

> 주석: 등록원부 OCR은 결정 D-P1-002에 따라 차량번호만 입력하면 자동 처리. 경매 진행 중 가격 비노출 및 낙찰 후 당사자 공개는 결정 D-P1-004에 따라 구현. 즉시구매는 결정 D-P1-003에 따라 구현.

### 9.4 FLOW-04: 탁송

#### 태스크 플로우

```
[시작]
↓
[판단]: 금전 절차 완료 여부 (Y/N)
├─ N → [프로세스]: 금전 절차 완료 대기 알림 → Settlement 상태 확인
└─ Y → [프로세스]: 탁송 신청 화면 진입 (SCR-0600)
    ↓
    [입력]: 탁송 희망 날짜/시간 선택 (시간 슬롯 선택)
    ↓
    [입력]: 탁송 희망 날짜/시간 선택 (시간 슬롯 선택)
    ↓
    [프로세스]: 탁송 일정 조율 (FUNC-20, API-0600)
    ↓
    [판단]: 일정 확정 여부 (Y/N)
    ├─ N → [프로세스]: 재조율 요청 또는 주소 수정 요청 → SCR-0600으로 복귀
    └─ Y → [프로세스]: 배차 조율 및 확정 (시스템/물류, FUNC-21, API-0601, API-0602)
        ↓
        [출력]: 배차 확정 알림 (딜러+탁송 기사, 리마인드 포함)
        ↓
        [프로세스]: 배차 확정 이후 변경 제한(예외 시 위약금 부과)
        ↓
        [프로세스]: 탁송 전날 리마인드 알림 (시스템 자동)
        ↓
        [프로세스]: 탁송/인계 수행 (탁송 기사)
        - 차량 상태 동일 확인서 제출(사진 첨부)
        - 차키 인계
        - 서류 인계(말소증 등)
        ↓
        [판단]: 인계 준비 완료 여부 (Y/N)
        ├─ N → [예외 처리]: 차량 상태 불일치/차키/서류 미준비 → 재방문 일정 조율 또는 위약금 부과 → SCR-0600 알림
        └─ Y → [입력]: 인계 승인 (딜러, 6자리 PIN 입력, FUNC-22, API-0603)
            ↓
            [프로세스]: 책임 이관 타임스탬프 기록
            ↓
            [출력]: 인계 완료 확인, 인계 완료 알림(딜러+탁송 기사)
            ↓
            [프로세스]: 정산 완료 알림 (FUNC-23, API-0604, 시스템 자동)
            ↓
            [출력]: Sold 상태로 전이, 거래 종료
↓
[끝]
```

#### 화면 전환 맵

| From Screen | To Screen | 트리거 | 조건 |
|---|---|---|---|
| SCR-0105 | SCR-0600 | "탁송 신청" 버튼 클릭 | Settlement 상태(금전 절차 완료) |
| SCR-0600 | SCR-0601 | 배차 확정 | FUNC-21 성공 |
| SCR-0601 | SCR-0105 | 인계 승인 완료 | FUNC-22 성공, PIN 입력 |

#### 상태 전이

| 이전 상태 | 다음 상태 | 트리거 이벤트 | 주체 |
|---|---|---|---|
| Settlement | Sold | 인계 승인 완료 | 딜러 |

#### 예외 처리

| 예외 상황 | 대응 정책 | 화면/알림 | 위약금 정책 | Decision/GAP |
|---|---|---|---|---|
| 약속 시간 차량 준비 불가 | 재방문 일정 조율 또는 위약금 부과 | SCR-0600 알림 | 재방문 비용 또는 위약금 부과 | GAP-007(탁송 예외/위약금 정책) |
| 차키/서류 미준비 | 재방문 일정 조율 또는 위약금 부과 | SCR-0600 알림 | 재방문 비용 또는 위약금 부과 | GAP-007 |
| 연락 두절 | 재연락 시도(최대 3회) 또는 일정 취소 | SCR-0600 알림 | 일정 취소 시 위약금 부과 | GAP-007 |
| 주소 오류 | 주소 수정 후 재배차 | SCR-0600 알림 | 재배차 비용 또는 위약금 부과 | GAP-007 |
| 배차 확정 이후 변경 요청 | 변경 불가 또는 위약금 부과 후 변경 | SCR-0600 알림 | 변경 위약금 부과 | GAP-007 |
| 차량 상태 불일치 | 거부 및 재확인 요청 또는 위약금 부과 | SCR-0601 알림 | 상태 불일치 시 위약금 부과 | GAP-007 |

> 주석: 탁송 신청은 모든 금전 절차 완료 후에만 가능(SSOT Section 7.5). 인계 확인서/차키/서류 인계로 책임 종료. 배차 확정 이후 변경 제한(`기술설계 기능및 목표치.md` Section 4). 인계 승인 방식은 PIN 입력 + 사진 첨부 + 타임스탬프 기록으로 책임 이관을 명확히 함(SSOT Section 9 오픈 이슈). 탁송 예외/위약금 정책은 GAP-007로 등록하여 Phase 1 내 결정 필요.

### 9.5 FLOW-00: 공통 플로우

#### 로그인/로그아웃

```
[시작]
↓
[프로세스]: 로그인 화면 진입 (SCR-0001)
↓
[입력]: 이메일/휴대폰, 비밀번호 입력
↓
[프로세스]: 로그인 처리 (FUNC-00)
↓
[판단]: 로그인 성공 여부 (Y/N)
├─ Y → [출력]: 딜러 대시보드 이동 (SCR-0100)
└─ N → [프로세스]: 오류 메시지 표시
↓
[끝]
```

#### 마이페이지

```
[시작]
↓
[프로세스]: 마이페이지 진입 (GNB 클릭)
↓
[판단]: 역할 (딜러/바이어)
├─ 딜러 → [출력]: 딜러 마이페이지 (프로필, 차량 관리, 거래 내역, 정산 내역, 탁송 관리)
└─ 바이어 → [출력]: 바이어 마이페이지 (프로필, 입찰 내역, 구매 내역, 계약/결제)
↓
[끝]
```

> 주석: 공통 플로우는 모든 역할에 공통 적용. 전체 유저플로우는 부록에 별도 표로 관리.

---

## 10. FRD: 세부 기능 명세

### 10.1 FUNC-05: 차량 등록(등록원부 OCR 기반 자동 채움)

| 필드명 | 내용 |
|---|---|
| FUNC-ID | FUNC-05 |
| 기능명 | 차량 등록(등록원부 OCR 기반 자동 채움) |
| 정의 | 차량번호만 입력하면 등록원부 OCR을 통해 차량 기본정보를 자동으로 채우는 기능 |
| 목표 | 딜러 입력 부담 최소화, 정보 정확도 향상, 허위 매물 차단 |
| 트리거 | 딜러가 차량 등록 화면(SCR-0200)에서 차량번호 입력 후 "등록원부 조회" 버튼 클릭 |
| 선행조건 | 딜러 인증 완료(DEALER 등급), 차량번호 유효성 검증 통과 |
| 주요 플로우 | 1. 차량번호 입력 → 2. 등록원부 OCR API 호출(API-0100) → 3. OCR 결과 파싱 → 4. 차량 기본정보 자동 채움(VIN, 제조사, 모델, 연식, 주행거리 등) → 5. 딜러 확인/수정 가능 → 6. 검차 희망 일정 선택 → 7. 검차 신청 |
| 예외/오류 | OCR 실패 시 수동 입력 옵션 제공, 등록원부 미조회 시 알림 및 재시도 버튼 |
| 출력 | 차량 기본정보 자동 채움 완료, 검차 신청 가능 상태 |
| 달성기준(AC) | 차량번호 입력 후 3초 이내 등록원부 OCR 완료, 자동 채움 정확도 95% 이상 |
| 관련 화면 | SCR-0200 |
| 관련 API | API-0100(등록원부 OCR) |
| 관련 NFR | NFR-0100(OCR 성능), NFR-0201(외부 API 장애 대응) |
| 소스(근거 문서) | 결정 D-P1-002, `SSOT_딜러플랫폼_니즈.md` Section 7.2 |

### 10.2 FUNC-15: 판매 방식 변경(일반 → 경매)

| 필드명 | 내용 |
|---|---|
| FUNC-ID | FUNC-15 |
| 기능명 | 판매 방식 변경(일반 → 경매) |
| 정의 | 일반 판매로 등록된 차량을 경매 방식으로 변경하는 기능 |
| 목표 | 딜러 판매 전략 유연성 제공, 빠른 회전 유도 |
| 트리거 | 딜러가 차량 상세 화면(SCR-0300)에서 "경매로 전환" 버튼 클릭 |
| 선행조건 | 차량 상태 = Active(판매 가능), 일반 판매 상태, 아직 계약 없음 |
| 주요 플로우 | 1. 판매 방식 변경 요청 → 2. 변경 확인 모달 표시 → 3. 경매 설정(시작가, 즉시구매가) 입력 → 4. 변경 확정 → 5. 상태 전이(일반 → 경매) → 6. 경매 상세 화면(SCR-0400)으로 이동 |
| 예외/오류 | 이미 계약 진행 중이면 변경 불가 알림, 경매 설정 미입력 시 검증 오류 |
| 출력 | 판매 방식 변경 완료, 경매 상세 화면 표시 |
| 달성기준(AC) | 변경 요청 후 5초 이내 경매 상세 화면 표시, 상태 전이 정확도 100% |
| 관련 화면 | SCR-0300, SCR-0400 |
| 관련 API | API-0300(판매 방식 변경) |
| 관련 NFR | NFR-0200(동시성) |
| 소스(근거 문서) | 결정 D-P1-001, `SSOT_딜러플랫폼_니즈.md` Section 7.4 |

### 10.3 FUNC-18: 경매 입찰

| 필드명 | 내용 |
|---|---|
| FUNC-ID | FUNC-18 |
| 기능명 | 경매 입찰 |
| 정의 | 바이어(기업)가 경매에 입찰하는 기능. 진행 중 가격은 비노출, 낙찰 후 낙찰가만 당사자에게 공개 |
| 목표 | 경매 참여 유도, 가격 발견 기능 제공 |
| 트리거 | 바이어(기업)가 경매에 입찰가 입력 후 "입찰" 버튼 클릭(외부 시스템) |
| 선행조건 | 바이어(기업) 인증 완료, 경매 진행 중, 입찰가 > 현재 최고가(내부 저장값) |
| 주요 플로우 | 1. 입찰가 입력(바이어 외부 시스템) → 2. 입찰 확인 모달 → 3. 입찰 처리(API-0200, 낙관적 락) → 4. 최고가 내부 업데이트(화면 비노출) → 5. 동률 처리(타임 우선) → 6. 입찰 성공 알림(딜러+입찰 바이어) → 7. 경매 종료 시 낙찰가 당사자 공개(딜러+낙찰 바이어만) |
| 예외/오류 | 입찰가 <= 현재 최고가 시 오류, 동시 입찰 시 낙관적 락 처리, 동률 시 타임 우선 처리 |
| 출력 | 입찰 성공, 내부 최고가 업데이트(화면 비노출), 경매 종료 시 낙찰가 당사자 공개 |
| 달성기준(AC) | 입찰 처리 시간 1초 이내, 동시 입찰 정확도 100%, 동률 처리 정확도 100% |
| 관련 화면 | - (바이어 화면은 본 웹앱에서 미제공) |
| 관련 API | API-0200(경매 입찰) |
| 관련 NFR | NFR-0200(동시성 제어) |
| 소스(근거 문서) | 결정 D-P1-004, `SSOT_딜러플랫폼_니즈.md` Section 7.4 |

### 10.4 FUNC-19: 즉시구매

| 필드명 | 내용 |
|---|---|
| FUNC-ID | FUNC-19 |
| 기능명 | 즉시구매 |
| 정의 | 경매 내에서 즉시구매가로 바로 구매하는 기능 |
| 목표 | 빠른 거래 성사, 유찰 리스크 감소 |
| 트리거 | 바이어(기업)가 경매에 "즉시구매" 버튼 클릭(외부 시스템) |
| 선행조건 | 바이어(기업) 인증 완료, 경매 진행 중, 즉시구매가 설정됨 |
| 주요 플로우 | 1. 즉시구매 확인 모달 → 2. 즉시구매 처리(API-0201, 원자성 보장) → 3. 경매 종료 처리 → 4. 계약 생성 → 5. 결제 화면으로 이동 |
| 예외/오류 | 동시 즉시구매 시 첫 번째 요청만 성공(원자성 보장), 즉시구매가 미설정 시 버튼 비활성화 |
| 출력 | 즉시구매 성공, 경매 종료, 계약 생성 완료 |
| 달성기준(AC) | 즉시구매 처리 시간 2초 이내, 동시 요청 처리 정확도 100% |
| 관련 화면 | - (바이어 화면은 본 웹앱에서 미제공) |
| 관련 API | API-0201(즉시구매) |
| 관련 NFR | NFR-0200(동시성), NFR-0202(원자성) |
| 소스(근거 문서) | 결정 D-P1-003, `SSOT_딜러플랫폼_니즈.md` Section 7.4 |

### 10.4 FUNC-16: 일반 판매 제안 수락

| 필드명 | 내용 |
|---|---|
| FUNC-ID | FUNC-16 |
| 기능명 | 일반 판매 제안 수락 |
| 정의 | 바이어(기업)의 제안을 딜러가 수락하거나 거절하는 기능. 딜러는 수락/거절만 수행하며, 제안 유효기간은 플랫폼이 제공 |
| 목표 | 딜러 판매 의사 명확화, 제안 관리 자동화 |
| 트리거 | 딜러가 일반 판매 제안 목록 화면(SCR-0102)에서 "수락" 또는 "거절" 버튼 클릭 |
| 선행조건 | 차량 상태 = Active(판매 가능), 일반 판매 상태, 제안 유효기간 내, 아직 계약 없음 |
| 주요 플로우 | 1. 제안 목록 조회(제안가, 바이어 정보 마스킹, 제안 시간, 유효기간 남은 시간) → 2. 제안 상세 확인 → 3. 수락/거절 선택 → 4. 수락 시 확인 모달 → 5. 제안 수락 처리(API-0301) → 6. 바이어(기업)에게 수락 알림 발송 → 7. 바이어 최종 구매 의사 재확인 대기 → 8. 거절 시 제안 거절 처리 → 9. 제안 목록에서 제거 |
| 예외/오류 | 제안 유효기간 만료 시 자동 거절, 동시 수락 시 첫 번째 요청만 성공, 이미 계약 진행 중이면 수락 불가 |
| 출력 | 제안 수락/거절 완료, 수락 시 바이어 최종 구매 의사 재확인 대기 상태, 거절 시 제안 목록에서 제거 |
| 달성기준(AC) | 제안 수락/거절 처리 시간 2초 이내, 제안 유효기간 자동 만료 처리 정확도 100%, 제안 유효기간 임박 알림 정확도 100% |
| 관련 화면 | SCR-0102 |
| 관련 API | API-0301(제안 수락/거절) |
| 관련 NFR | NFR-0200(동시성 제어), NFR-0302(알림 정확도) |
| 소스(근거 문서) | 결정 D-P1-005, `기술설계 기능및 목표치.md` Section 3, `SSOT_딜러플랫폼_니즈.md` Section 7.4 |

### 10.5 FUNC-20: 탁송 일정 조율

| 필드명 | 내용 |
|---|---|
| FUNC-ID | FUNC-20 |
| 기능명 | 탁송 일정 조율 |
| 정의 | 딜러가 탁송 희망 날짜/시간을 선택하고, 시스템이 물류 파트너와 일정을 조율하는 기능 |
| 목표 | 탁송 일정 조율 자동화, 딜러 편의성 향상 |
| 트리거 | 딜러가 탁송 신청 화면(SCR-0600)에서 희망 날짜/시간 선택 후 "탁송 신청" 버튼 클릭 |
| 선행조건 | 금전 절차 완료(Settlement 상태), 차량 상태 = Settlement, 탁송 신청 가능 상태 |
| 주요 플로우 | 1. 희망 날짜/시간 선택(시간 슬롯 선택) → 2. 탁송 주소 확인 → 3. 시스템이 물류 파트너에 일정 조율 요청 → 4. 물류 파트너 응답 대기 → 5. 일정 확정 또는 재조율 요청 → 6. 딜러에게 일정 확정 알림 |
| 예외/오류 | 희망 일정 불가 시 재조율 요청, 주소 오류 시 주소 수정 요청, 물류 파트너 응답 지연 시 타임아웃 처리 |
| 출력 | 탁송 일정 확정 또는 재조율 요청, 배차 대기 상태로 전이 |
| 달성기준(AC) | 일정 조율 요청 처리 시간 5초 이내, 물류 파트너 응답 대기 시간 24시간 이내, 재조율 요청 처리 시간 1분 이내 |
| 관련 화면 | SCR-0600 |
| 관련 API | API-0600(탁송 일정 조율) |
| 관련 NFR | NFR-0300(외부 API 장애 대응), NFR-0301(타임아웃 처리) |
| 소스(근거 문서) | `기술설계 기능및 목표치.md` Section 4, `SSOT_딜러플랫폼_니즈.md` Section 7.5 |

### 10.6 FUNC-21: 배차 조율 및 확정

| 필드명 | 내용 |
|---|---|
| FUNC-ID | FUNC-21 |
| 기능명 | 배차 조율 및 확정 |
| 정의 | 시스템이 물류 파트너와 배차를 조율하고 확정하는 기능. 배차 확정 이후 변경 제한 |
| 목표 | 배차 자동화, 탁송 지연 방지 |
| 트리거 | 탁송 일정 조율 완료 후, 시스템이 물류 파트너에 배차 요청 |
| 선행조건 | 탁송 일정 확정 완료, 배차 대기 상태 |
| 주요 플로우 | 1. 시스템이 물류 파트너에 배차 요청 → 2. 탁송 기사 배정 → 3. 배차 확정 알림(딜러+탁송 기사) → 4. 배차 확정 이후 변경 제한(예외 시 위약금 부과) → 5. 탁송 전날 리마인드 알림 |
| 예외/오류 | 배차 불가 시 재배차 요청, 탁송 기사 배정 실패 시 재시도, 배차 확정 이후 변경 요청 시 위약금 정책 적용 |
| 출력 | 배차 확정 알림, 탁송 기사 정보, 탁송 일정 확정, 배차 확정 상태로 전이 |
| 달성기준(AC) | 배차 요청 처리 시간 10초 이내, 배차 확정 시간 2시간 이내, 리마인드 알림 정확도 100% |
| 관련 화면 | SCR-0600, SCR-0601 |
| 관련 API | API-0601(배차 조율), API-0602(배차 확정) |
| 관련 NFR | NFR-0300(외부 API 장애 대응), NFR-0302(알림 정확도) |
| 소스(근거 문서) | `기술설계 기능및 목표치.md` Section 4, `SSOT_딜러플랫폼_니즈.md` Section 7.5 |

### 10.7 FUNC-22: 인계 승인

| 필드명 | 내용 |
|---|---|
| FUNC-ID | FUNC-22 |
| 기능명 | 인계 승인 |
| 정의 | 딜러가 탁송 기사로부터 차량 상태 동일 확인서, 차키, 서류를 인계받고, 6자리 PIN 입력을 통해 인계를 승인하여 책임 이관을 완료하는 기능 |
| 목표 | 책임 이관 명확화, 거래 종료 이후 분쟁 최소화 |
| 트리거 | 딜러가 탁송 내역 화면(SCR-0601)에서 "인계 승인" 버튼 클릭 |
| 선행조건 | 탁송 기사가 차량 상태 동일 확인서 제출, 차키/서류 인계 완료, 인계 승인 대기 상태 |
| 주요 플로우 | 1. 차량 상태 동일 확인서 확인(사진 첨부) → 2. 차키 인계 확인 → 3. 서류 인계 확인(말소증 등) → 4. 6자리 PIN 입력 → 5. 인계 승인 처리(API-0603) → 6. 책임 이관 타임스탬프 기록 → 7. 인계 완료 알림(딜러+탁송 기사) → 8. Sold 상태로 전이 |
| 예외/오류 | 차량 상태 불일치 시 거부 및 재확인 요청, 차키/서류 미준비 시 재방문 일정 조율 또는 위약금 부과, PIN 오류 시 재입력 요청 |
| 출력 | 인계 승인 완료, 책임 이관 타임스탬프 기록, Sold 상태로 전이, 정산 완료 알림 트리거 |
| 달성기준(AC) | 인계 승인 처리 시간 3초 이내, PIN 입력 오류 허용 횟수 3회, 책임 이관 타임스탬프 정확도 100% |
| 관련 화면 | SCR-0601 |
| 관련 API | API-0603(인계 승인) |
| 관련 NFR | NFR-0303(데이터 무결성), NFR-0304(보안 로그) |
| 소스(근거 문서) | `기술설계 기능및 목표치.md` Section 4, `SSOT_딜러플랫폼_니즈.md` Section 7.5, Section 9(오픈 이슈: 인계 승인 방식) |

### 10.8 FUNC-23: 정산 완료 알림

| 필드명 | 내용 |
|---|---|
| FUNC-ID | FUNC-23 |
| 기능명 | 정산 완료 알림 |
| 정의 | 인계 승인 완료 후, 시스템이 딜러에게 정산 완료 알림을 자동으로 발송하는 기능 |
| 목표 | 거래 종료 명확화, "여기까지 오면 끝이다" 인식 제공 |
| 트리거 | 인계 승인 완료(FUNC-22 성공) 후, Sold 상태로 전이 시 자동 실행 |
| 선행조건 | 인계 승인 완료, Sold 상태로 전이 완료 |
| 주요 플로우 | 1. 인계 승인 완료 이벤트 수신 → 2. 정산 상세 정보 조회 → 3. 정산 완료 알림 생성(항목별 금액, 수수료, 환급액, 최종 입금액) → 4. 딜러에게 알림 발송(앱 푸시/이메일/SMS) → 5. 정산 완료 알림 기록 |
| 예외/오류 | 알림 발송 실패 시 재시도(최대 3회), 정산 정보 조회 실패 시 에러 로그 기록 |
| 출력 | 정산 완료 알림 발송, 정산 완료 알림 기록 |
| 달성기준(AC) | 알림 발송 처리 시간 5초 이내, 알림 발송 성공률 99% 이상, 재시도 처리 시간 1분 이내 |
| 관련 화면 | SCR-0105 |
| 관련 API | API-0604(정산 완료 알림 발송) |
| 관련 NFR | NFR-0302(알림 정확도), NFR-0305(알림 재시도) |
| 소스(근거 문서) | `기술설계 기능및 목표치.md` Section 4, `SSOT_딜러플랫폼_니즈.md` Section 8.4 |

> 주석: Phase 1 필수 기능만 우선 명세. 전체 기능 목록은 부록에 별도 표로 관리.

---

## 11. 기능-매핑-관계규칙 상세 정의

### 11.1 관계규칙 표준 정의

모든 기능(`FUNC-*`)은 다음 관계규칙을 준수하여 매핑되어야 한다.

#### 필수 연결 관계

| 관계 타입 | 연결 대상 | 설명 | 필수 여부 |
|---|---|---|---|
| UI 노출 | `SCR-*` | 기능이 노출되는 화면 ID | 필수 |
| 서버 트랜잭션 | `API-*` | 기능 실행 시 호출되는 API 엔드포인트 | 필수 |
| 데이터 엔터티 | `ENT-*` | 기능이 읽기/쓰기/불변성을 보장하는 엔터티 | 필수 |
| 상태 전이 | `STATE-*` / `EVT-*` | 기능 실행 시 발생하는 상태 전이 및 이벤트 | 선택(상태 변화 시 필수) |
| 비기능 요구 | `NFR-*` | 기능이 만족해야 하는 성능/동시성/장애/보안 요구 | 필수 |
| 권한 제어 | `RBAC-*` | 기능 실행에 필요한 역할×행위 권한 | 필수 |
| 감사 로그 | `LOG-*` | 기능 실행 시 기록되는 감사/보안 로그 | 필수 |

### 11.2 기능-매핑-관계규칙 매트릭스(Phase 1 핵심 기능)

| Function ID | Screen ID | API ID | Entity ID | State/Event ID | NFR ID | RBAC ID | Log ID | 비고 |
|---|---|---|---|---|---|---|---|---|
| FUNC-05 | SCR-0200 | API-0100 | ENT-01 | EVT-0100 | NFR-0100, NFR-0201 | RBAC-0100 | LOG-0100 | 등록원부 OCR |
| FUNC-15 | SCR-0300 | API-0300 | ENT-01, ENT-02 | EVT-0200 | NFR-0200 | RBAC-0100 | LOG-0200 | 판매 방식 변경 |
| FUNC-01 | SCR-0002 | API-0001 | ENT-03(Member-Dealer) | EVT-0100 | NFR-0300 | RBAC-0100 | LOG-0100 | 딜러 회원가입 |
| FUNC-02 | SCR-0003 | API-0002 | ENT-03 | EVT-0101 | NFR-0100, NFR-0300 | RBAC-0100 | LOG-0101 | 사업자 인증 |
| FUNC-05 | SCR-0200 | API-0100 | ENT-01(Vehicle) | EVT-0102 | NFR-0100, NFR-0201 | RBAC-0100 | LOG-0102 | 차량 등록(등록원부 OCR) |
| FUNC-06 | SCR-0201 | API-0101 | ENT-01 | EVT-0200 | NFR-0300 | RBAC-0100 | LOG-0200 | 검차 신청 |
| FUNC-07 | - | API-0102 | ENT-01 | EVT-0201 | NFR-0300 | RBAC-0100 | LOG-0201 | 평가사 배정(시스템 자동) |
| FUNC-08 | SCR-0202 | API-0103 | ENT-01 | EVT-0202 | NFR-0300 | RBAC-0300 | LOG-0202 | 검차 결과 업로드(평가사) |
| FUNC-15 | SCR-0300 | API-0300 | ENT-01, ENT-02(Auction) | EVT-0300 | NFR-0200 | RBAC-0100 | LOG-0300 | 판매 방식 변경 |
| FUNC-16 | SCR-0102 | API-0301 | ENT-02 | EVT-0301 | NFR-0200, NFR-0302 | RBAC-0100 | LOG-0301 | 일반 판매 제안 수락 |
| FUNC-17 | - | API-0302 | ENT-02 | EVT-0302 | NFR-0200 | RBAC-0200 | LOG-0302 | 바이어 최종 구매 의사 재확인(바이어 외부) |
| FUNC-18 | - | API-0200 | ENT-02 | EVT-0303 | NFR-0200 | RBAC-0200 | LOG-0303 | 경매 입찰(바이어 외부 시스템) |
| FUNC-19 | SCR-0400 | API-0201 | ENT-02 | EVT-0400 | NFR-0200, NFR-0202 | RBAC-0200 | LOG-0400 | 즉시구매(바이어 외부 시스템) |
| FUNC-20 | SCR-0600 | API-0600 | ENT-04(Logistics_Schedule) | EVT-0500 | NFR-0300, NFR-0301 | RBAC-0100 | LOG-0700 | 탁송 일정 조율 |
| FUNC-21 | SCR-0600, SCR-0601 | API-0601, API-0602 | ENT-04, ENT-05(Logistics_History) | EVT-0501 | NFR-0300, NFR-0302 | RBAC-0100 | LOG-0701 | 배차 조율 및 확정 |
| FUNC-22 | SCR-0601 | API-0603 | ENT-05 | EVT-0502 | NFR-0303, NFR-0304 | RBAC-0100 | LOG-0702 | 인계 승인 |
| FUNC-23 | SCR-0105 | API-0604 | ENT-06(Settlement) | EVT-0503 | NFR-0302, NFR-0305 | RBAC-0100 | LOG-0703 | 정산 완료 알림(시스템 자동) |

> 주석: 전체 기능의 매핑 매트릭스는 부록에 별도 표로 관리. Phase 1 진행 중 계속 확장됨.

### 11.3 RBAC(역할×행위) 매트릭스 정의

| 기능 ID | 딜러 | 바이어 | 평가사 | 관리자 | 시스템 | 비고 |
|---|---|---|---|---|---|---|
| FUNC-01(딜러 회원가입) | 실행 | - | - | 조회 | - | 딜러만 실행 가능 |
| FUNC-02(사업자 인증) | 실행 | - | - | 조회 | - | 딜러만 실행 가능 |
| FUNC-05(차량 등록) | 실행 | - | - | 조회 | - | 딜러만 실행 가능 |
| FUNC-06(검차 신청) | 실행 | - | - | 조회 | - | 딜러만 실행 가능 |
| FUNC-07(평가사 배정) | 조회 | - | - | 조회 | 실행 | 시스템 자동 |
| FUNC-08(검차 결과 업로드) | 조회 | - | 실행 | 조회 | - | 평가사만 업로드 가능 |
| FUNC-15(판매 방식 변경) | 실행 | - | - | 조회 | - | 딜러만 실행 가능 |
| FUNC-16(일반 판매 제안 수락) | 실행 | - | - | 조회 | - | 딜러만 실행 가능 |
| FUNC-17(바이어 최종 구매 의사 재확인) | 조회 | 실행 | - | 조회 | - | 바이어(기업)만 실행 가능(외부 시스템) |
| FUNC-18(경매 입찰) | 조회 | 실행 | - | 조회 | - | 바이어(기업)만 입찰 가능(외부 시스템) |
| FUNC-19(즉시구매) | 조회 | 실행 | - | 조회 | - | 바이어(기업)만 실행 가능(외부 시스템) |
| FUNC-20(탁송 일정 조율) | 실행 | - | - | 조회 | - | 딜러만 실행 가능 |
| FUNC-21(배차 조율 및 확정) | 조회 | - | - | 조회 | 실행 | 시스템/물류 자동 |
| FUNC-22(인계 승인) | 실행 | - | - | 조회 | - | 딜러만 실행 가능 |
| FUNC-23(정산 완료 알림) | 조회 | - | - | 조회 | 실행 | 시스템 자동 |

> 주석: 전체 RBAC 매트릭스는 부록에 별도 표로 관리. DecisionRef: D-003

### 11.4 데이터 마스킹 레벨 정의

| 데이터 타입 | 딜러 노출 | 바이어 노출 | 관리자 노출 | 마스킹 레벨 | 비고 |
|---|---|---|---|---|---|
| 바이어 연락처 | 마스킹 | 본인만(낙찰/제안 수락 바이어) | 원본 | Level 3(완전 마스킹) | DecisionRef: D-006, D-P1-004 |
| 최종 수출가(낙찰가, USD) | 마스킹 | 본인만(낙찰 바이어) | 원본 | Level 3(완전 마스킹) | DecisionRef: D-006, D-P1-004 |
| 딜러 연락처 | 원본 | 마스킹(낙찰/제안 수락 바이어만) | 원본 | Level 2(부분 마스킹) | DecisionRef: D-006, D-P1-004 |
| 경매 진행 중 가격(최고가/현재가) | 비노출 | 비노출 | 원본 | Level 3(완전 비노출) | DecisionRef: D-P1-004 |

> 주석: 전체 마스킹 규칙은 부록에 별도 표로 관리. DecisionRef: D-006

### 11.5 감사 로그 정책 정의

| 기능 ID | 로그 타입 | 기록 항목 | 보관 기간 | 비고 |
|---|---|---|---|---|
| FUNC-01 | 감사 로그 | 딜러 계정 정보, 가입 시간, IP 주소 | 3년 | 개인정보 포함 |
| FUNC-02 | 감사 로그 | 사업자등록증 정보, OCR 결과, 인증 시간 | 3년 | 개인정보 포함 |
| FUNC-05 | 감사 로그 | 차량번호, OCR 결과, 처리 시간 | 3년 | 개인정보 포함 |
| FUNC-06 | 감사 로그 | 검차 신청 정보, 희망 일정, 신청 시간 | 3년 | - |
| FUNC-08 | 보안 로그 | 검차 결과, 평가사 ID, 업로드 시간 | 3년 | 검차 기록 |
| FUNC-15 | 감사 로그 | 판매 방식 변경, 변경 전/후 상태, 변경 시간 | 3년 | 상태 변경 기록 |
| FUNC-16 | 보안 로그 | 제안 정보, 수락/거절 여부, 처리 시간 | 1년 | 거래 기록 |
| FUNC-18 | 보안 로그 | 입찰가, 입찰자 ID, 입찰 시간(내부 저장, 화면 비노출) | 1년 | 거래 기록 |
| FUNC-19 | 보안 로그 | 즉시구매가, 구매자 ID, 구매 시간 | 1년 | 거래 기록 |
| FUNC-20 | 감사 로그 | 탁송 일정 정보, 조율 요청 시간 | 1년 | 탁송 기록 |
| FUNC-21 | 감사 로그 | 배차 정보, 탁송 기사 정보, 확정 시간 | 1년 | 탁송 기록 |
| FUNC-22 | 보안 로그 | 인계 승인 정보, PIN 입력 시도, 책임 이관 타임스탬프 | 3년 | 책임 이관 기록 |
| FUNC-23 | 감사 로그 | 정산 완료 알림 발송 정보, 발송 시간 | 1년 | 알림 기록 |

> 주석: 전체 감사 로그 정책은 부록에 별도 표로 관리.

---

## 12. NFR: 비기능 요구사항

### 12.1 디자인 시스템 (Design System)

ForwardMax의 디자인 시스템은 **"Professional & High-Density"**를 지향하며, Dark Mode를 기본으로 하여 데이터의 가독성과 몰입감을 극대화한다.

#### 1. Color Palette (Dark Mode)

| 역할 | 색상명 | Hex Code | 사용 가이드 |
|---|---|---|---|
| **Background** | **Dark Navy** | `#0E162B` | 메인 배경색. 깊이감 있는 전문성 전달 |
| **Surface** | **Light Navy** | `#1A233A` | 카드, 모달, 헤더 배경 (배경 대비 +5~8% 명도) |
| **Key Color** | **Royal Blue** | `#373EEF` | Primary Action (버튼, 활성 탭, 링크). 신뢰와 명확성 |
| **Sub Color** | **Cyan** | `#00F0FF` | Accent (아이콘, 그라디언트, 강조 텍스트). 디지털/미래적 감성 |
| **Text (Primary)** | **White** | `#FFFFFF` | Heading, 주요 본문 (가독성 최우선) |
| **Text (Secondary)** | **Gray 200** | `#E0E0E0` | 보조 본문, 설명 텍스트 |
| **Text (Tertiary)** | **Gray 500** | `#A0A0A0` | 캡션, 플레이스홀더, 비활성 텍스트 |
| **Semantic** | **Success** | `#00E096` | 성공, 수익, 긍정적 상태 (Neon Green) |
| **Semantic** | **Error** | `#FF4B4B` | 오류, 위험, 거절 (Neon Red) |

#### 2. Grid & Layout System

| 항목 | 스펙 (PC 기준) | 스펙 (Mobile 기준) | 비고 |
|---|---|---|---|
| **Container** | Max-width `1440px` | `100%` (Padding `16px`) | 중앙 정렬 (Center Align) |
| **Columns** | `12 Columns` | `4 Columns` | 유연한 레이아웃 대응 |
| **Gutter** | `24px` | `16px` | 컬럼 간 간격 |
| **Main Structure** | **4-Column Layout** | **1-Column Layout** | 메인 대시보드 및 카드 그리드 기본 구조 (25% Width) |
| **Section Margin** | `80px ~ 120px` | `40px ~ 60px` | 섹션 간 여유로운 호흡 유지 |
| **Card Internal Padding** | `20px` | `16px` | 카드 내부 여백 |
| **Border Radius** | `16px` (Cards), `8px` (Buttons) | `12px` (Cards), `6px` (Buttons) | 모서리 둥글기 |

- **Layout 원칙**: 모든 배치는 **짝수 컬럼(2, 4, 6, 12)**을 기본으로 하여 안정감을 부여한다. (홀수 컬럼 배치 지양)
- **4-Column Structure**: 주요 정보(차량 카드, 통계 등)는 한 줄에 4개 배치를 기본으로 한다.
- **Spacing System**: 24px Gutter (Desktop) / 20px Card Internal Padding

#### 3. Typography System

**Font Family**: `Pretendard` (Web), `System UI` (Mobile App fallback)

**UI 언어**: KR (고유명사/H1 제외)

**특수 타이포그래피**:
- **H1_HERO**: "MAXIMIZE YOUR EXPORT PROFIT" (Landing Page Hero)
- **H1_SIGNUP**: "JOIN FORWARDMAX" (Signup Page Hero)

| 레벨 | 용도 | Size (PC) | Size (Mobile) | Weight | Line Height |
|---|---|---|---|---|---|
| **Display** | Hero Title, Landing Main | `64px` | `48px` | **Bold (700)** | 1.2 |
| **H1** | Page Title | `40px` | `32px` | **Bold (700)** | 1.3 |
| **H2** | Section Title | `32px` | `24px` | **SemiBold (600)** | 1.35 |
| **H3** | Card Title, Sub-section | `24px` | `20px` | **Medium (500)** | 1.4 |
| **Body 1** | Main Content | `16px` | `16px` | Regular (400) | 1.5 |
| **Body 2** | Sub Content, List | `14px` | `14px` | Regular (400) | 1.5 |
| **Caption** | Meta data, Label | `12px` | `12px` | Regular (400) | 1.5 |

#### 4. Component UI Specs (Reference Analysis)

- **Header**:
  - Height: `80px` (Fixed/Sticky)
  - Background: `#0E162B` (or `#1A233A` with opacity)
  - Layout: Logo (Left) - GNB (Center) - Util/Auth (Right)
  - Padding: Container width 기준 적용

- **Hero Section**:
  - Layout: Split (Left: Text & CTA / Right: Visual) or Center Aligned
  - Visual: Car Image Vector/Photo (Right Aligned or Overlapped)
  - Search Bar: Hero 하단 걸침(Overlapping) 또는 중앙 배치. 강조된 Shadow 적용.

- **Cards (Car Item)**:
  - Background: `#1A233A`
  - Radius: `16px`
  - Padding: `24px`
  - Interaction: Hover 시 `Translate Y -4px`, `Shadow` 강화, Border `#373EEF` 적용

- **Buttons**:
  - Primary: BG `#373EEF`, Text `#FFFFFF`, Radius `8px` (Full Rounded 지양, Slightly Rounded)
  - Secondary: Border `#373EEF`, Text `#373EEF`, BG `Transparent`
  - Height: `48px` (Standard), `56px` (Large)

### 12.2 NFR-0100: OCR 성능

| 필드명 | 내용 |
|---|---|
| NFR-ID | NFR-0100 |
| 요구사항명 | OCR 성능 |
| 정의 | 등록원부 OCR 처리 시간 및 정확도 요구사항 |
| 목표 | 딜러 대기 시간 최소화, 정보 정확도 보장 |
| 조건 | 등록원부 OCR API 호출 시 |
| 달성기준 | OCR 처리 시간 3초 이내, 텍스트 추출 정확도 95% 이상 |
| 관련 기능 | FUNC-05 |
| 관련 화면 | SCR-0200 |
| 소스(근거 문서) | 결정 D-P1-002, `통합설계명세서_1.md` Section 9.2 |

### 12.3 NFR-0200: 동시성 제어

| 필드명 | 내용 |
|---|---|
| NFR-ID | NFR-0200 |
| 요구사항명 | 동시성 제어 |
| 정의 | 경매 입찰 및 즉시구매 시 동시 요청 처리 정확도 |
| 목표 | 중복 낙찰 방지, 데이터 무결성 보장 |
| 조건 | 경매 입찰(FUNC-18), 즉시구매(FUNC-19) 실행 시 |
| 달성기준 | 동시 입찰/즉시구매 처리 정확도 100%, 낙관적 락 또는 원자적 트랜잭션 적용 |
| 관련 기능 | FUNC-18, FUNC-19 |
| 관련 화면 | SCR-0400 |
| 소스(근거 문서) | 결정 D-P1-004, `통합설계명세서_1.md` Section 9.2 |

### 12.4 NFR-0101: 경매 낙찰 처리 성능

| 필드명 | 내용 |
|---|---|
| NFR-ID | NFR-0101 |
| 요구사항명 | 경매 낙찰 처리 성능 |
| 정의 | 경매 종료 시 낙찰 처리 및 당사자 공개 지연 시간 |
| 목표 | 낙찰 처리 및 당사자 공개 신속성 보장 |
| 조건 | 경매 종료 시점, 낙찰 처리 완료 후 |
| 달성기준 | 낙찰 처리 시간 3초 이내, 당사자 공개 지연 1초 이내 |
| 관련 기능 | FUNC-18 |
| 관련 화면 | SCR-0400 |
| 소스(근거 문서) | 결정 D-P1-004 |

### 12.5 NFR-0201: 외부 API 장애 대응

| 필드명 | 내용 |
|---|---|
| NFR-ID | NFR-0201 |
| 요구사항명 | 외부 API 장애 대응 |
| 정의 | 등록원부 OCR 등 외부 API 장애 시 대체 경로 및 사용자 안내 |
| 목표 | 서비스 중단 최소화, 사용자 경험 유지 |
| 조건 | 외부 API 호출 실패 시 |
| 달성기준 | 장애 발생 시 수동 입력 옵션 제공, 재시도 버튼 제공, 사용자 알림 3초 이내 |
| 관련 기능 | FUNC-05 |
| 관련 화면 | SCR-0200 |
| 소스(근거 문서) | 결정 D-P1-002, `통합설계명세서_1.md` Section 16.2(D-010) |

### 12.6 NFR-0202: 원자성 보장

| 필드명 | 내용 |
|---|---|
| NFR-ID | NFR-0202 |
| 요구사항명 | 원자성 보장 |
| 정의 | 즉시구매 시 동시 요청 중 첫 번째 요청만 성공하도록 보장 |
| 목표 | 중복 구매 방지, 데이터 무결성 보장 |
| 조건 | 즉시구매(FUNC-19) 실행 시 |
| 달성기준 | 동시 즉시구매 요청 처리 시 첫 번째 요청만 성공, 나머지는 "이미 구매됨" 오류 반환 |
| 관련 기능 | FUNC-19 |
| 관련 화면 | - (바이어 화면은 본 웹앱에서 미제공) |
| 소스(근거 문서) | 결정 D-P1-003 |

> 주석: Phase 1 필수 NFR만 우선 명세. 전체 NFR 목록은 부록에 별도 표로 관리.

---

## 13. TSD: 기술 설계

### 13.1 기술 아키텍처 스택 (Phase 1 MVP)

#### Frontend 기술 스택

| 항목 | 기술 | 버전/스펙 | 비고 |
|---|---|---|---|
| **빌드 도구** | Vite | Latest | 빠른 개발 서버 및 빌드 |
| **언어** | TypeScript | Latest | 타입 안정성 보장 |
| **UI 프레임워크** | React | Latest | 컴포넌트 기반 UI |
| **스타일링** | Tailwind CSS | Latest | Dark Mode Primary (Utility-first) |
| **상태 관리** | React Context / Zustand | Latest | 다단계 폼을 위한 상태 관리 |

#### Backend (GCP) 기술 스택

| 항목 | 서비스 | 용도 | 비고 |
|---|---|---|---|
| **호스팅** | Firebase Hosting | 정적 파일 호스팅 | CDN 자동 적용 |
| **서버리스 함수** | Cloud Functions (Node.js) | Gemini API & 비즈니스 로직 | 이벤트 기반 실행 |
| **컨테이너** | Cloud Run | 무거운 처리 작업 | 확장성 및 유연성 |
| **시크릿 관리** | GCP Secret Manager | API 키 관리 | 보안 강화 |

#### 데이터 저장소

| 항목 | 서비스 | 용도 | 비고 |
|---|---|---|---|
| **데이터베이스** | Firestore | 실시간 동기화 | Trade/Inspection 상태 실시간 업데이트 |
| **파일 저장소** | Firebase Storage | 미디어 최적화 및 CDN | 이미지/비디오 저장 및 최적화 |

#### Firebase 프로젝트 설정 정보

**프로젝트 ID**: `carivdealer`  
**프로젝트 번호**: `850300267700`  
**초기화 완료일**: 2025-12-28

**Firebase Web App 설정**:
```javascript
const firebaseConfig = {
  apiKey: "AIzaSyAX4zD8yWbJN6jLubOtLzSJtJsLqO5saW0",
  authDomain: "carivdealer.firebaseapp.com",
  projectId: "carivdealer",
  storageBucket: "carivdealer.firebasestorage.app",
  messagingSenderId: "850300267700",
  appId: "1:850300267700:web:60812e374759ac57903be1",
  measurementId: "G-ET5Q9986GQ"
};
```

**Firebase 서비스 상태**:
- ✅ Firebase Analytics: 활성화 (`G-ET5Q9986GQ`)
- ✅ Firebase Authentication: 활성화 (`carivdealer.firebaseapp.com`)
- ✅ Firebase Storage: 활성화 및 버킷 생성 완료 (`carivdealer.firebasestorage.app`)
- ✅ Firestore: 데이터베이스 생성 완료 (Native 모드, `asia-northeast3`)
- ✅ Firebase Hosting: 준비 완료

**Firebase 리소스 생성 완료 상태 (2025-12-28 확인)**:

| 리소스 | 상태 | 상세 정보 |
|---|---|---|
| **Firestore 데이터베이스** | ✅ 생성 완료 | Type: `FIRESTORE_NATIVE`<br>Location: `asia-northeast3`<br>State: `READY`<br>생성일: 2025-12-28T14:26:42 |
| **Firebase Storage 버킷** | ✅ 생성 완료 | Bucket: `carivdealer.firebasestorage.app`<br>Location: `ASIA-NORTHEAST3`<br>Storage Class: `REGIONAL`<br>생성일: 2025-12-28T14:49:16 |

**확인 완료일**: 2025-12-28  
**확인자**: 6siegfriex@argo.ai.kr

#### 인증 및 AI

| 항목 | 서비스 | 용도 | 비고 |
|---|---|---|---|
| **인증** | Firebase Anonymous Auth | MVP 테스트 플로우 | Phase 1 MVP용 간소화 인증 |
| **AI 모델** | Gemini 1.5 Pro | OCR, 시장 분석, 검차 데이터 추출 | 멀티모달 AI 처리 |

### 13.1.1 GCP API 활성화 상태 (2025-12-28 기준)

**프로젝트 ID**: `carivdealer`  
**프로젝트 네이밍**: `carivdealer`  
**활성화 확인일**: 2025-12-28

#### 필수 API 활성화 현황

| API 이름 | API ID | 상태 | 용도 |
|---|---|---|---|
| **Firebase Hosting API** | `firebasehosting.googleapis.com` | ✅ 활성화 | 정적 파일 호스팅 (CDN) |
| **Identity Toolkit API** | `identitytoolkit.googleapis.com` | ✅ 활성화 | Firebase Authentication |
| **Cloud Firestore API** | `firestore.googleapis.com` | ✅ 활성화 | 실시간 데이터베이스 |
| **Cloud Storage** | `storage-component.googleapis.com` | ✅ 활성화 | Firebase Storage (미디어 저장) |
| **Cloud Functions API** | `cloudfunctions.googleapis.com` | ✅ 활성화 | 서버리스 함수 실행 |
| **Cloud Run Admin API** | `run.googleapis.com` | ✅ 활성화 | 컨테이너 서버리스 실행 |
| **Cloud Build API** | `cloudbuild.googleapis.com` | ✅ 활성화 | 빌드 및 배포 |
| **Cloud Resource Manager API** | `cloudresourcemanager.googleapis.com` | ✅ 활성화 | 리소스 관리 |
| **Generative Language API** | `generativelanguage.googleapis.com` | ✅ 활성화 | Gemini 1.5 Pro (OCR, 분석) |
| **Secret Manager API** | `secretmanager.googleapis.com` | ✅ 활성화 | API 키 및 시크릿 관리 |
| **Cloud Logging API** | `logging.googleapis.com` | ✅ 활성화 | 애플리케이션 로그 수집 |
| **Cloud Monitoring API** | `monitoring.googleapis.com` | ✅ 활성화 | 성능 모니터링 |
| **IAM API** | `iam.googleapis.com` | ✅ 활성화 | 리소스 접근 제어 |
| **Service Usage API** | `serviceusage.googleapis.com` | ✅ 활성화 | API 활성화 관리 |

**필수 API 활성화 완료율**: **14/14 (100%)** ✅

#### 추가 활성화된 API (선택/자동 활성화)

| API 이름 | API ID | 상태 | 용도 |
|---|---|---|---|
| **Firebase Management API** | `firebase.googleapis.com` | ✅ 활성화 | Firebase 프로젝트 관리 |
| **Firebase Rules API** | `firebaserules.googleapis.com` | ✅ 활성화 | Firestore Security Rules 관리 |
| **Cloud Pub/Sub API** | `pubsub.googleapis.com` | ✅ 활성화 | 비동기 메시징 (선택) |
| **Google Cloud Storage JSON API** | `storage-api.googleapis.com` | ✅ 활성화 | Cloud Storage 직접 접근 |
| **Cloud Storage API** | `storage.googleapis.com` | ✅ 활성화 | Cloud Storage 관리 |
| **Cloud Trace API** | `cloudtrace.googleapis.com` | ✅ 활성화 | 분산 추적 (선택) |
| **Container Registry API** | `containerregistry.googleapis.com` | ✅ 활성화 | 컨테이너 이미지 저장소 |
| **Artifact Registry API** | `artifactregistry.googleapis.com` | ✅ 활성화 | 아티팩트 저장소 |
| **Cloud Datastore API** | `datastore.googleapis.com` | ✅ 활성화 | Datastore (레거시, 선택) |
| **IAM Service Account Credentials API** | `iamcredentials.googleapis.com` | ✅ 활성화 | 서비스 계정 자격 증명 |
| **Service Management API** | `servicemanagement.googleapis.com` | ✅ 활성화 | 서비스 관리 |
| **Web Security Scanner API** | `websecurityscanner.googleapis.com` | ✅ 활성화 | 보안 스캔 (선택) |

#### BigQuery 관련 API (활성화됨, Phase 1 미사용)

| API 이름 | API ID | 상태 | 비고 |
|---|---|---|---|
| **BigQuery API** | `bigquery.googleapis.com` | ✅ 활성화 | Phase 2 이후 데이터 분석용 |
| **BigQuery Connection API** | `bigqueryconnection.googleapis.com` | ✅ 활성화 | Phase 2 이후 |
| **BigQuery Data Transfer API** | `bigquerydatatransfer.googleapis.com` | ✅ 활성화 | Phase 2 이후 |
| **BigQuery Storage API** | `bigquerystorage.googleapis.com` | ✅ 활성화 | Phase 2 이후 |

> 주석: BigQuery 관련 API는 Phase 1에서 사용하지 않으나, 향후 데이터 분석 및 리포트 기능 확장 시 활용 예정.

#### API 활성화 확인 명령어

```bash
# 활성화된 API 목록 확인
gcloud services list --enabled --project=carivdealer

# 특정 API 활성화 여부 확인
gcloud services list --enabled --project=carivdealer --filter="name:firestore.googleapis.com"
```

### 13.1.2 Firebase 리소스 설정 및 확인 (프로덕션 모드)

**프로젝트 ID**: `carivdealer`  
**프로젝트 번호**: `850300267700`  
**설정일**: 2025-12-28

#### Firebase 프로젝트 초기화 상태

**Firebase Web App 설정 정보**:
- **API Key**: `AIzaSyAX4zD8yWbJN6jLubOtLzSJtJsLqO5saW0`
- **Auth Domain**: `carivdealer.firebaseapp.com`
- **Project ID**: `carivdealer`
- **Storage Bucket**: `carivdealer.firebasestorage.app`
- **Messaging Sender ID**: `850300267700`
- **App ID**: `1:850300267700:web:60812e374759ac57903be1`
- **Measurement ID**: `G-ET5Q9986GQ` (Analytics)

**활성화된 Firebase 서비스**:
- ✅ Firebase Analytics
- ✅ Firebase Authentication
- ✅ Firebase Storage
- ✅ Firestore (생성 완료)

#### Firestore 데이터베이스 생성 및 확인

**프로덕션 모드 설정** (Native 모드 권장):

```bash
# 프로젝트 설정 확인
gcloud config set project carivdealer

# Firestore 데이터베이스 상태 확인
gcloud firestore databases list --project=carivdealer

# 데이터베이스가 없으면 생성 (Native 모드)
gcloud firestore databases create \
  --location=asia-northeast3 \
  --type=firestore-native \
  --project=carivdealer

# 데이터베이스 상세 정보 확인
gcloud firestore databases describe --database="(default)" --project=carivdealer
```

**생성 완료 상태 (2025-12-28 확인)**:
- ✅ Location: `asia-northeast3` (서울)
- ✅ Type: `FIRESTORE_NATIVE`
- ✅ State: `READY`
- ✅ 생성일: 2025-12-28T14:26:42
- ✅ Realtime Updates: `ENABLED`
- ✅ Free Tier: `true`

#### Firebase Storage 버킷 확인

**기본 Storage Bucket**: `carivdealer.firebasestorage.app`

```bash
# Storage 버킷 목록 확인
gsutil ls -p carivdealer

# 기본 버킷 상세 정보 확인
gsutil ls -L -b gs://carivdealer.firebasestorage.app

# 버킷 IAM 정책 확인
gsutil iam get gs://carivdealer.firebasestorage.app
```

**생성 완료 상태 (2025-12-28 확인)**:
- ✅ Bucket: `carivdealer.firebasestorage.app`
- ✅ Location: `ASIA-NORTHEAST3` (서울)
- ✅ Storage Class: `REGIONAL`
- ✅ 생성일: 2025-12-28T14:49:16
- ✅ Bucket Policy Only: `enabled` (IAM 정책 사용)
- ✅ Public Access Prevention: `inherited` (보안 강화)

#### Firebase 프로젝트 초기화 확인

```bash
# Firebase CLI 설치 확인
firebase --version

# Firebase 로그인 상태 확인
firebase login:list

# 프로젝트 연결 확인
firebase projects:list

# 현재 프로젝트 확인
firebase use carivdealer
```

#### Firebase 설정 완료 체크리스트

- [x] Firestore 데이터베이스 생성 확인 ✅ (2025-12-28 완료)
- [x] Firebase Storage 버킷 접근 확인 ✅ (2025-12-28 완료)
- [x] Firebase Authentication 설정 확인 ✅ (활성화됨)
- [x] Firebase Analytics 활성화 확인 ✅ (`G-ET5Q9986GQ`)
- [ ] Firestore Security Rules 설정 (다음 단계)
- [ ] Firebase Storage Security Rules 설정 (다음 단계)
- [ ] Secret Manager 시크릿 생성 (Gemini API 키 등)

### 13.1.3 서비스 계정 네이밍 원칙 및 생성 가이드

**프로젝트 ID**: `carivdealer`  
**프로젝트 네이밍**: `carivdealer`  
**작성일**: 2025-12-28  
**생성 완료일**: 2025-12-28  
**생성 상태**: ✅ **완료 (10/10 서비스 계정 생성 및 IAM 역할 부여 완료)**

#### 서비스 계정 네이밍 원칙

1. **형식**: `{service}-{role}@{project}.iam.gserviceaccount.com`
   - `{service}`: 서비스명 (소문자, 하이픈 사용)
   - `{role}`: 역할 (admin, executor, accessor, user, writer 등)
   - `{project}`: 프로젝트 ID (`carivdealer`)

2. **네이밍 규칙**:
   - 소문자만 사용
   - 단어 구분은 하이픈(`-`) 사용
   - 최대 30자 이내 (GCP 제한)
   - 역할은 명확하게 구분 (admin, executor, accessor, user, writer)

3. **역할 분류**:
   - `admin`: 전체 관리 권한
   - `executor`: 실행 권한 (Cloud Functions, Cloud Run)
   - `accessor`: 읽기/접근 권한
   - `user`: 사용 권한
   - `writer`: 쓰기 권한
   - `deploy`: 배포 권한

#### Phase 1 MVP 필수 서비스 계정 목록

| 서비스 계정 ID | 표시명 | 용도 | IAM 역할 | 상태 |
|---|---|---|---|---|
| `firebase-hosting-deploy@carivdealer.iam.gserviceaccount.com` | Firebase Hosting Deploy | 정적 파일 배포 | `roles/firebasehosting.admin` | ✅ 생성 완료 |
| `cloud-functions-executor@carivdealer.iam.gserviceaccount.com` | Cloud Functions Executor | 서버리스 함수 실행 | `roles/cloudfunctions.invoker` | ✅ 생성 완료 |
| `cloud-run-executor@carivdealer.iam.gserviceaccount.com` | Cloud Run Executor | 컨테이너 실행 | `roles/run.invoker` | ✅ 생성 완료 |
| `firestore-admin@carivdealer.iam.gserviceaccount.com` | Firestore Admin | 데이터베이스 관리 | `roles/datastore.user` | ✅ 생성 완료 |
| `storage-admin@carivdealer.iam.gserviceaccount.com` | Storage Admin | 파일 저장소 관리 | `roles/storage.admin` | ✅ 생성 완료 |
| `secret-manager-accessor@carivdealer.iam.gserviceaccount.com` | Secret Manager Accessor | 시크릿 읽기 | `roles/secretmanager.secretAccessor` | ✅ 생성 완료 |
| `gemini-api-user@carivdealer.iam.gserviceaccount.com` | Gemini API User | Gemini API 호출 | `roles/aiplatform.user` | ✅ 생성 완료 |
| `cloud-build-executor@carivdealer.iam.gserviceaccount.com` | Cloud Build Executor | 빌드 및 배포 | `roles/cloudbuild.builds.builder` | ✅ 생성 완료 |
| `logging-writer@carivdealer.iam.gserviceaccount.com` | Logging Writer | 로그 쓰기 | `roles/logging.logWriter` | ✅ 생성 완료 |
| `monitoring-writer@carivdealer.iam.gserviceaccount.com` | Monitoring Writer | 모니터링 메트릭 쓰기 | `roles/monitoring.metricWriter` | ✅ 생성 완료 |

**총 10개 서비스 계정** (모두 필수) - **생성 및 IAM 역할 부여 완료 (100%)**

#### 통합 런타임 서비스 계정 (프로토타입용)

**프로토타입 단계 전략**: 최소 권한 원칙을 폐기하고, 오류 발생을 최소화하기 위해 충분한 권한을 부여한 통합 서비스 계정을 사용합니다.

| 서비스 계정 ID | 표시명 | 용도 | IAM 역할 | 상태 |
|---|---|---|---|---|
| `cloud-runtime-unified@carivdealer.iam.gserviceaccount.com` | Cloud Runtime Unified | Cloud Functions/Run 통합 런타임 | `roles/datastore.user`<br>`roles/storage.admin`<br>`roles/secretmanager.secretAccessor`<br>`roles/aiplatform.user`<br>`roles/logging.logWriter`<br>`roles/monitoring.metricWriter`<br>`roles/cloudfunctions.invoker`<br>`roles/run.invoker` | ✅ 생성 완료 |

**생성 완료일**: 2025-12-28  
**용도**: 모든 Cloud Functions 및 Cloud Run 서비스에서 공통으로 사용하는 통합 런타임 서비스 계정  
**전략**: 프로토타입 단계에서는 단일 서비스 계정으로 통합 관리하여 권한 오류를 최소화

**부여된 권한 상세**:
- **Firestore**: `roles/datastore.user` - 데이터베이스 읽기/쓰기
- **Storage**: `roles/storage.admin` - 파일 저장소 전체 관리
- **Secret Manager**: `roles/secretmanager.secretAccessor` - 시크릿 읽기
- **Gemini API**: `roles/aiplatform.user` - AI API 호출
- **Logging**: `roles/logging.logWriter` - 로그 쓰기
- **Monitoring**: `roles/monitoring.metricWriter` - 메트릭 쓰기
- **Cloud Functions**: `roles/cloudfunctions.invoker` - 함수 호출
- **Cloud Run**: `roles/run.invoker` - 서비스 호출

**사용 방법**:
- Cloud Functions 배포 시: `--service-account cloud-runtime-unified@carivdealer.iam.gserviceaccount.com`
- Cloud Run 배포 시: `--service-account cloud-runtime-unified@carivdealer.iam.gserviceaccount.com`

#### 서비스 계정 일괄 생성 명령어

```bash
#!/bin/bash
# GCP 프로젝트 설정
PROJECT_ID="carivdealer"
PROJECT_NUMBER=$(gcloud projects describe ${PROJECT_ID} --format="value(projectNumber)")

echo "=========================================="
echo "GCP 서비스 계정 일괄 생성 스크립트"
echo "프로젝트: ${PROJECT_ID}"
echo "=========================================="
echo ""

# 1. Firebase Hosting Deploy
echo "[1/10] Firebase Hosting Deploy 서비스 계정 생성 중..."
gcloud iam service-accounts create firebase-hosting-deploy \
  --description="Firebase Hosting 배포용 서비스 계정" \
  --display-name="Firebase Hosting Deploy" \
  --project=${PROJECT_ID}

gcloud projects add-iam-policy-binding ${PROJECT_ID} \
  --member="serviceAccount:firebase-hosting-deploy@${PROJECT_ID}.iam.gserviceaccount.com" \
  --role="roles/firebasehosting.admin" \
  --condition=None

# 2. Cloud Functions Executor
echo "[2/10] Cloud Functions Executor 서비스 계정 생성 중..."
gcloud iam service-accounts create cloud-functions-executor \
  --description="Cloud Functions 실행용 서비스 계정" \
  --display-name="Cloud Functions Executor" \
  --project=${PROJECT_ID}

gcloud projects add-iam-policy-binding ${PROJECT_ID} \
  --member="serviceAccount:cloud-functions-executor@${PROJECT_ID}.iam.gserviceaccount.com" \
  --role="roles/cloudfunctions.invoker" \
  --condition=None

# 3. Cloud Run Executor
echo "[3/10] Cloud Run Executor 서비스 계정 생성 중..."
gcloud iam service-accounts create cloud-run-executor \
  --description="Cloud Run 실행용 서비스 계정" \
  --display-name="Cloud Run Executor" \
  --project=${PROJECT_ID}

gcloud projects add-iam-policy-binding ${PROJECT_ID} \
  --member="serviceAccount:cloud-run-executor@${PROJECT_ID}.iam.gserviceaccount.com" \
  --role="roles/run.invoker" \
  --condition=None

# 4. Firestore Admin
echo "[4/10] Firestore Admin 서비스 계정 생성 중..."
gcloud iam service-accounts create firestore-admin \
  --description="Firestore 데이터베이스 관리용 서비스 계정" \
  --display-name="Firestore Admin" \
  --project=${PROJECT_ID}

gcloud projects add-iam-policy-binding ${PROJECT_ID} \
  --member="serviceAccount:firestore-admin@${PROJECT_ID}.iam.gserviceaccount.com" \
  --role="roles/datastore.user" \
  --condition=None

# 5. Storage Admin
echo "[5/10] Storage Admin 서비스 계정 생성 중..."
gcloud iam service-accounts create storage-admin \
  --description="Cloud Storage 관리용 서비스 계정" \
  --display-name="Storage Admin" \
  --project=${PROJECT_ID}

gcloud projects add-iam-policy-binding ${PROJECT_ID} \
  --member="serviceAccount:storage-admin@${PROJECT_ID}.iam.gserviceaccount.com" \
  --role="roles/storage.admin" \
  --condition=None

# 6. Secret Manager Accessor
echo "[6/10] Secret Manager Accessor 서비스 계정 생성 중..."
gcloud iam service-accounts create secret-manager-accessor \
  --description="Secret Manager 시크릿 접근용 서비스 계정" \
  --display-name="Secret Manager Accessor" \
  --project=${PROJECT_ID}

gcloud projects add-iam-policy-binding ${PROJECT_ID} \
  --member="serviceAccount:secret-manager-accessor@${PROJECT_ID}.iam.gserviceaccount.com" \
  --role="roles/secretmanager.secretAccessor" \
  --condition=None

# 7. Gemini API User
echo "[7/10] Gemini API User 서비스 계정 생성 중..."
gcloud iam service-accounts create gemini-api-user \
  --description="Gemini API 호출용 서비스 계정" \
  --display-name="Gemini API User" \
  --project=${PROJECT_ID}

gcloud projects add-iam-policy-binding ${PROJECT_ID} \
  --member="serviceAccount:gemini-api-user@${PROJECT_ID}.iam.gserviceaccount.com" \
  --role="roles/aiplatform.user" \
  --condition=None

# 8. Cloud Build Executor
echo "[8/10] Cloud Build Executor 서비스 계정 생성 중..."
gcloud iam service-accounts create cloud-build-executor \
  --description="Cloud Build 빌드 및 배포용 서비스 계정" \
  --display-name="Cloud Build Executor" \
  --project=${PROJECT_ID}

gcloud projects add-iam-policy-binding ${PROJECT_ID} \
  --member="serviceAccount:cloud-build-executor@${PROJECT_ID}.iam.gserviceaccount.com" \
  --role="roles/cloudbuild.builds.builder" \
  --condition=None

# 9. Logging Writer
echo "[9/10] Logging Writer 서비스 계정 생성 중..."
gcloud iam service-accounts create logging-writer \
  --description="Cloud Logging 로그 쓰기용 서비스 계정" \
  --display-name="Logging Writer" \
  --project=${PROJECT_ID}

gcloud projects add-iam-policy-binding ${PROJECT_ID} \
  --member="serviceAccount:logging-writer@${PROJECT_ID}.iam.gserviceaccount.com" \
  --role="roles/logging.logWriter" \
  --condition=None

# 10. Monitoring Writer
echo "[10/10] Monitoring Writer 서비스 계정 생성 중..."
gcloud iam service-accounts create monitoring-writer \
  --description="Cloud Monitoring 메트릭 쓰기용 서비스 계정" \
  --display-name="Monitoring Writer" \
  --project=${PROJECT_ID}

gcloud projects add-iam-policy-binding ${PROJECT_ID} \
  --member="serviceAccount:monitoring-writer@${PROJECT_ID}.iam.gserviceaccount.com" \
  --role="roles/monitoring.metricWriter" \
  --condition=None

echo ""
echo "=========================================="
echo "서비스 계정 생성 완료!"
echo "=========================================="
echo ""
echo "생성된 서비스 계정 목록:"
gcloud iam service-accounts list --project=${PROJECT_ID} --filter="email:*-deploy@ OR email:*-executor@ OR email:*-admin@ OR email:*-accessor@ OR email:*-user@ OR email:*-writer@"
```

#### 서비스 계정 생성 확인 명령어

```bash
# 프로젝트 설정
gcloud config set project carivdealer

# 생성된 서비스 계정 목록 확인
gcloud iam service-accounts list --project=carivdealer

# 필수 서비스 계정만 필터링하여 확인
gcloud iam service-accounts list --project=carivdealer \
  --filter="email:firebase-hosting-deploy@ OR email:cloud-functions-executor@ OR email:cloud-run-executor@ OR email:firestore-admin@ OR email:storage-admin@ OR email:secret-manager-accessor@ OR email:gemini-api-user@ OR email:cloud-build-executor@ OR email:logging-writer@ OR email:monitoring-writer@" \
  --format="table(email,displayName)"

# 특정 서비스 계정 상세 정보 확인
gcloud iam service-accounts describe firebase-hosting-deploy@carivdealer.iam.gserviceaccount.com --project=carivdealer

# 모든 필수 서비스 계정의 IAM 역할 확인
gcloud projects get-iam-policy carivdealer \
  --flatten="bindings[].members" \
  --filter="bindings.members:serviceAccount:firebase-hosting-deploy@carivdealer.iam.gserviceaccount.com OR bindings.members:serviceAccount:cloud-functions-executor@carivdealer.iam.gserviceaccount.com OR bindings.members:serviceAccount:cloud-run-executor@carivdealer.iam.gserviceaccount.com OR bindings.members:serviceAccount:firestore-admin@carivdealer.iam.gserviceaccount.com OR bindings.members:serviceAccount:storage-admin@carivdealer.iam.gserviceaccount.com OR bindings.members:serviceAccount:secret-manager-accessor@carivdealer.iam.gserviceaccount.com OR bindings.members:serviceAccount:gemini-api-user@carivdealer.iam.gserviceaccount.com OR bindings.members:serviceAccount:cloud-build-executor@carivdealer.iam.gserviceaccount.com OR bindings.members:serviceAccount:logging-writer@carivdealer.iam.gserviceaccount.com OR bindings.members:serviceAccount:monitoring-writer@carivdealer.iam.gserviceaccount.com" \
  --format="table(bindings.role,bindings.members)"
```

#### 서비스 계정 생성 완료 상태 (2025-12-28 확인)

**생성 완료**: ✅ **10/10 (100%)**

| 서비스 계정 | IAM 역할 | 확인 상태 |
|---|---|---|
| `firebase-hosting-deploy@carivdealer.iam.gserviceaccount.com` | `roles/firebasehosting.admin` | ✅ 확인 완료 |
| `cloud-functions-executor@carivdealer.iam.gserviceaccount.com` | `roles/cloudfunctions.invoker` | ✅ 확인 완료 |
| `cloud-run-executor@carivdealer.iam.gserviceaccount.com` | `roles/run.invoker` | ✅ 확인 완료 |
| `firestore-admin@carivdealer.iam.gserviceaccount.com` | `roles/datastore.user` | ✅ 확인 완료 |
| `storage-admin@carivdealer.iam.gserviceaccount.com` | `roles/storage.admin` | ✅ 확인 완료 |
| `secret-manager-accessor@carivdealer.iam.gserviceaccount.com` | `roles/secretmanager.secretAccessor` | ✅ 확인 완료 |
| `gemini-api-user@carivdealer.iam.gserviceaccount.com` | `roles/aiplatform.user` | ✅ 확인 완료 |
| `cloud-build-executor@carivdealer.iam.gserviceaccount.com` | `roles/cloudbuild.builds.builder` | ✅ 확인 완료 |
| `logging-writer@carivdealer.iam.gserviceaccount.com` | `roles/logging.logWriter` | ✅ 확인 완료 |
| `monitoring-writer@carivdealer.iam.gserviceaccount.com` | `roles/monitoring.metricWriter` | ✅ 확인 완료 |

**확인 완료일**: 2025-12-28  
**확인자**: 6siegfriex@argo.ai.kr

#### 통합 런타임 서비스 계정 생성 완료 상태 (2025-12-28 확인)

**생성 완료**: ✅ **1/1 (100%)**

| 서비스 계정 | IAM 역할 (8개) | 확인 상태 |
|---|---|---|
| `cloud-runtime-unified@carivdealer.iam.gserviceaccount.com` | `roles/datastore.user`<br>`roles/storage.admin`<br>`roles/secretmanager.secretAccessor`<br>`roles/aiplatform.user`<br>`roles/logging.logWriter`<br>`roles/monitoring.metricWriter`<br>`roles/cloudfunctions.invoker`<br>`roles/run.invoker` | ✅ 확인 완료 |

**확인 완료일**: 2025-12-28  
**확인자**: 6siegfriex@argo.ai.kr

#### 서비스 계정 키 생성 (필요시)

> 주의: 서비스 계정 키는 보안상 위험할 수 있으므로, 가능한 한 Workload Identity나 Application Default Credentials를 사용하는 것을 권장합니다.

```bash
# 키 저장 디렉토리 생성
mkdir -p ~/keys/carivdealer

# 특정 서비스 계정 키 생성 예시 (Firebase Hosting)
gcloud iam service-accounts keys create ~/keys/carivdealer/firebase-hosting-deploy-key.json \
  --iam-account=firebase-hosting-deploy@carivdealer.iam.gserviceaccount.com \
  --project=carivdealer

# 키 파일 권한 설정 (보안)
chmod 600 ~/keys/carivdealer/*.json
```

#### 서비스 계정별 상세 IAM 역할

| 서비스 계정 | 주요 역할 | 추가 권한 (필요시) |
|---|---|---|
| `firebase-hosting-deploy` | `roles/firebasehosting.admin` | `roles/storage.admin` (배포 파일 업로드) |
| `cloud-functions-executor` | `roles/cloudfunctions.invoker` | `roles/cloudfunctions.developer` (함수 관리) |
| `cloud-run-executor` | `roles/run.invoker` | `roles/run.developer` (서비스 관리) |
| `firestore-admin` | `roles/datastore.user` | `roles/datastore.owner` (전체 관리) |
| `storage-admin` | `roles/storage.admin` | `roles/storage.objectAdmin` (객체 관리) |
| `secret-manager-accessor` | `roles/secretmanager.secretAccessor` | `roles/secretmanager.viewer` (읽기 전용) |
| `gemini-api-user` | `roles/aiplatform.user` | `roles/aiplatform.admin` (관리 권한) |
| `cloud-build-executor` | `roles/cloudbuild.builds.builder` | `roles/cloudbuild.builds.editor` (빌드 관리) |
| `logging-writer` | `roles/logging.logWriter` | - |
| `monitoring-writer` | `roles/monitoring.metricWriter` | `roles/monitoring.viewer` (읽기) |

> 참조: [GCP IAM 역할 문서](https://cloud.google.com/iam/docs/understanding-roles)

### 13.2 아키텍처 개요

#### 모듈 구조(Phase 1 수준)

| 모듈 | 설명 | 주요 책임 |
|---|---|---|
| Auth Module | 인증/인가 | 딜러/바이어 인증, RBAC 권한 관리 |
| Vehicle Module | 차량 관리 | 차량 등록, 상태 관리, 등록원부 OCR 연동 |
| Auction Module | 경매 시스템 | 경매 생성/입찰/즉시구매, 낙찰가 관리 |
| Trade Module | 거래 관리 | 계약 생성, 정산, 탁송 연동 |
| Notification Module | 알림 | 알림(경매 종료, 낙찰, 유찰 등) |

### 13.2 데이터 스키마 개요(Phase 1 핵심 엔터티만)

#### ENT-01: Vehicle(차량)

| 필드명 | 타입 | 제약조건 | 설명 |
|---|---|---|---|
| id | BIGINT | PK, AUTO_INCREMENT | 차량 고유 ID |
| owner_id | BIGINT | FK → Member.id, NOT NULL | 딜러 ID |
| vin | VARCHAR(20) | UNIQUE, NOT NULL | 차대번호(VIN) |
| car_no | VARCHAR(20) | NOT NULL | 차량번호 |
| status | ENUM | NOT NULL, DEFAULT 'Draft' | 차량 상태(Onboarded/Draft/Inspecting/Active/Bidding/Locked/Settlement/Sold) |
| created_at | TIMESTAMP | NOT NULL, DEFAULT CURRENT_TIMESTAMP | 생성 시간 |

> 참조: `통합설계명세서_1.md` Section 14 (상세 스키마)

#### ENT-02: Auction(경매)

| 필드명 | 타입 | 제약조건 | 설명 |
|---|---|---|---|
| id | BIGINT | PK, AUTO_INCREMENT | 경매 고유 ID |
| vehicle_id | BIGINT | FK → Vehicle.id, NOT NULL, UNIQUE | 차량 ID |
| start_price | DECIMAL(15,2) | NOT NULL | 시작가 |
| buy_now_price | DECIMAL(15,2) | NULL | 즉시구매가 |
| current_highest_bid | DECIMAL(15,2) | NULL | 현재 최고 입찰가(내부 저장용, 화면/API 응답 비노출) |
| status | ENUM | NOT NULL, DEFAULT 'Active' | 경매 상태(Active/Ended/Sold) |
| created_at | TIMESTAMP | NOT NULL, DEFAULT CURRENT_TIMESTAMP | 생성 시간 |

### 13.3 인덱스 설계(Phase 1 핵심만)

| 엔터티 | 인덱스명 | 컬럼 | 타입 | 설명 |
|---|---|---|---|---|
| Vehicle | idx_vehicle_owner_id | owner_id | INDEX | 딜러별 차량 조회 |
| Vehicle | idx_vehicle_status | status | INDEX | 상태별 차량 조회 |
| Vehicle | idx_vehicle_vin | vin | UNIQUE | VIN 중복 방지 |
| Auction | idx_auction_vehicle_id | vehicle_id | UNIQUE | 차량별 경매 조회 |
| Auction | idx_auction_status | status | INDEX | 상태별 경매 조회 |

### 13.4 API 개요(Phase 1 핵심만)

#### API Registry(Phase 1 완전 목록)

| API ID | API명 | HTTP 메서드 | 엔드포인트 | 설명 | 관련 Function | 관련 NFR | 상태 |
|---|---|---|---|---|---|---|---|
| API-0001 | 딜러 회원가입 | POST | `/api/v1/member/dealer/register` | 딜러 계정 생성 및 기본 정보 입력 | FUNC-01 | NFR-0300 | 확정 |
| API-0002 | 사업자 인증 | POST | `/api/v1/member/dealer/verify-business` | 사업자등록증 OCR 및 진위 확인 | FUNC-02 | NFR-0100, NFR-0300 | 확정 |
| API-0100 | 등록원부 OCR | POST | `/api/v1/vehicle/ocr-registration` | 차량번호를 입력받아 등록원부 OCR을 수행하고 차량 기본정보를 반환 | FUNC-05 | NFR-0100, NFR-0201 | 확정 |
| API-0101 | 검차 신청 | POST | `/api/v1/vehicle/{vehicle_id}/inspection/request` | 검차 희망 일정 선택 및 검차 신청 처리 | FUNC-06 | NFR-0300 | 확정 |
| API-0102 | 평가사 배정 | POST | `/api/v1/inspection/{inspection_id}/assign` | 시스템이 평가사를 자동 배정 | FUNC-07 | NFR-0300 | 확정(시스템 자동) |
| API-0103 | 검차 결과 업로드 | POST | `/api/v1/inspection/{inspection_id}/result` | 평가사가 검차 결과 업로드 | FUNC-08 | NFR-0300 | 확정(평가사 액션) |
| API-0200 | 경매 입찰 | POST | `/api/v1/auction/{auction_id}/bid` | 경매에 입찰 처리(진행 중 가격 비노출, 낙찰 후 당사자 공개) | FUNC-18 | NFR-0200 | 확정 |
| API-0201 | 즉시구매 | POST | `/api/v1/auction/{auction_id}/buy-now` | 경매 내 즉시구매 실행 | FUNC-19 | NFR-0200, NFR-0202 | 확정 |
| API-0300 | 판매 방식 변경 | POST | `/api/v1/vehicle/{vehicle_id}/change-sale-method` | 판매 방식 변경(일반 → 경매) | FUNC-15 | NFR-0200 | 확정 |
| API-0301 | 일반 판매 제안 수락/거절 | POST | `/api/v1/trade/{proposal_id}/accept` | 일반 판매 제안 수락/거절 | FUNC-16 | NFR-0200 | 확정 |
| API-0302 | 바이어 최종 구매 의사 재확인 | POST | `/api/v1/trade/{proposal_id}/confirm` | 바이어(기업) 최종 구매 의사 재확인 | FUNC-17 | NFR-0200 | 확정(바이어 외부 시스템) |
| API-0600 | 탁송 일정 조율 | POST | `/api/v1/logistics/schedule` | 탁송 일정 조율 | FUNC-20 | NFR-0300, NFR-0301 | 확정 |
| API-0601 | 배차 조율 요청 | POST | `/api/v1/logistics/dispatch` | 배차 조율 요청 | FUNC-21 | NFR-0300 | 확정 |
| API-0602 | 배차 확정 | POST | `/api/v1/logistics/dispatch/{dispatch_id}/confirm` | 배차 확정 | FUNC-21 | NFR-0300, NFR-0302 | 확정 |
| API-0603 | 인계 승인 | POST | `/api/v1/logistics/handover/{logistics_id}/approve` | 인계 승인 | FUNC-22 | NFR-0303, NFR-0304 | 확정 |
| API-0604 | 정산 완료 알림 발송 | POST | `/api/v1/settlement/{settlement_id}/notify` | 정산 완료 알림 발송 | FUNC-23 | NFR-0302, NFR-0305 | 확정 |

> 주석: API Registry는 Phase 1 완전 목록으로 관리. 총 16개 (API-0001, API-0002, API-0100~0103, API-0200~0201, API-0300~0302, API-0600~0604). 추가 API는 버전 업데이트 시 반영.

#### API-0001: 딜러 회원가입

| 항목 | 내용 |
|---|---|
| API-ID | API-0001 |
| 엔드포인트 | `POST /api/v1/member/dealer/register` |
| 설명 | 딜러 계정 생성 및 기본 정보 입력 |
| 요청 파라미터 | `email`, `password`, `dealer_name`, `phone`, `terms_agreed` 등 |
| 응답 데이터 | `success`, `member_id`, `message` |
| 관련 기능 | FUNC-01 |
| 관련 NFR | NFR-0300 |

#### API-0002: 사업자 인증

| 항목 | 내용 |
|---|---|
| API-ID | API-0002 |
| 엔드포인트 | `POST /api/v1/member/dealer/verify-business` |
| 설명 | 사업자등록증 OCR 및 진위 확인 |
| 요청 파라미터 | `business_registration_image` (이미지 파일, 필수) |
| 응답 데이터 | `success`, `verified`, `business_info`, `message` |
| 관련 기능 | FUNC-02 |
| 관련 NFR | NFR-0100, NFR-0300 |

#### API-0100: 등록원부 OCR

| 항목 | 내용 |
|---|---|
| API-ID | API-0100 |
| 엔드포인트 | `POST /api/v1/vehicle/ocr-registration` |
| 설명 | 차량번호를 입력받아 등록원부 OCR을 수행하고 차량 기본정보를 반환 |
| 요청 파라미터 | `car_no` (차량번호, 필수) |
| 응답 데이터 | `vin`, `manufacturer`, `model`, `year`, `mileage` 등 |
| 관련 기능 | FUNC-05 |
| 관련 NFR | NFR-0100, NFR-0201 |

#### API-0101: 검차 신청

| 항목 | 내용 |
|---|---|
| API-ID | API-0101 |
| 엔드포인트 | `POST /api/v1/vehicle/{vehicle_id}/inspection/request` |
| 설명 | 검차 희망 일정 선택 및 검차 신청 처리 |
| 요청 파라미터 | `vehicle_id` (차량 ID, Path), `preferred_date`, `preferred_time` |
| 응답 데이터 | `success`, `inspection_id`, `message` |
| 관련 기능 | FUNC-06 |
| 관련 NFR | NFR-0300 |

#### API-0102: 평가사 배정

| 항목 | 내용 |
|---|---|
| API-ID | API-0102 |
| 엔드포인트 | `POST /api/v1/inspection/{inspection_id}/assign` |
| 설명 | 시스템이 평가사를 자동 배정 |
| 요청 파라미터 | `inspection_id` (검차 ID, Path) |
| 응답 데이터 | `success`, `inspector_id`, `assigned_at`, `message` |
| 관련 기능 | FUNC-07 |
| 관련 NFR | NFR-0300 |

#### API-0103: 검차 결과 업로드

| 항목 | 내용 |
|---|---|
| API-ID | API-0103 |
| 엔드포인트 | `POST /api/v1/inspection/{inspection_id}/result` |
| 설명 | 평가사가 검차 결과 업로드 |
| 요청 파라미터 | `inspection_id` (검차 ID, Path), `inspection_result`, `images` 등 |
| 응답 데이터 | `success`, `result_id`, `message` |
| 관련 기능 | FUNC-08 |
| 관련 NFR | NFR-0300 |

#### API-0200: 경매 입찰

| 항목 | 내용 |
|---|---|
| API-ID | API-0200 |
| 엔드포인트 | `POST /api/v1/auction/{auction_id}/bid` |
| 설명 | 경매에 입찰 처리(진행 중 가격 비노출, 낙찰 후 당사자 공개) |
| 요청 파라미터 | `auction_id` (경매 ID, Path), `bid_amount` (입찰가, 필수) |
| 응답 데이터 | `success`, `message` (진행 중 가격 비노출, 낙찰 후 낙찰가만 당사자에게 공개) |
| 관련 기능 | FUNC-18 |
| 관련 NFR | NFR-0200 |

#### API-0201: 즉시구매

| 항목 | 내용 |
|---|---|
| API-ID | API-0201 |
| 엔드포인트 | `POST /api/v1/auction/{auction_id}/buy-now` |
| 설명 | 경매 내 즉시구매 실행 |
| 요청 파라미터 | `auction_id` (경매 ID, Path) |
| 응답 데이터 | `success`, `contract_id`, `message` |
| 관련 기능 | FUNC-19 |
| 관련 NFR | NFR-0200, NFR-0202 |

#### API-0300: 판매 방식 변경

| 항목 | 내용 |
|---|---|
| API-ID | API-0300 |
| 엔드포인트 | `POST /api/v1/vehicle/{vehicle_id}/change-sale-method` |
| 설명 | 판매 방식 변경(일반 → 경매) |
| 요청 파라미터 | `vehicle_id` (차량 ID, Path), `auction_settings` (시작가, 즉시구매가) |
| 응답 데이터 | `success`, `auction_id` |
| 관련 기능 | FUNC-15 |
| 관련 NFR | NFR-0200 |

#### API-0301: 일반 판매 제안 수락/거절

| 항목 | 내용 |
|---|---|
| API-ID | API-0301 |
| 엔드포인트 | `POST /api/v1/trade/{proposal_id}/accept` |
| 설명 | 일반 판매 제안 수락/거절 |
| 요청 파라미터 | `proposal_id` (제안 ID, Path), `action` (accept/reject) |
| 응답 데이터 | `success`, `message` |
| 관련 기능 | FUNC-16 |
| 관련 NFR | NFR-0200 |

#### API-0302: 바이어 최종 구매 의사 재확인

| 항목 | 내용 |
|---|---|
| API-ID | API-0302 |
| 엔드포인트 | `POST /api/v1/trade/{proposal_id}/confirm` |
| 설명 | 바이어(기업) 최종 구매 의사 재확인 |
| 요청 파라미터 | `proposal_id` (제안 ID, Path), `confirmed` (boolean) |
| 응답 데이터 | `success`, `message` |
| 관련 기능 | FUNC-17 |
| 관련 NFR | NFR-0200 |

#### API-0600: 탁송 일정 조율

| 항목 | 내용 |
|---|---|
| API-ID | API-0600 |
| 엔드포인트 | `POST /api/v1/logistics/schedule` |
| 설명 | 탁송 일정 조율 |
| 요청 파라미터 | `schedule_date`, `schedule_time`, `address` |
| 응답 데이터 | `success`, `schedule_id` |
| 관련 기능 | FUNC-20 |
| 관련 NFR | NFR-0300, NFR-0301 |

#### API-0601: 배차 조율 요청

| 항목 | 내용 |
|---|---|
| API-ID | API-0601 |
| 엔드포인트 | `POST /api/v1/logistics/dispatch` |
| 설명 | 배차 조율 요청 |
| 요청 파라미터 | `schedule_id` |
| 응답 데이터 | `success`, `dispatch_id` |
| 관련 기능 | FUNC-21 |
| 관련 NFR | NFR-0300 |

#### API-0602: 배차 확정

| 항목 | 내용 |
|---|---|
| API-ID | API-0602 |
| 엔드포인트 | `POST /api/v1/logistics/dispatch/{dispatch_id}/confirm` |
| 설명 | 배차 확정 |
| 요청 파라미터 | `dispatch_id` (배차 ID, Path) |
| 응답 데이터 | `success`, `driver_info` |
| 관련 기능 | FUNC-21 |
| 관련 NFR | NFR-0300, NFR-0302 |

#### API-0603: 인계 승인

| 항목 | 내용 |
|---|---|
| API-ID | API-0603 |
| 엔드포인트 | `POST /api/v1/logistics/handover/{logistics_id}/approve` |
| 설명 | 인계 승인 |
| 요청 파라미터 | `logistics_id` (탁송 ID, Path), `pin` (6자리 PIN) |
| 응답 데이터 | `success`, `handover_timestamp` |
| 관련 기능 | FUNC-22 |
| 관련 NFR | NFR-0303, NFR-0304 |

#### API-0604: 정산 완료 알림 발송

| 항목 | 내용 |
|---|---|
| API-ID | API-0604 |
| 엔드포인트 | `POST /api/v1/settlement/{settlement_id}/notify` |
| 설명 | 정산 완료 알림 발송 |
| 요청 파라미터 | `settlement_id` (정산 ID, Path) |
| 응답 데이터 | `success`, `notification_id` |
| 관련 기능 | FUNC-23 |
| 관련 NFR | NFR-0302, NFR-0305 |

> 주석: Phase 1 필수 API만 우선 명세. 전체 API 목록은 부록에 별도 표로 관리.

---

## 14. SRD: 서비스 요구

### 14.1 외부 연동 목록

| 연동 ID | 서비스명 | 용도 | 벤더/스펙 | 상태 | 리스크 |
|---|---|---|---|---|---|
| SRD-001 | 등록원부 OCR | 차량번호 → 등록원부 정보 추출 | 미정(자동차민원 API 또는 상용 OCR 서비스) | 결정 필요 | 서비스 장애, 정책 변경 |
| SRD-002 | 사고이력 조회 | 차량 사고 이력 조회 | 미정 | 결정 필요 | API 의존도 |
| SRD-003 | 저당/압류 조회 | 차량 저당권/압류 여부 조회 | 미정 | 결정 필요 | API 의존도 |
| SRD-004 | 환율 API | 환율 정보 조회 | 미정(Google Exchange API 등) | 결정 필요 | 실시간성 |
| SRD-005 | 알림 서비스 | SMS/알림톡 발송 | 미정(Aligo 등) | 결정 필요 | 발송 실패 |
| SRD-006 | 결제(PG) | 바이어 결제 처리 | 미정(Toss/Nice 등) | 결정 필요 | 결제 실패, 환불 처리 |

### 14.2 재시도/백오프/폴백 정책(표준)

| 정책 ID | 서비스 | 재시도 횟수 | 재시도 간격 | 백오프 전략 | 폴백 경로 |
|---|---|---|---|---|---|
| SRD-POL-001 | 등록원부 OCR | 3회 | 1초, 2초, 5초 | Exponential Backoff | 수동 입력 옵션 제공 |
| SRD-POL-002 | 경매 입찰 | 1회 | 즉시 | - | 오류 메시지 표시 |
| SRD-POL-003 | 즉시구매 | 1회 | 즉시 | - | 오류 메시지 표시 |
| SRD-POL-004 | 알림 발송 | 3회 | 1분, 5분, 30분 | Exponential Backoff | 알림 실패 로그 기록 |

### 14.3 장애 대응 정책

| 장애 유형 | 대응 정책 | 사용자 안내 | 모니터링 |
|---|---|---|---|
| 외부 API 장애 | 재시도 → 폴백 경로 제공 | 3초 이내 오류 메시지 표시 | API 응답 시간/에러율 모니터링 |
| 동시성 충돌 | 낙관적 락 또는 원자적 트랜잭션 | "다른 사용자가 먼저 처리했습니다" 메시지 | 충돌 발생률 모니터링 |
| 데이터베이스 장애 | 읽기 전용 모드 전환 또는 서비스 제한 | "일시적 장애" 메시지 | DB 연결 상태 모니터링 |

> 참조: `통합설계명세서_1.md` Section 16.2(D-010)

---

## 15. 상태 전이 매핑 (State Transition Mapping)

### 15.1 차량 상태별 화면 매핑

| Vehicle Status | 대상 화면 | 화면 설명 | 상태 전이 조건 |
|---|---|---|---|
| **Draft** | SCR-0200 | 차량 등록 화면 (초안 상태) | 차량 등록 완료, 검차 미신청 |
| **Inspecting** | SCR-0201 | 검차 신청 화면 (진행 중 상태) | 검차 신청 완료, 평가사 배정됨 |
| **Active** | SCR-0300 | 판매 방식 선택 화면 | 검차 완료, 판매 준비 완료 |
| **Bidding** | SCR-0400 (경매) / SCR-0102 (일반 판매) | 경매 상세 또는 제안 목록 | 판매 방식에 따라 분기 |
| **Locked** | SCR-0600 | 탁송 일정 화면 | 거래 확정, 탁송 준비 |
| **Settlement** | SCR-0105 | 정산 상세 화면 | 탁송 완료, 정산 처리 중 |
| **Sold** | SCR-0104 | 정산 내역 목록 (Paid) | 정산 완료, 거래 종료 |

> 주석: 상태별 화면 매핑은 Screen Registry의 실제 Screen ID를 사용합니다. 상태는 화면 내에서 표시되며, 별도의 서브 화면 ID는 사용하지 않습니다.

### 15.2 상태 전이 로직

- **Draft → Inspecting**: 검차 신청 완료 (FUNC-06)
- **Inspecting → Active**: 검차 결과 업로드 완료 (FUNC-08)
- **Active → Bidding**: 판매 방식 선택 완료 (FUNC-15 또는 FUNC-16)
- **Bidding → Locked**: 거래 확정 (FUNC-16 수락 또는 FUNC-19 즉시구매)
- **Locked → Settlement**: 인계 승인 완료 (FUNC-22)
- **Settlement → Sold**: 정산 완료 알림 발송 (FUNC-23)

---

## 16. MVP Mock 데이터 스키마

### 16.1 Mock 데이터 구조 (Phase 1 MVP 테스트용)

#### User Mock Schema

```json
{
  "uid": "mock_dealer_001",
  "displayName": "홍길동",
  "role": "DEALER",
  "company": "포워드모터스"
}
```

#### Vehicle Mock Schema

```json
{
  "id": "v_001",
  "plateNumber": "123가4567",
  "model": "Hyundai Avante CN7 (2022)",
  "vin": "KMHCT41DBNUXXXXXX",
  "mileage": "25,400km",
  "status": "Active",
  "saleMethod": "Auction"
}
```

#### Inspection Mock Schema

```json
{
  "inspectorName": "김평가",
  "summary": "무사고, 외관 A급, 타이어 80% 잔여",
  "media": {
    "photos": ["url1", "url2", "url37"],
    "videos": ["vurl1", "vurl2", "vurl3"]
  }
}
```

#### Pricing Mock Schema

```json
{
  "suggestedRange": [18500000, 21000000],
  "medianPrice": 19750000,
  "dealerTarget": 20000000
}
```

#### Settlement Mock Schema

```json
{
  "basePrice": 20000000,
  "vatRefund": 1818000,
  "fees": {
    "platform": 500000,
    "inspection": 150000,
    "logistics": 200000
  },
  "totalPayout": 20968000
}
```

### 16.2 Mock 데이터 사용 가이드

- **목적**: MVP UX 테스트를 위한 빠른 프로토타이핑
- **적용 시점**: DIR-01 (Universal SKIP Button) 활성화 시
- **데이터 소스**: `master_mock_data_schema`를 Firestore에 자동 주입

---

## 17. MVP 로직 디렉티브 (Implementation Directives)

### 17.1 DIR-01: Universal SKIP Button

| 디렉티브 ID | 이름 | 규칙 |
|---|---|---|
| **DIR-01** | Universal SKIP Button | `master_mock_data_schema`를 Firestore에 주입하고 검증을 우회하여 빠른 UX 테스트 수행 |

**적용 위치**: 회원가입 Step 1 (SCR-0002-1) 및 기타 검증 단계

### 17.2 DIR-02: Gemini Multi-modal OCR

| 디렉티브 ID | 이름 | 규칙 |
|---|---|---|
| **DIR-02** | Gemini Multi-modal OCR | 프롬프트: 이미지 분석 → 필드 추출 {VIN, Model, Year, Mileage, Plate} → 유효한 JSON 반환 |

**적용 위치**: 
- SCR-0002-2 (사업자등록증 OCR)
- SCR-0200 (등록원부 OCR)

**프롬프트 예시**:
```
Analyze the vehicle registration certificate image.
Extract the following fields:
- VIN (Vehicle Identification Number)
- Model (Manufacturer + Model Name)
- Year (Manufacturing Year)
- Mileage (Current Mileage)
- Plate Number (License Plate)

Return valid JSON format:
{
  "vin": "...",
  "model": "...",
  "year": 2022,
  "mileage": "25400",
  "plateNumber": "123가4567"
}
```

### 17.3 DIR-04: Price Validation Policy

| 디렉티브 ID | 이름 | 규칙 |
|---|---|---|
| **DIR-04** | Price Validation Policy | 제안 범위 외 입력 시 경고 토스트(Yellow)만 표시. Phase 1에서는 하드 블록 없음 |

**적용 위치**: SCR-0302 (Price Setting)

**로직**:
- 입력 가격이 `suggestedRange` 범위를 벗어나면 경고 토스트 표시
- 제출은 가능하되, 사용자에게 경고만 제공

### 17.4 DIR-05: Inspection Immutability

| 디렉티브 ID | 이름 | 규칙 |
|---|---|---|
| **DIR-05** | Inspection Immutability | 역할:INSPECTOR만 편집 가능. 딜러는 SCR-0202에 대해 읽기 전용 접근. Firestore Rules로 강제 |

**적용 위치**: SCR-0202 (Inspection Result Report)

**Firestore Rules 예시**:
```javascript
match /inspections/{inspectionId} {
  allow read: if request.auth != null;
  allow write: if request.auth.token.role == 'INSPECTOR';
}
```

---

## 18. Traceability Matrix(추적 매트릭스)

### 18.1 추적 매트릭스 정의

Traceability Matrix는 니즈(SSOT) → 요구사항 → 기능 → 화면 → API → 엔터티 → NFR → 테스트(수용기준)까지의 추적 관계를 표로 관리한다.

### 18.2 니즈→요구사항→기능 추적표(Phase 1 핵심)

| 니즈 ID(SSOT) | 요구사항 ID | 기능 ID | 화면 ID | API ID | 엔터티 ID | NFR ID | 테스트 AC | 상태 |
|---|---|---|---|---|---|---|---|---|
| SSOT-7.2(차량 등록 최소화) | REQ-001 | FUNC-05 | SCR-0200 | API-0100 | ENT-01 | NFR-0100 | 차량번호 입력 후 3초 이내 OCR 완료 | 매핑 완료 |
| SSOT-7.4(판매 방식 유연성) | REQ-002 | FUNC-15 | SCR-0300 | API-0300 | ENT-01, ENT-02 | NFR-0200 | 변경 요청 후 5초 이내 화면 표시 | 매핑 완료 |
| SSOT-7.4(경매 가격 발견) | REQ-003 | FUNC-18 | - | API-0200 | ENT-02 | NFR-0200 | 입찰 처리 시간 1초 이내, 동시 입찰 정확도 100%, 낙찰 후 당사자 공개 | 매핑 완료 |
| SSOT-7.4(빠른 거래 성사) | REQ-004 | FUNC-19 | SCR-0400 | API-0201 | ENT-02 | NFR-0200, NFR-0202 | 즉시구매 처리 시간 2초 이내, 동시 요청 처리 정확도 100% | 매핑 완료 |
| SSOT-7.5(탁송 신청 조건 제어) | REQ-005 | FUNC-20 | SCR-0600 | API-0600 | ENT-04 | NFR-0300, NFR-0301 | 일정 조율 요청 처리 시간 5초 이내, 물류 파트너 응답 대기 시간 24시간 이내 | 매핑 완료 |
| SSOT-7.5(배차 확정) | REQ-006 | FUNC-21 | SCR-0600, SCR-0601 | API-0601, API-0602 | ENT-04, ENT-05 | NFR-0300, NFR-0302 | 배차 요청 처리 시간 10초 이내, 배차 확정 시간 2시간 이내 | 매핑 완료 |
| SSOT-7.5(인계 승인) | REQ-007 | FUNC-22 | SCR-0601 | API-0603 | ENT-05 | NFR-0303, NFR-0304 | 인계 승인 처리 시간 3초 이내, 책임 이관 타임스탬프 정확도 100% | 매핑 완료 |
| SSOT-8.4(거래 종료 명확화) | REQ-008 | FUNC-23 | SCR-0105 | API-0604 | ENT-06 | NFR-0302, NFR-0305 | 알림 발송 처리 시간 5초 이내, 알림 발송 성공률 99% 이상 | 매핑 완료 |

> 주석: 전체 추적 매트릭스는 부록에 별도 표로 관리. Phase 1 진행 중 계속 확장됨.

---

## 19. Decision Log(결정 로그)

### 19.1 Phase 1 결정사항(12/23)

| 결정 ID | 결정 내용 | 영향 범위 | 근거 | 오너 | 결정일 | 상태 |
|---|---|---|---|---|---|---|
| D-P1-001 | 일반 판매 → 경매 전환 가능 | SCR-0300, FUNC-15 | 12/23 회의 | 기획팀 | 2025-12-23 | 확정 |
| D-P1-002 | 등록원부 OCR 기반 차량정보 자동 채움 | SCR-0200, FUNC-05, SRD-001 | 12/23 회의, 시장 사례 | 기획팀 | 2025-12-23 | 확정 |
| D-P1-003 | 경매 즉시구매 포함 | SCR-0400, FUNC-19 | 12/23 회의, 경쟁사 동향 | 기획팀 | 2025-12-23 | 확정(정책 세부는 오픈) |

### 19.2 통합설계명세서 기반 결정사항(D-001~D-010)

| 결정 ID | 결정 내용 | 핵심 리스크 | 최소 산출물 | 수용 기준(DoD) | 결정자 | 기한 | 상태 |
|---|---|---|---|---|---|---|---|
| D-001 | Settlement 단계 의미 정의 | 상태 전이/정산 트리거 불일치로 전 구간 재작업 | (1) Settlement 단일 정의 문장 (2) 상태 전이 조건/트리거 이벤트 정의 (3) 정산 타임라인 필드 정의 | STATE_MACHINE.md/용어집/정산 API 응답 필드가 동일 의미로 정렬 | CTO, PO | 2025-12-20 | 미결정 |
| D-002 | Bidding 단계 범위 정의 | 공개 입찰 vs 제안 수집 vs 하이브리드 방식 결정 필요 | (1) Bidding 단계 범위 정의 (2) 매칭 알고리즘 최소 요구사항 | STATE_MACHINE.md에 Bidding 범위 명시, 매칭 알고리즘 스펙 문서화 | CTO, PO | 2025-12-20 | 미결정 |
| D-003 | RBAC 매트릭스 정의 | 데이터/바이어정보 노출, 승인권한 오남용 | (1) 역할×행위 RBAC 매트릭스 (2) "언마스킹(원본조회)" 승인/감사 절차 (3) 정산 승인/송금 실행 권한(4-eye 여부) | 모든 API가 권한표에 매핑되고, Admin 권한도 세분화되어 감사 로그 정책과 연결 | CTO, Security Lead | 2025-12-22 | 미결정 |
| D-004 | 외부 API 벤더/스펙 결정 | 연동 지연/벤더 교체 비용 폭증/장애 전파 | (1) 벤더별 비교표(SLA/단가/웹훅/제한) (2) 표준 어댑터 인터페이스(교체 가능) (3) Idempotency/Retry/Fallback 원칙 | "샌드박스 호출→성공/실패/타임아웃" 시나리오가 정의되고, 벤더 교체 시 영향 범위가 문서화 | CTO, Tech Lead | 2025-12-18 | 미결정 |
| D-005 | 수수료/패널티 정책 정의 | 정산 분쟁/회계 처리 불가/CS 폭증 | (1) 정산 항목(Line Items) 사유코드 표 (2) 발생조건/증빙/취소·환불 규칙 (3) 정산서 표기 규칙 | 동일 입력에 대해 정산 결과가 재현 가능하며, 모든 차감/환급이 사유코드로 설명 | CEO, CFO | 2025-12-20 | 미결정 |
| D-006 | 마스킹 확장 | 블랙박스 전략 붕괴/내부자 오남용 | (1) 문서/화면/API 마스킹 레벨 표 (2) 추가 필드 목록(연락처/물류 등) (3) Admin 원본조회 정책 | 딜러 노출 데이터가 "역추적 불가" 수준으로 정의되고, 예외(관리자/감사) 경로는 승인·로그가 필수 | CTO, Security Lead | 2025-12-25 | 미결정 |
| D-007 | 서류 템플릿/책임 | 책임소재 불명확→법무/분쟁 리스크 | (1) 필수 서류 마스터(국가/유형별) (2) 생성 주체(자동/수동) (3) 검증 책임(RACI) | "필수 서류 누락 시 상태 전이 불가" 같은 운영 규칙이 명문화되고, 템플릿 버전 관리 규칙이 정의 | CTO, Product Lead | 2025-12-25 | 미결정 |
| D-008 | 6-Day 타임라인 | KPI/UX 핵심이 모호→알림·보상·SLA 혼선 | (1) 기준 시점 1개 (2) 단계별 SLA/버퍼 (3) 지연/반려 예외 처리 | 타임라인이 정확히 계산되고, 예외 발생 시 사용자/운영 알림과 백오피스 액션이 연결 | CTO, Product Lead | 2025-12-25 | 미결정 |
| D-009 | 보안/컴플라이언스 | 법 위반/감사 대응 불가/키 관리 부재 | (1) 적용 데이터 범위(암호화/접근제어) (2) 컴플라이언스 요구사항 목록 (3) 보안 감사 요구사항 | 암호화/접근제어가 적용 데이터 범위에 명시되고, 컴플라이언스 요구사항이 체크리스트로 문서화 | CTO, Security Lead | 2025-12-22 | 미결정 |
| D-010 | 재시도/에러 핸들링 | 서비스 중단/사용자 경험 저하 | (1) 재시도 횟수/간격/백오프 전략 (2) 에러 핸들링 로직(사용자 알림 방식, 롤백 정책) | 재시도/에러 핸들링이 SRD에 명시되고, 사용자 알림/롤백 정책이 시나리오로 문서화 | CTO, Tech Lead | 2025-12-25 | 미결정 |

> 참조: `통합설계명세서_1.md` Section 16.2, Section 21.3.1

---

## 20. GAP Log(갭 로그)

### 20.1 Phase 1 오픈 이슈(결정 필요)

| 갭 ID | 항목 | 설명 | 우선순위 | 결정 필요일 | 상태 |
|---|---|---|---|---|---|
| GAP-P1-001 | 등록원부 OCR 벤더 선택 | 자동차민원 API vs 상용 OCR 서비스 결정 필요 | High | 2025-12-25 | Open |
| GAP-P1-003 | 즉시구매 가격 설정 규칙 | 최소 시작가 대비 비율 결정 필요 | Medium | 2025-12-27 | Open |
| GAP-P1-004 | 판매 방식 변경 조건 | 변경 가능 시점/상태, 재검사 필요 여부 결정 필요 | Medium | 2025-12-27 | Open |
| GAP-P1-005 | 제안 유효기간 정책 | 기본 TTL, 연장 가능 여부, 자동만료 처리, 알림 정책 결정 필요 | Medium | 2025-12-27 | Open |
| GAP-P1-006 | 기준가격 설정 규칙 | 딜러 입력 가격과 플랫폼 시세 개입 비율 결정 필요 | Medium | 2025-12-27 | Open |
| GAP-007 | 탁송 예외/위약금 정책 | 연락 두절/서류 미준비/주소 오류/지연 등 예외 시 비용/위약금 정책 결정 필요 | High | 2025-12-27 | Open |

### 20.2 통합설계명세서 기반 갭 이슈

| 갭 ID | 유형 | 설명 | 영향도 | 상태 | 비고 |
|---|---|---|---|---|---|
| GAP-007 | 누락(Missing) | 이미지 참조 누락(FWM_SPEC에서 참조하는 이미지 파일이 문서에 포함되지 않음) | Medium | Open | 향후 추가 예정 |

> 참조: `통합설계명세서_1.md` Section 20.1

---

## 21. Risk & Opportunity Register(리스크 및 기회 레지스트리)

### 21.1 잠재 위협요인(리스크)

| 리스크 ID | 리스크 유형 | 리스크 내용 | 완화 전략 | 모니터링 지표 | 우선순위 | 상태 |
|---|---|---|---|---|---|---|
| RISK-001 | 운영 리스크 | 탁송 중 차량 파손 또는 사고 발생 | 인계 확인 시점 기준 책임 소재 명문화, 탁송 보험 가입 의무화, 인계 시점 사진 촬영 의무화 | 월간 사고 발생 건수, 보험 청구율 | High | 모니터링 중 |
| RISK-002 | 금융 리스크 | 해외 바이어 송금 지연으로 인한 정산 지연 | 6일 타임라인에 여유 버퍼 포함, 플랫폼 자체 자금으로 선정산 옵션 검토, 바이어 신용도 평가 시스템 구축 | 평균 정산 소요 시간, 지연 거래 비율 | High | 모니터링 중 |
| RISK-003 | 법적 리스크 | 수출 말소 불이행 또는 대포차 유용 | 딜러에게 말소증 업로드 강제 및 미이행 시 페널티 부과, 딜러 인증(사원증) 강화, 말소증 OCR 검증 및 자동화 | 말소증 미업로드 건수, 대포차 적발 건수 | Critical | 모니터링 중 |
| RISK-004 | 이탈 리스크 | 딜러가 바이어와 직거래 시도 | 모든 바이어 정보 마스킹 및 블랙박스화, 적발 시 영구 제명 조항 약관 삽입, 바이어 연락처 추적 시스템 구축 | 직거래 시도 건수, 이탈 딜러 수 | Critical | 모니터링 중 |
| RISK-005 | 기술 리스크 | 외부 API 장애로 인한 서비스 중단 | 외부 API 다중화(Fallback API 준비), 캐싱 전략으로 API 호출 최소화, 재시도 정책 및 에러 핸들링 강화 | API 장애 시간, 서비스 가용성 | High | 모니터링 중 |
| RISK-006 | 데이터 리스크 | 개인정보 유출 또는 데이터 손실 | AES-256 암호화 적용, 정기 백업 및 복구 테스트, 접근 로그 모니터링 및 이상 징후 탐지 | 데이터 유출 건수, 백업 복구 시간 | Critical | 모니터링 중 |

> 참조: `통합설계명세서_1.md` Section 20.2, `BRD.md` Section 8

### 21.2 기회요인(Opportunity)

| 기회 ID | 기회 내용 | 실행 가능한 실험/후속 PRD 항목 | 우선순위 | 상태 |
|---|---|---|---|---|
| OPP-001 | 등록원부 기반 자동입력 + 성능기록부 + 검차 결과 통합 | 딜러용 차량 진단 리포트 또는 AI 시세 추천 모델의 입력 데이터로 활용 | Medium | Phase 2 후보 |
| OPP-002 | 경매 최고가 공개와 즉시구매 결합 | 딜러 입장에서 "경매 참여로 가격을 확인, 즉시구매로 빠른 매입"이 가능한 유연한 B2B 딜러 플랫폼으로 포지셔닝 | High | Phase 1 확정 |
| OPP-003 | 문서 자동화(DMS) 연동 | 향후 문서 자동화 SaaS와 연동하여 서류 생성/공유 자동화 확장 | Medium | Phase 2 후보 |

> 참조: `통합설계명세서_1.md` Section 20.2

---

## 22. 문서 거버넌스

### 22.1 문서 버전 관리 규칙

- **Major (X.0)**: 구조적 변경, 전략 변경, 범위 변경
- **Minor (X.Y)**: 기능 추가, 상세 명세 보완, 오류 수정
- **Patch (X.Y.Z)**: 오타, 포맷 수정 (선택적)

### 22.2 변경 관리 프로세스

1. 변경 제안: 이슈/PR 생성 또는 문서 내 [CHANGE REQUEST] 섹션 추가
2. 영향도 분석: 영향받는 문서 목록 작성
3. 승인: CTO/PO 승인 필수
4. 반영: 모든 관련 문서 일괄 업데이트
5. 검증: TRACEABILITY_MATRIX 업데이트 및 일관성 검증

### 22.3 SSOT 원칙

- 본 PRD(`PRD_Phase1_2025-12-31.md`)가 모든 기능 설계의 단일 표준(SSOT)임
- 다른 문서(BRD/PRD/FRD)는 본 PRD의 정의를 참조만 하고, 중복 정의를 최소화함
- 충돌 발생 시 우선순위: **최신 논의(12/23 결정사항) > Phase 1 PRD 결정로그 > SSOT > 1순위 문서 > 2순위 문서**

> 참조: `통합설계명세서_1.md` Section 19

### 22.4 검증 보고서

- **검증 일자**: 2025-12-31
- **검증 보고서**: `PRD_IA_SPM_검증_보고서.md`
- **검증 범위**: output.json (IA 1.0 / SPM 1.0) ↔ PRD_Phase1_2025-12-31.md
- **주요 발견사항**:
  - Function Registry: 14개 (FUNC-00 포함, Phase 1 완전 목록), FUNC-00 추가 완료
  - Screen Registry: 16개 확인
  - API Registry: 10개 (Phase 1 Function 연계) 추가 완료
  - ID 체계 불일치: output.json과 PRD의 ID 체계가 다름 (매핑 테이블로 관리)
  - 관련 정책 ID 미연결: IA의 관련 정책 ID 필드가 대부분 비어있음

---

## 23. 부록

### 23.1 용어집

| 용어 | 설명 |
|---|---|
| 검차 | 차량 상태를 '증거'로 만들기 위한 평가사 수행 점검. '검사'는 동의어로만 취급 |
| 등록원부 OCR | 자동차 등록원부 이미지를 OCR로 처리하여 차량 기본정보를 자동 추출하는 기능 |
| 낙찰가 | 경매 종료 후 최종 낙찰가. 딜러와 낙찰 바이어(기업)에게만 공개(당사자 공개). 진행 중 가격은 비노출 |
| 즉시구매 | 경매 내에서 즉시구매가로 바로 구매하는 기능 |
| 판매 방식 변경 | 일반 판매로 등록된 차량을 경매 방식으로 변경하는 기능 |

> 참조: `SSOT_딜러플랫폼_니즈.md` 부록 B

### 23.2 기능↔화면 100% 매핑 리스트(Phase 1)

| Function ID | 기능명 | Screen ID | 화면명 | Figma FrameName 규칙 | 상태 | 비고 |
|---|---|---|---|---|---|---|
| FUNC-00 | 로그인 | SCR-0001 | 로그인 | `Common_Login` | 확정 | 공통 |
| FUNC-01 | 딜러 회원가입 | SCR-0002, SCR-0002-1, SCR-0002-2 | 회원가입(딜러), 약관 동의, 정보 입력 | `Dealer_Signup`, `Dealer_Signup_Terms`, `Dealer_Signup_Info` | 확정 | FLOW-01 |
| FUNC-02 | 사업자 인증 | SCR-0003, SCR-0003-1, SCR-0003-2 | 사업자 인증, 승인 대기, 승인 완료 | `Dealer_Business_Verification`, `Dealer_Approval_Pending`, `Dealer_Approval_Complete` | 확정 | FLOW-01 |
| FUNC-04 | 차량 임시 저장 | SCR-0200-Draft | 임시 저장 목록 | `Dealer_Vehicle_Draft_List` | 확정 | FLOW-03 |
| FUNC-05 | 차량 등록(등록원부 OCR) | SCR-0200 | 차량 등록 화면 | `Dealer_Vehicle_Register_OCR` | 확정 | FLOW-03, D-P1-002 |
| FUNC-06 | 검차 신청 | SCR-0201, SCR-0201-Progress | 검차 신청, 검차 진행 상태 | `Dealer_Inspection_Request`, `Dealer_Inspection_Progress` | 확정 | FLOW-02 |
| FUNC-07 | 평가사 배정 | - | 시스템 자동 | - | 확정 | FLOW-02, 백엔드 |
| FUNC-08 | 검차 결과 업로드 | SCR-0202 | 검차 결과 조회 | `Dealer_Inspection_Result` | 확정 | FLOW-02, 평가사 액션 |
| FUNC-11 | 판매 방식 선택(일반/경매) | SCR-0300 | 차량 상세/판매 방식 선택 | `Dealer_Vehicle_Detail_SaleMethod` | 확정 | FLOW-03 |
| FUNC-12 | 경매 생성/설정 | SCR-0401-A, SCR-0402-A, SCR-0403-A | 경매 시작가 설정, 기간 설정, 완료 | `Dealer_Auction_StartPrice`, `Dealer_Auction_Duration`, `Dealer_Auction_Complete` | 확정 | FLOW-03 |
| FUNC-15 | 판매 방식 변경 | SCR-0300 | 차량 상세/판매 방식 선택 | `Dealer_Vehicle_Detail_SaleMethod` | 확정 | FLOW-03, D-P1-001 |
| FUNC-16 | 일반 판매 제안 수락 | SCR-0102 | 일반 판매 제안 목록 | `Dealer_NormalSale_OfferList` | 확정 | FLOW-03 |
| FUNC-17 | 바이어 최종 구매 의사 재확인 | - | 바이어 외부 시스템 | - | 확정 | FLOW-03, 바이어 외부 시스템 |
| FUNC-18 | 경매 입찰 | - | 바이어 외부 시스템 | - | 확정 | FLOW-03, D-P1-004, 바이어 외부 시스템 |
| FUNC-19 | 즉시구매 | SCR-0400 | 경매 상세(딜러) | `Dealer_Auction_Detail` | 확정 | FLOW-03, D-P1-003, 바이어 외부 시스템 |
| FUNC-20 | 탁송 일정 조율 | SCR-0600 | 탁송 예약/배차 | `Dealer_Logistics_Schedule` | 확정 | FLOW-04 |
| FUNC-21 | 배차 조율 및 확정 | SCR-0600, SCR-0601 | 탁송 예약/배차, 탁송 내역 | `Dealer_Logistics_Schedule`, `Dealer_Logistics_History` | 확정 | FLOW-04, 시스템/물류 |
| FUNC-22 | 인계 승인 | SCR-0601 | 탁송 내역 | `Dealer_Logistics_Handover` | 확정 | FLOW-04 |
| FUNC-23 | 정산 완료 알림 | SCR-0105 | 정산 상세 | `Dealer_Settlement_Detail` | 확정 | FLOW-04, 시스템 자동 |

> 주석: Phase 1 진행 중 계속 확장됨. 전체 매핑 리스트는 별도 파일로 관리 권장. Figma FrameName 규칙은 기능명 기반으로 통일. 총 19개 기능이 28개 화면과 매핑됨.

### 23.2.1 누락 기능(다음 단계 처리 예정)

| Function ID | 기능명 | 설명 | Phase | 비고 |
|---|---|---|---|---|
| FUNC-00 | 로그인 | 딜러/바이어 로그인 | Phase 1 | 공통 기능, Function Registry에 추가됨, FRD 미작성 |
| FUNC-03 | 재인증/수정 요청 | 사업자 인증 반려 시 재인증 | Phase 1 | FRD 미작성 |
| FUNC-04 | 차량 임시 저장 | 차량 등록 중 임시 저장 | Phase 1 | ✅ Function Registry에 추가됨, FRD 미작성 |
| FUNC-09 | VIN 기반 중복 등록 방지 | 차대번호 중복 체크 | Phase 1 | FRD 미작성 |
| FUNC-11 | 판매 방식 선택(일반/경매) | 초기 판매 방식 선택 | Phase 1 | ✅ Function Registry에 추가됨, FRD 미작성 |
| FUNC-12 | 경매 생성/설정 | 경매 시작가/즉시구매가 설정 | Phase 1 | ✅ Function Registry에 추가됨, FRD 미작성 |
| - | 바이어 회원가입 | 바이어 계정 생성 및 인증 | Phase 2 이후 | 바이어 웹앱은 Phase 1 범위 외 |
| FUNC-XX | 알림 설정 | 알림 수신 설정 및 관리 | Phase 2 | 공통 기능 |
| FUNC-XX | 정산 상세 조회 | 정산 내역 상세 조회 및 다운로드 | Phase 1 후반 | 우선순위 낮음 |
| FUNC-XX | 차량 상태 변경 | 차량 판매 중/판매 완료 상태 변경 | Phase 1 후반 | 우선순위 낮음 |

> 주석: Phase 1 범위 밖 기능은 "다음 단계" 리스트로 분리하여 관리. Phase 1 내 기능 중 FRD 미작성 항목은 우선순위에 따라 순차 작성 예정. FUNC-04, FUNC-11, FUNC-12는 v2.14에서 Function Registry에 추가됨.

### 23.3 결정로그(Phase 1)

| 결정 ID | 결정 내용 | 영향 범위 | 근거 | 오너 | 결정일 | 상태 |
|---|---|---|---|---|---|---|
| D-P1-001 | 일반 판매 → 경매 전환 가능 | SCR-0300, FUNC-15 | 12/23 회의 | 기획팀 | 2025-12-23 | 확정 |
| D-P1-002 | 등록원부 OCR 기반 차량정보 자동 채움 | SCR-0200, FUNC-05, SRD-001 | 12/23 회의, 시장 사례 | 기획팀 | 2025-12-23 | 확정 |
| D-P1-003 | 경매 즉시구매 포함 | SCR-0400, FUNC-19 | 12/23 회의, 경쟁사 동향 | 기획팀 | 2025-12-23 | 확정(정책 세부는 오픈) |

### 23.4 갭 로그(Phase 1 오픈 이슈)

| 갭 ID | 항목 | 설명 | 우선순위 | 결정 필요일 |
|---|---|---|---|---|
| GAP-P1-001 | 등록원부 OCR 벤더 선택 | 자동차민원 API vs 상용 OCR 서비스 결정 필요 | High | 2025-12-25 |
| GAP-P1-002 | 최고가 공개 시점 | 실시간 vs 특정 시점 결정 필요 | Medium | 2025-12-27 |
| GAP-P1-003 | 즉시구매 가격 설정 규칙 | 최소 시작가 대비 비율 결정 필요 | Medium | 2025-12-27 |
| GAP-P1-004 | 판매 방식 변경 조건 | 변경 가능 시점/상태, 재검사 필요 여부 결정 필요 | Medium | 2025-12-27 |

### 23.5 output.json IA 1.0 상세 항목 (참조)

본 섹션은 `output.json`의 IA 1.0 시트에서 추출한 세부 기능 항목을 PRD 형식으로 정리한 참조 자료입니다. 원본 데이터는 `output.json` 파일을 참조하시기 바랍니다.

#### 23.5.0 output.json 파일 구조

**파일 위치**: `C:\carivdealer\FOWARDMAX\output.json`  
**원본 파일명**: `기능 및 정책 정의서 (Domestic Seller TF).xlsx`  
**시트 구성**: 
- `표지`: 문서 메타데이터
- `IA 1.0`: 정보 구조(Information Architecture) 세부 항목 (~42개)
- `SPM 1.0`: 서비스 정책 매뉴얼(Service Policy Manual) 항목 (29개)

**데이터 형식**: JSON (Excel 파일을 JSON으로 변환한 형식)

#### 23.5.1 IA 항목 매핑 규칙

- **IA 기능 ID**: `Seller-ia-front-{카테고리}-{순번}` 형식
  - 예: `Seller-ia-front-join-01`, `Seller-ia-front-biz-01`
- **PRD Function ID**: `FUNC-##` 형식
  - 예: `FUNC-01`, `FUNC-02`
- **매핑 방법**: 
  1. 의미 기반 매칭: 기능 정의와 기능명 비교
  2. 카테고리 기반 매칭: Depth 구조와 Flow 구조 비교
  3. 화면 기반 매칭: 화면 ID와 Screen ID 비교
- **상세 매핑 테이블**: `IA_PRD_매핑_테이블.md` 참조

**주의사항**: 
- output.json의 IA 항목은 매우 세분화되어 있어, 여러 항목이 PRD의 하나의 Function에 매핑될 수 있습니다
- 예: `Seller-ia-front-join-01`~`09` (9개 항목) → `FUNC-01` (1개 기능)
- 개발 시 output.json의 세부 항목을 참조하되, PRD의 Function 단위로 구현을 진행합니다

#### 23.5.2 주요 IA 항목 카테고리

| 카테고리 | IA 항목 수 | PRD 매핑 상태 | 비고 |
|---|---|---|---|
| 회원가입/인증 (join) | 9개 | 매핑 가능 (FUNC-01) | 회원가입 기능의 세부 단계 |
| 사업자 인증 (biz) | 4개 | 매핑 가능 (FUNC-02) | 사업자 인증 관련 기능 |
| 검차 (inspect) | 10개 | 부분 매핑 (FUNC-06, FUNC-08) | 검차 관련 세부 기능 |
| 판매 (sale) | 2개 | 매핑 가능 (FUNC-16) | 일반 판매 관련 기능 |
| 차량 목록 (list) | 8개 | 화면만 매핑 (SCR-0101) | 차량 목록 조회 기능 |
| 정산 (settle) | 3개 | 매핑 불가 | PRD에 정산 관련 Function 없음 |
| 승인 프로세스 (approve) | 6개 | 매핑 불가 | PRD에 승인 프로세스 Function 없음 |

#### 23.5.3 IA 항목 상세 (매핑 가능 항목)

**회원가입 관련 (Seller-ia-front-join-*)**
- `Seller-ia-front-join-01`: 이메일 입력 → FUNC-01 (SCR-0002)
- `Seller-ia-front-join-02`: 비밀번호 설정 → FUNC-01 (SCR-0002)
- `Seller-ia-front-join-03`: 비밀번호 재입력 → FUNC-01 (SCR-0002)
- `Seller-ia-front-join-04`: 딜러 이름 입력 → FUNC-01 (SCR-0002)
- `Seller-ia-front-join-05`: 휴대폰 번호 입력 → FUNC-01 (SCR-0002)
- `Seller-ia-front-join-06`: SMS 인증 수행 → FUNC-01 (SCR-0002)
- `Seller-ia-front-join-07`: 만 14세 이상 동의 → FUNC-01 (SCR-0002)
- `Seller-ia-front-join-08`: 서비스 이용약관 동의 → FUNC-01 (SCR-0002)
- `Seller-ia-front-join-09`: 개인정보 처리방침 동의 → FUNC-01 (SCR-0002)

**검차 관련 (Seller-ia-front-inspect-*)**
- `Seller-ia-front-inspect-01`: 검차 신청 → FUNC-06 (SCR-0201)
- `Seller-ia-front-inspect-02`: 검차 결과 조회 → FUNC-08 (SCR-0202)
- `Seller-ia-front-inspect-03~10`: 검차 관련 세부 기능 → 분석 필요 (FUNC-06 또는 FUNC-08)

**판매 관련 (Seller-ia-front-sale-*)**
- `Seller-ia-front-sale-01`: 일반 거래 선택 → FUNC-16 (SCR-0102)
- `Seller-ia-front-sale-02`: 가격 제안 수신 → FUNC-16 (SCR-0102)

**차량 목록 관련 (Seller-ia-front-list-*)**
- `Seller-ia-front-list-01`~`08`: 차량 목록 관련 기능 (8개) → SCR-0101 (화면만 매핑, Function 없음)

**매핑 불가 항목 (PRD에 해당 Function 없음)**
- `Seller-ia-front-settle-01`~`03`: 정산 관련 기능 (3개) → Phase 1 범위 외 또는 향후 추가 예정
- `Seller-ia-front-approve-01`~`06`: 승인 프로세스 관련 기능 (6개) → Phase 1 범위 외 또는 향후 추가 예정

#### 23.5.4 IA 항목 사용 가이드

**개발 시 활용 방법**:
1. **세부 기능 구현 시**: output.json의 IA 항목을 참조하여 UI/UX 세부 사항 확인
2. **테스트 케이스 작성 시**: IA 항목별로 테스트 케이스 작성 가능
3. **문서화 시**: IA 항목을 참조하여 기능 명세 보완

**주의사항**:
- output.json의 IA 항목은 **참조 자료**이며, PRD의 Function이 **최종 명세**입니다
- 두 문서 간 불일치가 있을 경우, **PRD를 우선**합니다
- output.json의 세부 항목이 PRD에 반영되지 않은 경우, Phase 2 이후 검토 대상입니다

**관련 문서**:
- `IA_PRD_매핑_테이블.md`: 전체 IA 항목과 PRD Function/Screen 매핑 상세 테이블
- `PRD_IA_SPM_검증_보고서.md`: output.json과 PRD 간 일치성 검증 보고서
- `output.json`: 원본 데이터 파일

> 주석: 전체 IA 항목 목록 및 상세 매핑은 `IA_PRD_매핑_테이블.md` 문서를 참조하시기 바랍니다.

### 23.6 output.json SPM 1.0 정책 항목 (참조)

본 섹션은 `output.json`의 SPM 1.0 시트에서 추출한 정책 항목을 PRD 형식으로 정리한 참조 자료입니다.

#### 23.6.0 SPM 정책 개요

**SPM (Service Policy Manual)**: 서비스 운영 정책 및 비즈니스 규칙을 정의한 문서  
**총 항목 수**: 29개  
**카테고리**: User/Member, Sign Up, Auth, Legal, Trade, Notification, FX

#### 23.6.1 SPM 정책 매핑 규칙

- **SPM 정책 ID**: `dealer-sp-{카테고리}-{순번}` 형식
  - 예: `dealer-sp-user-01`, `dealer-sp-noti-01`
- **PRD Decision ID**: `D-*` 또는 `D-P1-*` 형식
  - 예: `D-P1-001`, `D-P1-004`
- **PRD NFR ID**: `NFR-####` 형식
  - 예: `NFR-0302`, `NFR-0305`
- **매핑 방법**: 
  1. 카테고리 기반 매칭: 정책 카테고리와 Decision/NFR 카테고리 비교
  2. 의미 기반 매칭: 정책 소개와 Decision 내용 비교
  3. 관계 기반 매칭: 관련 기능과 Decision/NFR 관계 비교
- **상세 매핑 테이블**: `SPM_PRD_매핑_테이블.md` 참조

**주의사항**:
- SPM 정책은 PRD의 Decision Log 또는 NFR로 매핑됩니다
- 매핑 불가한 정책은 향후 PRD 업데이트 시 Decision Log 또는 NFR로 추가될 예정입니다
- output.json의 "정책 내용" 필드가 대부분 비어있어 상세 매핑이 어려운 경우가 있습니다

#### 23.6.2 주요 SPM 정책 카테고리

| 카테고리 | SPM 항목 수 | PRD 매핑 상태 | 비고 |
|---|---|---|---|
| User / Member | 2개 | 매핑 불가 | PRD에 명시적 정책 없음 |
| Sign Up | 4개 | 부분 매핑 | D-P1-001 간접 관련 |
| Auth | 3개 | 매핑 불가 | PRD에 명시적 정책 없음 |
| Legal | 5개 | 매핑 불가 | PRD에 명시적 정책 없음 |
| Trade | 3개 | 부분 매핑 | D-P1-004 간접 관련 |
| Notification | 11개 | 매핑 가능 | NFR-0302, NFR-0305 |
| FX | 1개 | 매핑 불가 | PRD에 명시적 정책 없음 |

#### 23.6.3 SPM 정책 상세 (매핑 가능 항목)

**알림 정책 (dealer-sp-noti-*)**
- `dealer-sp-noti-01`: 딜러 승인 완료 알림 → NFR-0302
- `dealer-sp-noti-02`: 매물 등록 완료 알림 → NFR-0302
- `dealer-sp-noti-03`: 경매 시작 알림 → NFR-0302
- `dealer-sp-noti-04`: 거래 확정 알림 → NFR-0302
- `dealer-sp-noti-05`: 정산 완료 알림 → NFR-0302, NFR-0305
- `dealer-sp-noti-06~11`: 기타 알림 정책 → NFR-0302

**거래 정책 (dealer-sp-trade-*)**
- `dealer-sp-trade-01`: 거래 정책 → D-P1-004 (정보 공개 원칙) 간접 관련
- `dealer-sp-trade-02`: 운영 정책 → 매핑 불가 (PRD에 명시적 정책 없음)
- `dealer-sp-trade-03`: 공통 정책 → 매핑 불가 (PRD에 명시적 정책 없음)

**매핑 불가 항목 (PRD에 명시적 정책 없음)**
- `dealer-sp-user-01`~`02`: 딜러 회원 정의, 계정 상태 구분 (2개)
- `dealer-sp-join-02`~`04`: 가입 정보 입력, 승인 방식, 반려 처리 (3개)
- `dealer-sp-auth-01`~`03`: 로그인 정책, 비밀번호 재설정, 로그인 제한 (3개)
- `dealer-sp-legal-01`~`05`: 서비스 이용 약관, 개인정보 처리방침, 마케팅 정보 수신, 위치 정보 이용, 추가 약관 (5개)
- `dealer-sp-fx-01`: 화폐 환율 적용 및 표시 (1개)

#### 23.6.4 SPM 정책 사용 가이드

**개발 시 활용 방법**:
1. **정책 구현 시**: SPM 정책을 참조하여 비즈니스 규칙 확인
2. **Decision Log 확인**: 매핑된 Decision ID를 통해 관련 결정사항 확인
3. **NFR 확인**: 매핑된 NFR ID를 통해 비기능 요구사항 확인

**주의사항**:
- SPM 정책은 **참조 자료**이며, PRD의 Decision/NFR이 **최종 명세**입니다
- 매핑 불가한 정책은 Phase 2 이후 검토 대상입니다
- output.json의 "정책 내용" 필드가 비어있는 경우, 원본 Excel 파일을 참조하시기 바랍니다

**관련 문서**:
- `SPM_PRD_매핑_테이블.md`: 전체 SPM 정책과 PRD Decision/NFR 매핑 상세 테이블
- `PRD_IA_SPM_검증_보고서.md`: output.json과 PRD 간 일치성 검증 보고서
- `output.json`: 원본 데이터 파일

> 주석: 전체 SPM 정책 목록 및 상세 매핑은 `SPM_PRD_매핑_테이블.md` 문서를 참조하시기 바랍니다. 매핑 불가한 정책은 향후 PRD 업데이트 시 Decision Log 또는 NFR로 추가될 예정입니다.

---

## 24. 문서 메타데이터 및 검증 상태

### 24.1 문서 정보

| 항목 | 내용 |
|---|---|
| 문서 버전 | v2.13 (output.json 참조 섹션 보완 완료) |
| 최종 업데이트 | 2025-12-31 |
| 다음 검토일 | Phase 2 마일스톤 |
| 검증 상태 | 무결성 검증 완료 (output.json 참조 섹션 상세화 완료, 개발 시작 준비 완료) |
| 검증 기준 | 기능명세-와이어프레임 100% 매핑 리스트 생성 완료, 누락 기능 "다음 단계" 분리 완료, 문서 스위트 요소(Traceability/Decision/GAP/Risk/Opportunity/Governance) 내장 완료, Screen/Function Registry 완전 목록 작성 완료, 매핑 일치성 검증 완료, output.json 세부 요소 반영 완료 |

### 24.2 Phase 1 완료 체크리스트

| 항목 | 상태 | 비고 |
|---|---|---|
| 결정로그(12/23) 반영 | 완료 | D-P1-001, D-P1-002, D-P1-003 확정 |
| 플로우차트 규칙 표준화 | 완료 | 통합설계명세서 표준 채택 |
| 기능 명세 규칙(FRD 템플릿) | 완료 | 표 형식 템플릿 확정 |
| ID 레지스트리 구축 | 완료 | Flow/Screen/Func/Entity/API/Event/Decision/NFR |
| 기능-화면-메타데이터 체계 | 완료 | 매핑 테이블 구성 완료 |
| IA 및 사이트맵 | 완료 | 딜러/바이어/공통 분리 완료, 표 형식(1depths/2depths/3depths/contents) 재작성 완료 |
| 탁송/정산 기능 추가 | 완료 | FUNC-20, FUNC-21, FUNC-22, FUNC-23 추가 완료 |
| 기능-매핑-관계규칙 정의 | 완료 | 개발자 수준 매핑 규칙 및 매트릭스 작성 완료 |
| Traceability Matrix 내장 | 완료 | 니즈→요구사항→기능→화면→API→엔터티→NFR→테스트 추적표 작성 완료 |
| Decision/GAP/Risk/Opportunity 내장 | 완료 | 문서 스위트 요소 내장 완료 |
| 문서 거버넌스 내장 | 완료 | 버전 관리 규칙, 변경 관리 프로세스, SSOT 원칙 내장 완료 |
| 유저플로우(FLOW-00~04) | 완료 | 태스크 플로우/화면 전환 맵/상태 전이 명세 완료 |
| FRD 작성(Phase 1 필수) | 완료 | FUNC-05, FUNC-15, FUNC-18, FUNC-19 등 우선순위 기능 명세 완료 |
| NFR 작성 | 완료 | OCR 성능, 동시성, 경매 낙찰 처리 성능, 외부 API 장애 대응, 원자성 보장 |
| TSD 작성(Phase 1 수준) | 완료 | 모듈 구조, 데이터 스키마 개요, 인덱스, API 개요 |
| SRD 작성 | 완료 | 외부 연동 목록, 재시도/백오프/폴백 정책, 장애 대응 정책 |
| 기능-화면 100% 매핑 리스트 | 완료 | Phase 1 필수 기능 매핑 완료, 누락 기능 "다음 단계" 분리 완료 |

### 24.3 Phase 1 오픈 이슈(결정 필요)

| 이슈 ID | 항목 | 설명 | 우선순위 | 결정 필요일 |
|---|---|---|---|---|
| GAP-P1-001 | 등록원부 OCR 벤더 선택 | 자동차민원 API vs 상용 OCR 서비스 결정 필요 | High | 2025-12-25 |
| GAP-P1-002 | 최고가 공개 시점 | 실시간 vs 특정 시점 결정 필요 | Medium | 2025-12-27 |
| GAP-P1-003 | 즉시구매 가격 설정 규칙 | 최소 시작가 대비 비율 결정 필요 | Medium | 2025-12-27 |
| GAP-P1-004 | 판매 방식 변경 조건 | 변경 가능 시점/상태, 재검사 필요 여부 결정 필요 | Medium | 2025-12-27 |

### 24.4 다음 단계(Phase 2 이후)

- 바이어 회원가입 플로우 확장
- 알림 설정 및 관리 기능
- 정산 상세 조회 기능 확장
- 차량 상태 변경 기능(판매 중/판매 완료)
- 추가 NFR(보안/RBAC 상세, 감사로그 상세 등)
- API 상세 명세 확장
- 데이터 스키마 상세 확장

---

**문서 버전**: v2.13 (output.json 참조 섹션 보완 완료)  
**최종 업데이트**: 2025-12-31 (output.json 참조 섹션 상세화, 사용 가이드 추가, 관련 문서 링크 정리)  
**다음 검토일**: Phase 2 마일스톤  
**검증 상태**: Final SSOT for IDE Agent Implementation (무결성 검증 완료, 개발 시작 준비 완료)

---

## 업데이트 이력

### v2.13 (2025-12-31)
- **output.json 참조 섹션 보완**:
  - Section 23.5에 파일 구조 설명 및 사용 가이드 추가
  - Section 23.6에 정책 개요 및 사용 가이드 추가
  - 매핑 불가 항목 상세 목록 추가
  - 관련 문서 링크 정리
  - 목차에 부록 하위 섹션 추가

### v2.12 (2025-12-31)
- **최종 정합성 클린업**:
  - FLOW-03 순서 표기 정합화(5A/5B 분기, 조회 표기)
  - Decision Log D-P1-003 정합화(SCR-0500 제거, "최고가 공개" 문구 제거)
  - Phase 1 완료 체크리스트 오기 정정(FUNC-24 제거, 항목명 정합화)
  - Function Registry 주석 총 개수 정정(14개 → 16개)

### v2.11 (2025-12-31)
- **Critical Issues 해결**:
  - 상태 전이-화면 매핑 테이블 수정 (SCR-0200-Draft → SCR-0200, SCR-0201-Progress → SCR-0201)
  - FLOW-03 매핑 테이블 수정 (실제 플로우 순서 반영, FLOW-02 연결 명시)
  - 사이트맵 구조 수정 (플로우 구조와 일치, 중복 항목 제거)
- **High Priority Issues 해결**:
  - Function-Screen 매핑 보완 (조회 기능 정책 명시)
  - 사이트맵 중복 항목 제거 완료
- **output.json 통합**:
  - 부록에 IA 1.0 상세 항목 추가 (Section 23.5)
  - 부록에 SPM 1.0 정책 항목 추가 (Section 23.6)
  - 매핑 테이블 참조 추가
- **문서 구조 개선**:
  - 조회 기능 정책 명시 (조회 전용 화면은 Function 없이 관리)
  - 플로우 순서 명확화

### v2.10 (2025-12-28)
- Firebase 리소스 생성 완료 상태 반영
- Firebase Storage 버킷 생성 완료

### v2.9 (2025-12-31)
- 기술 스택, 사이트맵 100%, 상태 전이 로직 및 MVP Mock 전략 통합 완료

