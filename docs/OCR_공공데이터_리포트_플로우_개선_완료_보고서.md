# OCR-κ³µκ³µλ°μ΄ν„°-λ¦¬ν¬νΈ ν”λ΅μ° κ°μ„  μ™„λ£ λ³΄κ³ μ„

**μ‘μ„±μΌ**: 2025-01-XX  
**ν”„λ΅μ νΈ**: ForwardMax (carivdealer)  
**κ°μ„  λ²”μ„**: λ¦¬ν¬νΈ μƒμ„± κΈ°λ¥μ„ ν”„λ΅ νΈμ—”λ“μ—μ„ λ°±μ—”λ“λ΅ μ΄λ™

---

## π“‹ κ°μ„  μ”μ•½

### κ°μ„  μ „ μƒνƒ
- β… **1λ‹¨κ³„ (OCR)**: λ°±μ—”λ“μ—μ„ μ™„μ „ κµ¬ν„λ¨
- β… **2λ‹¨κ³„ (κ³µκ³µλ°μ΄ν„° μ΅°ν)**: λ°±μ—”λ“μ—μ„ μ™„μ „ κµ¬ν„λ¨
- β οΈ **3-4λ‹¨κ³„ (λ¦¬ν¬νΈ μƒμ„±)**: ν”„λ΅ νΈμ—”λ“μ—μ„ κµ¬ν„λ¨ (λ°±μ—”λ“ API μ—†μ)
  - Gemini API ν‚¤κ°€ ν”„λ΅ νΈμ—”λ“ ν™κ²½ λ³€μμ— λ…Έμ¶λ¨
  - λ³΄μ• λ° μ•„ν‚¤ν…μ² κ°μ„  ν•„μ”

### κ°μ„  ν›„ μƒνƒ
- β… **1λ‹¨κ³„ (OCR)**: λ°±μ—”λ“μ—μ„ μ™„μ „ κµ¬ν„λ¨
- β… **2λ‹¨κ³„ (κ³µκ³µλ°μ΄ν„° μ΅°ν)**: λ°±μ—”λ“μ—μ„ μ™„μ „ κµ¬ν„λ¨
- β… **3-4λ‹¨κ³„ (λ¦¬ν¬νΈ μƒμ„±)**: λ°±μ—”λ“μ—μ„ μ™„μ „ κµ¬ν„λ¨
  - Gemini API ν‚¤κ°€ Secret Managerμ—μ„ κ΄€λ¦¬λ¨
  - μ „μ²΄ ν”λ΅μ°κ°€ λ°±μ—”λ“μ—μ„ μ™„λ£λ¨

---

## π”§ κµ¬ν„ λ‚΄μ©

### 1. λ°±μ—”λ“ λ¦¬ν¬νΈ μƒμ„± API μ¶”κ°€

#### μƒλ΅ μƒμ„±λ νμΌ
- **νμΌ**: `functions/src/report/generateReport.ts`
- **μ—”λ“ν¬μΈνΈ**: `POST /generateReportAPI`
- **κΈ°λ¥**: μ°¨λ‰ μ •λ³΄λ¥Ό λ°›μ•„ Gemini AIλ΅ μ„±λ¥ ν‰κ°€ λ¦¬ν¬νΈ μƒμ„±

#### μ£Όμ” κµ¬ν„ λ‚΄μ©
```typescript
export const generateReport = asyncHandler(async (req: Request, res: Response) => {
  // 1. μ…λ ¥κ°’ μ ν¨μ„± κ²€μ¦
  // 2. Secret Managerμ—μ„ Gemini API ν‚¤ λ΅λ“
  // 3. Gemini API νΈμ¶ν•μ—¬ λ¦¬ν¬νΈ μƒμ„±
  // 4. μ‘λ‹µ νμ‹± λ° μ ν¨μ„± κ²€μ¦
  // 5. κ²°κ³Ό λ°ν™
});
```

#### νΉμ§•
- Secret Managerλ¥Ό ν†µν• μ•μ „ν• API ν‚¤ κ΄€λ¦¬
- `asyncHandler`λ¥Ό ν†µν• ν‘μ¤€ν™”λ μ—λ¬ μ²λ¦¬
- JSON μ¤ν‚¤λ§ κ²€μ¦μΌλ΅ μ•μ •μ μΈ μ‘λ‹µ λ³΄μ¥
- νƒ€μ„μ•„μ›ƒ μ„¤μ • (60μ΄)

### 2. API μ—”λ“ν¬μΈνΈ μƒμ μ¶”κ°€

#### μμ •λ νμΌ
- **νμΌ**: `src/config/apiEndpoints.ts`
- **μ¶”κ°€ λ‚΄μ©**:
```typescript
REPORT: {
  GENERATE: 'generateReportAPI',  // μƒλ΅ μ¶”κ°€
  SAVE: 'saveReportAPI',
}
```

### 3. ν”„λ΅ νΈμ—”λ“ API ν΄λΌμ΄μ–ΈνΈ μ—…λ°μ΄νΈ

#### μμ •λ νμΌ
- **νμΌ**: `src/services/api.ts`
- **μ¶”κ°€ λ‚΄μ©**: `report.generateReport` ν•¨μ μ¶”κ°€
```typescript
report: {
  generateReport: async (vehicleInfo: {...}) => {
    // λ°±μ—”λ“ API νΈμ¶
    // νƒ€μ„μ•„μ›ƒ μ²λ¦¬ λ° Mock ν΄λ°± μ§€μ›
  }
}
```

### 4. ν”„λ΅ νΈμ—”λ“ μ»΄ν¬λ„νΈ μ—…λ°μ΄νΈ

#### μμ •λ νμΌ
- **νμΌ**: `index.tsx`
- **μμ • μ„μΉ**:
  1. `RegisterVehiclePage` - OCR μ™„λ£ ν›„ λ¦¬ν¬νΈ μƒμ„± (λΌμΈ 1295-1372)
  2. `RegisterVehiclePage` - λ¦¬ν¬νΈ μ¬μ‹λ„ λ²„νΌ (λΌμΈ 1810-1877)
  3. `InspectionReportPage` - λ¦¬ν¬νΈ λ΅λ“ μ‹ λ¦¬ν¬νΈ μƒμ„± (λΌμΈ 2804-2831)

#### λ³€κ²½ λ‚΄μ©
- ν”„λ΅ νΈμ—”λ“ `GeminiService.generateVehicleCondition` νΈμ¶ μ κ±°
- λ°±μ—”λ“ `apiClient.report.generateReport` νΈμ¶λ΅ λ³€κ²½
- API μ‘λ‹µ κµ¬μ΅°μ— λ§κ² λ°μ΄ν„° μ²λ¦¬ λ΅μ§ μμ •

---

## π“ κ°μ„ λ ν”λ΅μ° λ‹¤μ΄μ–΄κ·Έλ¨

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                    μ‚¬μ©μ (ν”„λ΅ νΈμ—”λ“)                        β”‚
β”‚  λ“±λ΅μ›λ¶€ μ΄λ―Έμ§€ μ—…λ΅λ“                                        β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                     β”‚ POST /ocrRegistrationAPI
                     β”‚ FormData: { registration_image }
                     β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚              λ°±μ—”λ“: ocrRegistrationAPI                      β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”‚
β”‚  β”‚ 1. μ΄λ―Έμ§€ νμ‹± (multipart/form-data)                  β”‚   β”‚
β”‚  β”‚ 2. Gemini API νΈμ¶ β†’ μ°¨λ‰λ²νΈ μ¶”μ¶                    β”‚   β”‚
β”‚  β”‚    - Model: gemini-3-pro-preview                      β”‚   β”‚
β”‚  β”‚    - Response: { plateNumber: "12κ°€ 3456" }          β”‚   β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”‚
β”‚                     β”‚ plateNumber                            β”‚
β”‚                     β–Ό                                        β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”‚
β”‚  β”‚ 3. κ³µκ³µλ°μ΄ν„° API νΈμ¶                                β”‚   β”‚
β”‚  β”‚    - getVehicleStatistics(plateNumber)                β”‚   β”‚
β”‚  β”‚    - KOTSA API: μ°¨λ‰λ“±λ΅μ¦λ„ κ³µκ³µλ°μ΄ν„°               β”‚   β”‚
β”‚  β”‚    - Response: XML β†’ JSON λ³€ν™                        β”‚   β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”‚
β”‚                     β”‚ vehicleInfo                             β”‚
β”‚                     β”‚ { vin, manufacturer, model, year, ... } β”‚
β”‚                     β–Ό                                        β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”‚
β”‚  β”‚ 4. μ‘λ‹µ λ°ν™                                          β”‚   β”‚
β”‚  β”‚    { plateNumber, vin, manufacturer, model, ... }     β”‚   β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                      β”‚ JSON Response
                      β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚              ν”„λ΅ νΈμ—”λ“: index.tsx                          β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”‚
β”‚  β”‚ 5. OCR κ²°κ³Ό μμ‹                                       β”‚   β”‚
β”‚  β”‚    result = { plateNumber, vin, manufacturer, ... }   β”‚   β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”‚
β”‚                     β”‚ result                                  β”‚
β”‚                     β”‚ POST /generateReportAPI                β”‚
β”‚                     β–Ό                                        β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚              λ°±μ—”λ“: generateReportAPI                      β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”‚
β”‚  β”‚ 6. Gemini λ¦¬ν¬νΈ μƒμ„± (λ°±μ—”λ“)                       β”‚   β”‚
β”‚  β”‚    - Secret Managerμ—μ„ API ν‚¤ λ΅λ“                   β”‚   β”‚
β”‚  β”‚    - GeminiService.generateVehicleCondition(vehicleInfo)β”‚ β”‚
β”‚  β”‚    - Model: gemini-3-pro-preview                      β”‚   β”‚
β”‚  β”‚    - Prompt: μ°¨λ‰ μ •λ³΄ κΈ°λ° ν‰κ°€ λ¦¬ν¬νΈ μƒμ„±          β”‚   β”‚
β”‚  β”‚    - Response: { exterior, interior, mechanic, frame }β”‚   β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”‚
β”‚                     β”‚ reportResult                            β”‚
β”‚                     β”‚ { success, condition, vehicleInfo, ... }β”‚
β”‚                     β–Ό                                        β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”‚
β”‚  β”‚ 7. μ‘λ‹µ λ°ν™                                          β”‚   β”‚
β”‚  β”‚    { success, condition, vehicleInfo, generatedAt }  β”‚   β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                      β”‚ JSON Response
                      β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚              ν”„λ΅ νΈμ—”λ“: index.tsx                          β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”‚
β”‚  β”‚ 8. λ¦¬ν¬νΈ μμ‹  λ° ν‘μ‹                                β”‚   β”‚
β”‚  β”‚    setGeneratedReport(reportResult)                 β”‚   β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”‚
β”‚                     β”‚ (μ„ νƒμ‚¬ν•­)                             β”‚
β”‚                     β–Ό                                        β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”‚
β”‚  β”‚ 9. λ¦¬ν¬νΈ μ €μ¥ (μ„ νƒμ‚¬ν•­)                             β”‚   β”‚
β”‚  β”‚    - POST /saveReportAPI                              β”‚   β”‚
β”‚  β”‚    - Firestoreμ— μ €μ¥                                 β”‚   β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

---

## β… κ°μ„  ν¨κ³Ό

### 1. λ³΄μ• κ°•ν™”
- β… Gemini API ν‚¤κ°€ ν”„λ΅ νΈμ—”λ“μ— λ…Έμ¶λμ§€ μ•μ
- β… Secret Managerλ¥Ό ν†µν• μ¤‘μ•™ν™”λ API ν‚¤ κ΄€λ¦¬
- β… λ°±μ—”λ“μ—μ„λ§ API ν‚¤μ— μ ‘κ·Ό κ°€λ¥

### 2. μ•„ν‚¤ν…μ² κ°μ„ 
- β… μ „μ²΄ ν”λ΅μ°κ°€ λ°±μ—”λ“μ—μ„ μ™„λ£λ¨
- β… ν”„λ΅ νΈμ—”λ“-λ°±μ—”λ“ μ—­ν•  λ¶„λ¦¬ λ…ν™•ν™”
- β… API ν‚¤ κ΄€λ¦¬ μΌκ΄€μ„± ν™•λ³΄

### 3. μ μ§€λ³΄μμ„± ν–¥μƒ
- β… λ¦¬ν¬νΈ μƒμ„± λ΅μ§μ΄ λ°±μ—”λ“μ— μ¤‘μ•™ν™”λ¨
- β… μ—λ¬ μ²λ¦¬ ν‘μ¤€ν™” (`asyncHandler` μ‚¬μ©)
- β… API μ—”λ“ν¬μΈνΈ μ¤‘μ•™ κ΄€λ¦¬ (`API_ENDPOINTS`)

### 4. ν™•μ¥μ„± ν–¥μƒ
- β… λ‹¤λ¥Έ ν΄λΌμ΄μ–ΈνΈμ—μ„λ„ λ¦¬ν¬νΈ μƒμ„± API μ‚¬μ© κ°€λ¥
- β… λ¦¬ν¬νΈ μƒμ„± λ΅μ§ λ³€κ²½ μ‹ λ°±μ—”λ“λ§ μμ •ν•λ©΄ λ¨
- β… API ν‚¤ κµμ²΄ μ‹ Secret Managerλ§ μ—…λ°μ΄νΈν•λ©΄ λ¨

---

## π“ λ³€κ²½λ νμΌ λ©λ΅

### λ°±μ—”λ“ (Functions)
1. β… `functions/src/report/generateReport.ts` (μ‹ κ· μƒμ„±)
2. β… `functions/src/index.ts` (μ—”λ“ν¬μΈνΈ μ¶”κ°€)

### ν”„λ΅ νΈμ—”λ“
3. β… `src/config/apiEndpoints.ts` (μ—”λ“ν¬μΈνΈ μƒμ μ¶”κ°€)
4. β… `src/services/api.ts` (λ¦¬ν¬νΈ μƒμ„± API ν΄λΌμ΄μ–ΈνΈ μ¶”κ°€)
5. β… `index.tsx` (ν”„λ΅ νΈμ—”λ“ Gemini μ„λΉ„μ¤ νΈμ¶ β†’ λ°±μ—”λ“ API νΈμ¶λ΅ λ³€κ²½)

---

## π” κ²€μ¦ μ‚¬ν•­

### 1. API μ—”λ“ν¬μΈνΈ λ§¤μΉ­
- β… `generateReportAPI` μ—”λ“ν¬μΈνΈκ°€ `functions/src/index.ts`μ— λ“±λ΅λ¨
- β… `API_ENDPOINTS.REPORT.GENERATE` μƒμκ°€ μ¬λ°”λ¥΄κ² μ„¤μ •λ¨
- β… ν”„λ΅ νΈμ—”λ“μ—μ„ μ¬λ°”λ¥Έ μ—”λ“ν¬μΈνΈ νΈμ¶

### 2. νƒ€μ… μ•μ „μ„±
- β… TypeScript νƒ€μ… μ—λ¬ μ—†μ
- β… API μ‘λ‹µ νƒ€μ… μ •μ μ™„λ£
- β… μ…λ ¥κ°’ μ ν¨μ„± κ²€μ¦ μ™„λ£

### 3. μ—λ¬ μ²λ¦¬
- β… `asyncHandler`λ¥Ό ν†µν• ν‘μ¤€ν™”λ μ—λ¬ μ²λ¦¬
- β… ν”„λ΅ νΈμ—”λ“μ—μ„ μ—λ¬ λ©”μ‹μ§€ ν‘μ‹
- β… Mock ν΄λ°± μ§€μ› (νƒ€μ„μ•„μ›ƒ μ‹)

---

## β οΈ μ£Όμμ‚¬ν•­

### 1. ν”„λ΅ νΈμ—”λ“ Gemini μ„λΉ„μ¤ μ μ§€
- `src/services/gemini.ts`μ `generateVehicleCondition` ν•¨μλ” μ κ±°ν•μ§€ μ•μ•μµλ‹λ‹¤.
- λ‹¤λ¥Έ κ³³μ—μ„ μ‚¬μ©ν•  μ μμΌλ―€λ΅ μ μ§€ν–μµλ‹λ‹¤.
- ν–¥ν›„ μ™„μ „ν μ κ±°ν•λ ¤λ©΄ μ‚¬μ©μ²λ¥Ό λ¨λ‘ ν™•μΈν•΄μ•Ό ν•©λ‹λ‹¤.

### 2. Secret Manager μ„¤μ • ν™•μΈ
- λ°°ν¬ μ „μ— `gemini-api-key` μ‹ν¬λ¦Ώμ΄ Secret Managerμ— μ„¤μ •λμ–΄ μλ”μ§€ ν™•μΈν•΄μ•Ό ν•©λ‹λ‹¤.
- Cloud Functions μ„λΉ„μ¤ κ³„μ •μ— `roles/secretmanager.secretAccessor` κ¶ν•μ΄ μλ”μ§€ ν™•μΈν•΄μ•Ό ν•©λ‹λ‹¤.

### 3. νƒ€μ„μ•„μ›ƒ μ„¤μ •
- `generateReportAPI`μ νƒ€μ„μ•„μ›ƒμ€ 60μ΄λ΅ μ„¤μ •λμ–΄ μμµλ‹λ‹¤.
- Gemini API νΈμ¶ μ‹κ°„μ„ κ³ λ ¤ν• μ„¤μ •μ…λ‹λ‹¤.

---

## π€ λ°°ν¬ μ „ μ²΄ν¬λ¦¬μ¤νΈ

- [ ] Secret Managerμ— `gemini-api-key` μ‹ν¬λ¦Ώ ν™•μΈ
- [ ] Cloud Functions μ„λΉ„μ¤ κ³„μ • κ¶ν• ν™•μΈ
- [ ] Functions λΉλ“ ν…μ¤νΈ: `cd functions && npm run build`
- [ ] ν”„λ΅ νΈμ—”λ“ λΉλ“ ν…μ¤νΈ: `npm run build`
- [ ] Functions λ°°ν¬: `firebase deploy --only functions`
- [ ] λ°°ν¬ ν›„ API ν…μ¤νΈ

---

## π“ κ°μ„  μ „ν›„ λΉ„κµ

| ν•­λ© | κ°μ„  μ „ | κ°μ„  ν›„ |
|------|---------|---------|
| λ¦¬ν¬νΈ μƒμ„± μ„μΉ | ν”„λ΅ νΈμ—”λ“ | λ°±μ—”λ“ |
| API ν‚¤ κ΄€λ¦¬ | ν”„λ΅ νΈμ—”λ“ ν™κ²½ λ³€μ | Secret Manager |
| λ³΄μ• μμ¤€ | β οΈ λ‚®μ (API ν‚¤ λ…Έμ¶) | β… λ†’μ (API ν‚¤ λ³΄νΈ) |
| μ•„ν‚¤ν…μ² μΌκ΄€μ„± | β οΈ νΌμ¬ | β… μΌκ΄€λ¨ |
| μ μ§€λ³΄μμ„± | β οΈ λ¶„μ‚° | β… μ¤‘μ•™ν™” |
| ν™•μ¥μ„± | β οΈ μ ν•μ  | β… ν–¥μƒλ¨ |

---

**λ³΄κ³ μ„ μ‘μ„±μΌ**: 2025-01-XX  
**μ‘μ„±μ**: AI Assistant  
**μƒνƒ**: β… κ°μ„  μ™„λ£


